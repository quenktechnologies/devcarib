{

    "title": "Comment",

    "type": "object",

    "collection": "comments",

    "model.type": "ModelType",

    "models:imports": {

        "$ref": "./common/imports.json",

        "@converse/types/lib/comment": {

            "Comment": "ModelType"

        },

        "@quenk/noni-mongodb/lib/database/collection": {

            "populate": "populate",

            "populateN": "populateN"

        }

    },


    "validators:imports": {

        "@converse/types/lib/comment": "Comment"

    },

    "checks:imports": {

        "@converse/validators/lib/comment": ["validate", "validatePartial"]

    },

    "checks-complete": [

        ["@devcarib/server/lib/data/checks#inc", ["'comments'"]]

    ],

    "checks": [

        ["@devcarib/server/lib/data/checks#parseMarkdown", ["'body'", "'body_html'"]]

    ],


    "properties": {

        "id": {

            "type": "number",

            "readOnly": true,

            "filterAs": ["number", "numbers"],

            "checks-complete": [

                ["@devcarib/server/lib/data/checks#unique", ["'comments'", "'id'"]]

            ]

        },

        "$ref": "./common/properties.json",

        "post": {

            "type": "number",

            "readOnly": true,

            "filterAs": ["number", "numbers"],

            "checks-complete": [

                ["@devcarib/server/lib/data/checks#unique", ["'posts'", "'id'"]]

            ]

        },

        "body": {

            "type": "string",

            "optional": true,

            "validators": [

                "@devcarib/common/lib/data/validators#textlarge",

                ["@devcarib/common/lib/data/validators#minLength", [3]],

                ["@devcarib/common/lib/data/validators#maxLength", [10000]]

            ]

        },

        "body_html": {

            "type": "string",

            "readOnly": true

        }

    }

}
