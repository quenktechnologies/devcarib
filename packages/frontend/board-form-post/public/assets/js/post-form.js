(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Agent=exports.defaultOptions=void 0;var util=require("../util");var record_1=require("@quenk/noni/lib/data/record");var future_1=require("@quenk/noni/lib/control/monad/future");var string_1=require("@quenk/noni/lib/data/string");var request_1=require("../request");exports.defaultOptions={ttl:0,tags:{},context:{}};var Agent=function(){function Agent(host,headers,cookies,options,transport,plugins){this.host=host;this.headers=headers;this.cookies=cookies;this.options=options;this.transport=transport;this.plugins=plugins}Agent.prototype.setTransport=function(transport,plugins){if(plugins===void 0){plugins=[]}var _a=this,host=_a.host,headers=_a.headers,cookies=_a.cookies,options=_a.options;return new Agent(host,headers,cookies,options,transport,plugins)};Agent.prototype.head=function(path,params,headers){if(params===void 0){params={}}if(headers===void 0){headers={}}return this.send(new request_1.Head(path,params,headers))};Agent.prototype.get=function(path,params,headers){if(params===void 0){params={}}if(headers===void 0){headers={}}return this.send(new request_1.Get(path,params,headers))};Agent.prototype.post=function(path,body,headers){if(headers===void 0){headers={}}return this.send(new request_1.Post(path,body,headers))};Agent.prototype.put=function(path,body,headers){if(headers===void 0){headers={}}return this.send(new request_1.Put(path,body,headers))};Agent.prototype.patch=function(path,body,headers){if(headers===void 0){headers={}}return this.send(new request_1.Patch(path,body,headers))};Agent.prototype.delete=function(path,body,headers){return this.send(new request_1.Delete(path,body,headers))};Agent.prototype.send=function(req){var _a=this,host=_a.host,cookies=_a.cookies,headers=_a.headers,transport=_a.transport,plugins=_a.plugins;var options=record_1.rmerge3(exports.defaultOptions,this.options,req.options);var port=options.port;var method=req.method,params=req.params,body=req.body;var tags=options.tags,context=options.context,ttl=options.ttl;var path=util.urlFromString(string_1.interpolate(req.path,context),params);var ctx={host:host,port:port,method:method,path:path,body:body,headers:headers,cookies:cookies,options:{ttl:ttl,tags:tags,context:context}};var ft=plugins.reduce(function(f,p){return f.chain(function(c){return p.beforeRequest(c)})},future_1.pure(ctx));return ft.chain(function(ctx){return transport.send(ctx)}).chain(function(r){return plugins.reduce(function(f,p){return f.chain(function(res){return p.afterResponse(res)})},future_1.pure(r))})};return Agent}();exports.Agent=Agent},{"../request":11,"../util":15,"@quenk/noni/lib/control/monad/future":18,"@quenk/noni/lib/data/record":25,"@quenk/noni/lib/data/string":27}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JSONParser=void 0;var record_1=require("@quenk/noni/lib/data/record");var error_1=require("@quenk/noni/lib/control/error");var either_1=require("@quenk/noni/lib/data/either");var defaultOptions={prefix:/^\)\]\}',?\n/,lenient:false};var JSONParser=function(){function JSONParser(options){if(options===void 0){options={}}this.options=options;this.responseType="";this.accepts="application/json";this.opts=record_1.merge(defaultOptions,this.options)}JSONParser.prototype.apply=function(body){var _a=this.opts,prefix=_a.prefix,lenient=_a.lenient;var str=body.replace(prefix,"");var eresult=error_1.attempt(function(){return JSON.parse(str)});return eresult.isLeft()&&lenient?either_1.right({}):eresult};return JSONParser}();exports.JSONParser=JSONParser},{"@quenk/noni/lib/control/error":17,"@quenk/noni/lib/data/either":22,"@quenk/noni/lib/data/record":25}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CSRFProtectionPlugin=exports.DEFAULT_CSRF_HEADER_NAME=exports.DEFAULT_CSRF_COOKIE_NAME=void 0;var future_1=require("@quenk/noni/lib/control/monad/future");var record_1=require("@quenk/noni/lib/data/record");exports.DEFAULT_CSRF_COOKIE_NAME="xsrf-token";exports.DEFAULT_CSRF_HEADER_NAME="x-xsrf-token";var CSRFProtectionPlugin=function(){function CSRFProtectionPlugin(cookie,header){if(cookie===void 0){cookie=exports.DEFAULT_CSRF_COOKIE_NAME}if(header===void 0){header=exports.DEFAULT_CSRF_HEADER_NAME}this.cookie=cookie;this.header=header}CSRFProtectionPlugin.prototype.beforeRequest=function(ctx){var _a;var mvalue=ctx.cookies.getCookie(this.cookie);if(mvalue.isJust())ctx.headers=record_1.merge(ctx.headers,(_a={},_a[this.header]=mvalue.get().value,_a));return future_1.pure(ctx)};CSRFProtectionPlugin.prototype.afterResponse=function(r){return future_1.pure(r)};return CSRFProtectionPlugin}();exports.CSRFProtectionPlugin=CSRFProtectionPlugin},{"@quenk/noni/lib/control/monad/future":18,"@quenk/noni/lib/data/record":25}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JSONTransform=void 0;var util=require("../../util");var error_1=require("@quenk/noni/lib/control/error");var JSONTransform=function(){function JSONTransform(){this.type="application/json;charset=utf-8"}JSONTransform.prototype.apply=function(body){return error_1.attempt(function(){return util.isObject(body)&&!util.isFile(body)&&!util.isBlob(body)&&!util.isFormData(body)?JSON.stringify(body):""+body})};return JSONTransform}();exports.JSONTransform=JSONTransform},{"../../util":15,"@quenk/noni/lib/control/error":17}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XHRTransport=void 0;var future_1=require("@quenk/noni/lib/control/monad/future");var header_1=require("../../header");var response_1=require("../../response");var method_1=require("../../request/method");var headers_1=require("../../headers");var XHRTransport=function(){function XHRTransport(responseType,transform,parser){if(responseType===void 0){responseType=""}this.responseType=responseType;this.transform=transform;this.parser=parser}XHRTransport.prototype.send=function(ctx){var _this=this;var _a=this,parser=_a.parser,transform=_a.transform;var host=ctx.host,port=ctx.port,path=ctx.path,method=ctx.method,body=ctx.body,headers=ctx.headers,options=ctx.options,cookies=ctx.cookies;var xhr=new XMLHttpRequest;var portNumer=port&&port!==80&&port!==443?":"+port:"";var url=""+host+portNumer+(path[0]==="/"?"":"/")+path;return new future_1.Run(function(s){var transBody=undefined;if(body!=null){var exceptBody=transform.apply(body);if(exceptBody.isLeft()){s.onError(new Error(exceptBody.takeLeft().message));return function(){}}else{transBody=exceptBody.takeRight()}}xhr.open(method,url,true);xhr.onload=function(){cookies.setCookies(document.cookie.split(";"));var exceptRes=parser.apply(xhr.response);if(exceptRes.isLeft()){s.onError(new Error(exceptRes.takeLeft().message))}else{var r=response_1.createResponse(xhr.status,exceptRes.takeRight(),header_1.fromString(xhr.getAllResponseHeaders()),options);s.onSuccess(r)}};xhr.timeout=options.ttl;xhr.responseType=_this.responseType;xhr.onerror=function(){return s.onError(new Error("TransportError"))};xhr.onabort=function(){return s.onError(new Error("AbortError"))};Object.keys(headers).forEach(function(k){xhr.setRequestHeader(k,headers[k])});if(method===method_1.Method.Get||method===method_1.Method.Head)xhr.setRequestHeader(headers_1.ACCEPTS,parser.accepts);else if(transform.type!=="multipart/form-data")xhr.setRequestHeader(headers_1.CONTENT_TYPE,transform.type);xhr.send(transBody);return function(){return xhr.abort()}})};return XHRTransport}();exports.XHRTransport=XHRTransport},{"../../header":9,"../../headers":10,"../../request/method":12,"../../response":13,"@quenk/noni/lib/control/monad/future":18}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get=exports.createAgent=exports.splitUrl=void 0;var document_1=require("./cookie/container/document");var json_1=require("./agent/transform/json");var json_2=require("./agent/parser/json");var xhr_1=require("./agent/transport/xhr");var request_1=require("./request");var csrf_1=require("./agent/plugin/csrf");var agent_1=require("./agent");var HTTP="http://";var HTTPS="https://";exports.splitUrl=function(url){var split=url.split(HTTP).join("").split(HTTPS).join("").split("/");if(split.length===1||split.length===2&&split[1]==="")return[split[0],"/"];return[split[0],"/"+split.slice(1).join("/")]};exports.createAgent=function(host,port){if(host===void 0){host=getHost()}if(port===void 0){port=getPort()}return new agent_1.Agent(host,{},document_1.DocumentContainer.create(),{ttl:0,tags:{},context:{},port:port},new xhr_1.XHRTransport("",new json_1.JSONTransform,new json_2.JSONParser({lenient:true})),[new csrf_1.CSRFProtectionPlugin])};var getHost=function(){return window.location.protocol+"//"+window.location.hostname};var getPort=function(){var port=window.location.port;return Number(port===""||port==null?80:port)};exports.get=function(url,params,headers){if(params===void 0){params={}}if(headers===void 0){headers={}}var _a=exports.splitUrl(url),host=_a[0],path=_a[1];return exports.createAgent(host).send(new request_1.Get(path,params,headers))}},{"./agent":1,"./agent/parser/json":2,"./agent/plugin/csrf":3,"./agent/transform/json":4,"./agent/transport/xhr":5,"./cookie/container/document":7,"./request":11}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocumentContainer=void 0;var record_1=require("@quenk/noni/lib/data/record");var __1=require("../");var DocumentContainer=function(){function DocumentContainer(store,cookies){if(store===void 0){store=document}if(cookies===void 0){cookies={}}this.store=store;this.cookies=cookies}DocumentContainer.create=function(store){if(store===void 0){store=document}return new DocumentContainer(store,__1.fromCookieHeader(store.cookie))};DocumentContainer.prototype.getCookies=function(){return record_1.make(this.cookies)};DocumentContainer.prototype.getCookie=function(name){return __1.getCookieByName(this.cookies,name)};DocumentContainer.prototype.setCookies=function(_){this.cookies=__1.fromCookieHeader(this.store.cookie);return this};return DocumentContainer}();exports.DocumentContainer=DocumentContainer},{"../":8,"@quenk/noni/lib/data/record":25}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toCookieHeader=exports.getCookieByName=exports.fromList=exports.fromCookieHeader=void 0;var record_1=require("@quenk/noni/lib/data/record");exports.fromCookieHeader=function(str){var rec=record_1.make();var cookies=str.split(";");var created=new Date;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];var cookieLength=cookie.length;var delimIdx=cookie.indexOf("=");delimIdx=delimIdx<0?cookieLength:delimIdx;var name_1=decodeURIComponent(cookie.substring(0,delimIdx).replace(/^\s+|\s+$/g,""));var value=decodeURIComponent(cookie.substring(delimIdx+1,cookieLength));var c={name:name_1,value:value,created:created};rec[getPath(c)]=c}return rec};exports.fromList=function(list){return list.reduce(function(p,c){var _a;return record_1.merge(p,(_a={},_a[getPath(c)]=c,_a))},{})};var getPath=function(c){return[c.name,c.domain,c.path].join(";;")};exports.getCookieByName=function(store,name){return record_1.pickValue(store,function(c){return c.name===name})};exports.toCookieHeader=function(store){return record_1.mapTo(store,function(c){return c.name+"="+c.value}).join("; ")}},{"@quenk/noni/lib/data/record":25}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.set=exports.fromString=void 0;exports.fromString=function(headers){if(!headers)return{};var result={};headers.trim().split("\n").forEach(function(row){var index=row.indexOf(":");var key=row.slice(0,index).toLowerCase().trim();var value=row.slice(index+1).trim();if(typeof result[key]==="undefined"){result[key]=value}else if(Array.isArray(result[key])){result[key].push(value)}else{result[key]=[result[key],value]}});return result};exports.set=function(xhr){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var i=args.length;if(args.length>0)while(i--)if(i!==0)Object.keys(args[i]).forEach(function(k){if(args[i][k]!=null)xhr.setRequestHeader(k,args[i][k])})}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ACCEPTS=exports.CONTENT_TYPE=void 0;exports.CONTENT_TYPE="Content-Type";exports.ACCEPTS="Accept"},{}],11:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Delete=exports.Patch=exports.Put=exports.Post=exports.Get=exports.Head=void 0;var method_1=require("./method");var Head=function(){function Head(path,params,headers,options){if(headers===void 0){headers={}}if(options===void 0){options={ttl:0,tags:{},context:{}}}this.path=path;this.params=params;this.headers=headers;this.options=options;this.method=method_1.Method.Head}return Head}();exports.Head=Head;var Get=function(_super){__extends(Get,_super);function Get(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.method=method_1.Method.Get;return _this}return Get}(Head);exports.Get=Get;var Post=function(){function Post(path,body,headers,options){if(headers===void 0){headers={}}if(options===void 0){options={ttl:0,tags:{},context:{}}}this.path=path;this.body=body;this.headers=headers;this.options=options;this.method=method_1.Method.Post}return Post}();exports.Post=Post;var Put=function(_super){__extends(Put,_super);function Put(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.method=method_1.Method.Put;return _this}return Put}(Post);exports.Put=Put;var Patch=function(_super){__extends(Patch,_super);function Patch(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.method=method_1.Method.Patch;return _this}return Patch}(Post);exports.Patch=Patch;var Delete=function(_super){__extends(Delete,_super);function Delete(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.method=method_1.Method.Delete;return _this}return Delete}(Post);exports.Delete=Delete},{"./method":12}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Method=void 0;var Method;(function(Method){Method["Head"]="HEAD";Method["Get"]="GET";Method["Put"]="PUT";Method["Post"]="POST";Method["Delete"]="DELETE";Method["Patch"]="PATCH"})(Method=exports.Method||(exports.Method={}))},{}],13:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.createResponse=exports.InternalServerError=exports.ServerError=exports.Conflict=exports.NotFound=exports.Forbidden=exports.Unauthorized=exports.BadRequest=exports.ClientError=exports.Created=exports.NoContent=exports.Accepted=exports.Ok=exports.Success=exports.GenericResponse=void 0;var status=require("./status");var GenericResponse=function(){function GenericResponse(code,body,headers,options){this.code=code;this.body=body;this.headers=headers;this.options=options}return GenericResponse}();exports.GenericResponse=GenericResponse;var Success=function(_super){__extends(Success,_super);function Success(){return _super!==null&&_super.apply(this,arguments)||this}return Success}(GenericResponse);exports.Success=Success;var Ok=function(_super){__extends(Ok,_super);function Ok(body,headers,options){var _this=_super.call(this,status.OK,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Ok}(Success);exports.Ok=Ok;var Accepted=function(_super){__extends(Accepted,_super);function Accepted(body,headers,options){var _this=_super.call(this,status.ACCEPTED,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Accepted}(Success);exports.Accepted=Accepted;var NoContent=function(_super){__extends(NoContent,_super);function NoContent(body,headers,options){var _this=_super.call(this,status.NO_CONTENT,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return NoContent}(Success);exports.NoContent=NoContent;var Created=function(_super){__extends(Created,_super);function Created(body,headers,options){var _this=_super.call(this,status.CREATED,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Created}(Success);exports.Created=Created;var ClientError=function(_super){__extends(ClientError,_super);function ClientError(){return _super!==null&&_super.apply(this,arguments)||this}return ClientError}(GenericResponse);exports.ClientError=ClientError;var BadRequest=function(_super){__extends(BadRequest,_super);function BadRequest(body,headers,options){var _this=_super.call(this,status.BAD_REQUEST,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return BadRequest}(ClientError);exports.BadRequest=BadRequest;var Unauthorized=function(_super){__extends(Unauthorized,_super);function Unauthorized(body,headers,options){var _this=_super.call(this,status.UNAUTHORIZED,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Unauthorized}(ClientError);exports.Unauthorized=Unauthorized;var Forbidden=function(_super){__extends(Forbidden,_super);function Forbidden(body,headers,options){var _this=_super.call(this,status.FORBIDDEN,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Forbidden}(ClientError);exports.Forbidden=Forbidden;var NotFound=function(_super){__extends(NotFound,_super);function NotFound(body,headers,options){var _this=_super.call(this,status.NOT_FOUND,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return NotFound}(ClientError);exports.NotFound=NotFound;var Conflict=function(_super){__extends(Conflict,_super);function Conflict(body,headers,options){var _this=_super.call(this,status.CONFLICT,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;return _this}return Conflict}(ClientError);exports.Conflict=Conflict;var ServerError=function(_super){__extends(ServerError,_super);function ServerError(){return _super!==null&&_super.apply(this,arguments)||this}return ServerError}(GenericResponse);exports.ServerError=ServerError;var InternalServerError=function(_super){__extends(InternalServerError,_super);function InternalServerError(body,headers,options){var _this=_super.call(this,status.INTERNAL_SERVER_ERROR,body,headers,options)||this;_this.body=body;_this.headers=headers;_this.options=options;_this.status=status.INTERNAL_SERVER_ERROR;return _this}return InternalServerError}(ServerError);exports.InternalServerError=InternalServerError;exports.createResponse=function(code,body,headers,options){switch(code){case status.OK:return new Ok(body,headers,options);case status.ACCEPTED:return new Accepted(body,headers,options);case status.NO_CONTENT:return new NoContent(body,headers,options);case status.CREATED:return new Created(body,headers,options);case status.BAD_REQUEST:return new BadRequest(body,headers,options);case status.BAD_REQUEST:return new BadRequest(body,headers,options);case status.UNAUTHORIZED:return new Unauthorized(body,headers,options);case status.FORBIDDEN:return new Forbidden(body,headers,options);case status.NOT_FOUND:return new NotFound(body,headers,options);case status.CONFLICT:return new Conflict(body,headers,options);case status.INTERNAL_SERVER_ERROR:return new InternalServerError(body,headers,options);default:if(code>=400&&code<=499)return new ClientError(code,body,headers,options);else if(code>=500)return new ServerError(code,body,headers,options);else return new GenericResponse(code,body,headers,options)}}},{"./status":14}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NETWORK_AUTHENTICATION_REQUIRED=exports.NOT_EXTENDED=exports.LOOP_DETECTED=exports.INSUFFICIENT_STORAGE=exports.VARIANT_ALSO_NEGOTIATES=exports.HTTP_VERSION_NOT_SUPPORTED=exports.GATEWAY_TIMEOUT=exports.SERVICE_UNAVAILABLE=exports.BAD_GATEWAY=exports.NOT_IMPLEMENTED=exports.INTERNAL_SERVER_ERROR=exports.UNAVAILABLE_FOR_LEGAL_RREASONS=exports.REQUEST_HEADER_FIELDS_TOO_LARGE=exports.TOO_MANY_REQUESTS=exports.PRECONDITION_REQUIRED=exports.UPGRADE_REQUIRED=exports.FAILED_DEPENDENCY=exports.LOCKED=exports.UNPROCESSABLE_ENTITY=exports.TEAPOT=exports.EXPECTATION_FAILED=exports.REQUESTED_RANGE_NOT_SATISFIABLE=exports.UNSUPPORTED_MEDIA_TYPE=exports.REQUEST_URI_TOO_LONG=exports.REQUEST_ENTITY_TOO_LARGE=exports.PRECONDITION_FAILED=exports.LENGTH_REQUIRED=exports.GONE=exports.CONFLICT=exports.REQUEST_TIMEOUT=exports.PROXY_AUTH_REQUIRED=exports.NOT_ACCEPTABLE=exports.METHOD_NOT_ALLOWED=exports.NOT_FOUND=exports.FORBIDDEN=exports.PAYMENT_REQUIRED=exports.UNAUTHORIZED=exports.BAD_REQUEST=exports.PERMANENT_REDIRECT=exports.TEMPORARY_REDIRECT=exports.USE_PROXY=exports.NOT_MODIFIED=exports.SEE_OTHER=exports.FOUND=exports.MOVED_PERMANENTLY=exports.MULTIPLE_CHOICES=exports.IM_USED=exports.ALREADY_REPORTED=exports.MULTI_STATUS=exports.PARTIAL_CONTENT=exports.RESET_CONTENT=exports.NO_CONTENT=exports.NON_AUTHORITATIV_INFO=exports.ACCEPTED=exports.CREATED=exports.OK=exports.PROCESSING=exports.SWITCHING_PROTOCOLS=exports.CONTINUE=void 0;exports.CONTINUE=100;exports.SWITCHING_PROTOCOLS=101;exports.PROCESSING=102;exports.OK=200;exports.CREATED=201;exports.ACCEPTED=202;exports.NON_AUTHORITATIV_INFO=203;exports.NO_CONTENT=204;exports.RESET_CONTENT=205;exports.PARTIAL_CONTENT=206;exports.MULTI_STATUS=207;exports.ALREADY_REPORTED=208;exports.IM_USED=226;exports.MULTIPLE_CHOICES=300;exports.MOVED_PERMANENTLY=301;exports.FOUND=302;exports.SEE_OTHER=303;exports.NOT_MODIFIED=304;exports.USE_PROXY=305;exports.TEMPORARY_REDIRECT=307;exports.PERMANENT_REDIRECT=308;exports.BAD_REQUEST=400;exports.UNAUTHORIZED=401;exports.PAYMENT_REQUIRED=402;exports.FORBIDDEN=403;exports.NOT_FOUND=404;exports.METHOD_NOT_ALLOWED=405;exports.NOT_ACCEPTABLE=406;exports.PROXY_AUTH_REQUIRED=407;exports.REQUEST_TIMEOUT=408;exports.CONFLICT=409;exports.GONE=410;exports.LENGTH_REQUIRED=411;exports.PRECONDITION_FAILED=412;exports.REQUEST_ENTITY_TOO_LARGE=413;exports.REQUEST_URI_TOO_LONG=414;exports.UNSUPPORTED_MEDIA_TYPE=415;exports.REQUESTED_RANGE_NOT_SATISFIABLE=416;exports.EXPECTATION_FAILED=417;exports.TEAPOT=418;exports.UNPROCESSABLE_ENTITY=422;exports.LOCKED=423;exports.FAILED_DEPENDENCY=424;exports.UPGRADE_REQUIRED=426;exports.PRECONDITION_REQUIRED=428;exports.TOO_MANY_REQUESTS=429;exports.REQUEST_HEADER_FIELDS_TOO_LARGE=431;exports.UNAVAILABLE_FOR_LEGAL_RREASONS=451;exports.INTERNAL_SERVER_ERROR=500;exports.NOT_IMPLEMENTED=501;exports.BAD_GATEWAY=502;exports.SERVICE_UNAVAILABLE=503;exports.GATEWAY_TIMEOUT=504;exports.HTTP_VERSION_NOT_SUPPORTED=505;exports.VARIANT_ALSO_NEGOTIATES=506;exports.INSUFFICIENT_STORAGE=507;exports.LOOP_DETECTED=508;exports.NOT_EXTENDED=510;exports.NETWORK_AUTHENTICATION_REQUIRED=511},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.urlFromString=exports.isBlob=exports.isFormData=exports.isFile=exports.isObject=void 0;var qs_1=require("./qs");exports.isObject=function(obj){return typeof obj==="object"};exports.isFile=function(obj){return toString.call(obj)==="[object File]"};exports.isFormData=function(obj){return toString.call(obj)==="[object FormData]"};exports.isBlob=function(obj){return toString.call(obj)==="[object Blob]"};exports.urlFromString=function(url,params){if(params===void 0){params={}}return url+"?"+qs_1.stringify(params)}},{"./qs":16}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stringify=exports.formats=void 0;var record_1=require("@quenk/noni/lib/data/record");var percentTwenties=/%20/g;var Format={RFC1738:"RFC1738",RFC3986:"RFC3986"};exports.formats=record_1.assign({default:Format.RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:String}},Format);var arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},comma:"comma",indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}};var has=Object.prototype.hasOwnProperty;var replace=String.prototype.replace;var isArray=Array.isArray;var push=Array.prototype.push;var pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])};var toISO=Date.prototype.toISOString;var defaultFormat=exports.formats["default"];var hexTable=function(){var array=[];for(var i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}();var utilsEncode=function(str,_,charset){if(str.length===0){return str}var string=str;if(typeof str==="symbol"){string=Symbol.prototype.toString.call(str)}else if(typeof str!=="string"){string=String(str)}if(charset==="iso-8859-1"){return escape(string).replace(/%u[0-9a-f]{4}/gi,function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"})}var out="";for(var i=0;i<string.length;++i){var c=string.charCodeAt(i);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){out+=string.charAt(i);continue}if(c<128){out=out+hexTable[c];continue}if(c<2048){out=out+(hexTable[192|c>>6]+hexTable[128|c&63]);continue}if(c<55296||c>=57344){out=out+(hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|c&63]);continue}i+=1;c=65536+((c&1023)<<10|string.charCodeAt(i)&1023);out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|c&63]}return out};var utilsMaybeMap=function(val,fn){if(isArray(val)){var mapped=[];for(var i=0;i<val.length;i+=1){mapped.push(fn(val[i]))}return mapped}return fn(val)};var utilsIsBuffer=function(obj){if(!obj||typeof obj!=="object"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))};var isNonNullishPrimitive=function(v){return typeof v==="string"||typeof v==="number"||typeof v==="boolean"||typeof v==="symbol"||typeof v==="bigint"};var defaults={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:utilsEncode,encodeValuesOnly:false,format:defaultFormat,formatter:exports.formats.formatters[defaultFormat],indices:false,serializeDate:function(date){return toISO.call(date)},skipNulls:false,strictNullHandling:false};function doStringify(target,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=target;if(typeof filter==="function"){obj=filter(prefix,obj)}else if(obj instanceof Date){obj=serializeDate(obj)}else if(generateArrayPrefix==="comma"&&isArray(obj)){obj=utilsMaybeMap(obj,function(value){if(value instanceof Date){return new String(serializeDate(value))}return value})}if(obj===null){if(strictNullHandling){return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key"):prefix}obj=""}if(isNonNullishPrimitive(obj)||utilsIsBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key");return[formatter(keyValue)+"="+formatter(encoder(obj,defaults.encoder,charset,"value"))]}return[formatter(prefix)+"="+formatter(String(obj))]}var values=[];if(typeof obj==="undefined"){return values}var objKeys;if(generateArrayPrefix==="comma"&&isArray(obj)){objKeys=[{value:obj.length>0?obj.join(",")||null:undefined}]}else if(isArray(filter)){objKeys=filter}else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];var value=typeof key==="object"&&key.value!==undefined?key.value:obj[key];if(skipNulls&&value===null){continue}var keyPrefix=isArray(obj)?typeof generateArrayPrefix==="function"?generateArrayPrefix(prefix,key):prefix:prefix+(allowDots?"."+key:"["+key+"]");pushToArray(values,doStringify(value,keyPrefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset))}return values}var normalizeStringifyOptions=function(opts){if(!opts){return defaults}if(opts.encoder!==null&&opts.encoder!==undefined&&typeof opts.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var charset=opts.charset||defaults.charset;if(typeof opts.charset!=="undefined"&&opts.charset!=="utf-8"&&opts.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8,"+" iso-8859-1, or undefined")}var format=exports.formats["default"];if(typeof opts.format!=="undefined"){if(!has.call(exports.formats.formatters,opts.format)){throw new TypeError("Unknown format option provided.")}format=opts.format}var formatter=exports.formats.formatters[format];var filter;if(typeof opts.filter==="function"||isArray(opts.filter)){filter=opts.filter}return{addQueryPrefix:typeof opts.addQueryPrefix==="boolean"?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:typeof opts.allowDots==="undefined"?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:typeof opts.charsetSentinel==="boolean"?opts.charsetSentinel:defaults.charsetSentinel,delimiter:typeof opts.delimiter==="undefined"?defaults.delimiter:opts.delimiter,encode:typeof opts.encode==="boolean"?opts.encode:defaults.encode,encoder:typeof opts.encoder==="function"?opts.encoder:defaults.encoder,encodeValuesOnly:typeof opts.encodeValuesOnly==="boolean"?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,formatter:formatter,serializeDate:typeof opts.serializeDate==="function"?opts.serializeDate:defaults.serializeDate,skipNulls:typeof opts.skipNulls==="boolean"?opts.skipNulls:defaults.skipNulls,sort:typeof opts.sort==="function"?opts.sort:undefined,strictNullHandling:typeof opts.strictNullHandling==="boolean"?opts.strictNullHandling:defaults.strictNullHandling}};function stringify(target,opts){if(opts===void 0){opts={}}var obj=target;var options=normalizeStringifyOptions(opts);var objKeys;var filter;if(typeof options.filter==="function"){filter=options.filter;obj=filter("",obj)}else if(isArray(options.filter)){filter=options.filter;objKeys=filter}var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(opts&&opts.arrayFormat&&opts.arrayFormat in arrayPrefixGenerators){arrayFormat=opts.arrayFormat}else if(opts&&"indices"in opts){arrayFormat=opts.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj)}if(options.sort){objKeys.sort(options.sort)}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(options.skipNulls&&obj[key]===null){continue}pushToArray(keys,doStringify(obj[key],key,generateArrayPrefix,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:undefined,options.filter,options.sort,options.allowDots,options.serializeDate,options.formatter,options.encodeValuesOnly,options.charset))}var joined=keys.join(options.delimiter);var prefix=options.addQueryPrefix===true?"?":"";if(options.charsetSentinel){if(options.charset==="iso-8859-1"){prefix+="utf8=%26%2310003%3B&"}else{prefix+="utf8=%E2%9C%93&"}}return joined.length>0?prefix+joined:""}exports.stringify=stringify},{"@quenk/noni/lib/data/record":25}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.attempt=exports.raise=exports.convert=void 0;var either_1=require("../data/either");var convert=function(e){return e instanceof Error?e:new Error(e.message)};exports.convert=convert;var raise=function(e){if(e instanceof Error){throw e}else{throw new Error(e.message)}};exports.raise=raise;var attempt=function(f){try{return either_1.right(f())}catch(e){return either_1.left(e)}};exports.attempt=attempt},{"../data/either":22}],18:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.doFuture=exports.liftP=exports.fromExcept=exports.toPromise=exports.race=exports.reduce=exports.sequential=exports.parallel=exports.batch=exports.fromCallback=exports.fromAbortable=exports.wait=exports.delay=exports.attempt=exports.raise=exports.pure=exports.Compute=exports.Run=exports.Raise=exports.Trap=exports.Finally=exports.Catch=exports.Step=exports.Bind=exports.Pure=exports.Future=void 0;var function_1=require("../../data/function");var timer_1=require("../timer");var error_1=require("../error");var _1=require("./");var Future=function(){function Future(){}Future.prototype.of=function(a){return new Pure(a)};Future.prototype.map=function(f){return new Bind(this,function(value){return new Pure(f(value))})};Future.prototype.ap=function(ft){return new Bind(this,function(value){return ft.map(function(f){return f(value)})})};Future.prototype.chain=function(f){return new Bind(this,f)};Future.prototype.catch=function(f){return new Catch(this,f)};Future.prototype.finally=function(f){return new Finally(this,f)};Future.prototype.fork=function(onError,onSuccess){if(onError===void 0){onError=function_1.noop}if(onSuccess===void 0){onSuccess=function_1.noop}return new Compute(undefined,onError,onSuccess,[this]).run()};Future.prototype.__trap=function(_,__){return false};return Future}();exports.Future=Future;var Pure=function(_super){__extends(Pure,_super);function Pure(value){var _this=_super.call(this)||this;_this.value=value;return _this}Pure.prototype.map=function(f){return new Pure(f(this.value))};Pure.prototype.ap=function(ft){var _this=this;return ft.map(function(f){return f(_this.value)})};Pure.prototype.__exec=function(c){c.value=this.value;timer_1.tick(function(){return c.run()});return false};return Pure}(Future);exports.Pure=Pure;var Bind=function(_super){__extends(Bind,_super);function Bind(future,func){var _this=_super.call(this)||this;_this.future=future;_this.func=func;return _this}Bind.prototype.__exec=function(c){c.stack.push(new Step(this.func));c.stack.push(this.future);return true};return Bind}(Future);exports.Bind=Bind;var Step=function(_super){__extends(Step,_super);function Step(value){var _this=_super.call(this)||this;_this.value=value;return _this}Step.prototype.__exec=function(c){c.stack.push(this.value(c.value));return true};return Step}(Future);exports.Step=Step;var Catch=function(_super){__extends(Catch,_super);function Catch(future,func){var _this=_super.call(this)||this;_this.future=future;_this.func=func;return _this}Catch.prototype.__exec=function(c){c.stack.push(new Trap(this.func));c.stack.push(this.future);return true};return Catch}(Future);exports.Catch=Catch;var Finally=function(_super){__extends(Finally,_super);function Finally(future,func){var _this=_super.call(this)||this;_this.future=future;_this.func=func;return _this}Finally.prototype.__exec=function(c){c.stack.push(new Trap(this.func));c.stack.push(new Step(this.func));c.stack.push(this.future);return true};return Finally}(Future);exports.Finally=Finally;var Trap=function(_super){__extends(Trap,_super);function Trap(func){var _this=_super.call(this)||this;_this.func=func;return _this}Trap.prototype.__exec=function(_){return true};Trap.prototype.__trap=function(e,c){c.stack.push(this.func(e));return true};return Trap}(Future);exports.Trap=Trap;var Raise=function(_super){__extends(Raise,_super);function Raise(value){var _this=_super.call(this)||this;_this.value=value;return _this}Raise.prototype.map=function(_){return new Raise(this.value)};Raise.prototype.ap=function(_){return new Raise(this.value)};Raise.prototype.chain=function(_){return new Raise(this.value)};Raise.prototype.__exec=function(c){var finished=false;var e=error_1.convert(this.value);while(!finished){if(c.stack.length===0){c.exitError(e);return false}else{finished=c.stack.pop().__trap(e,c)}}return finished};return Raise}(Future);exports.Raise=Raise;var Run=function(_super){__extends(Run,_super);function Run(value){var _this=_super.call(this)||this;_this.value=value;return _this}Run.prototype.__exec=function(c){c.running=true;c.canceller=this.value(c);return false};return Run}(Future);exports.Run=Run;var Compute=function(){function Compute(value,exitError,exitSuccess,stack){this.value=value;this.exitError=exitError;this.exitSuccess=exitSuccess;this.stack=stack;this.canceller=function_1.noop;this.running=false}Compute.prototype.onError=function(e){if(this.running===false)return;this.stack.push(new Raise(e));this.running=false;this.run()};Compute.prototype.onSuccess=function(value){if(this.running===false)return;this.value=value;this.running=false;this.run()};Compute.prototype.abort=function(){this.stack=[];this.exitError=function_1.noop;this.exitSuccess=function_1.noop;this.running=false;this.canceller();this.canceller=function_1.noop};Compute.prototype.run=function(){while(this.stack.length>0){var next=this.stack.pop();if(next==null||typeof next.__exec!=="function"){try{throw new Error('Invalid Compute stack member: "'+next+'"!')}catch(e){this.onError(e);return this}}if(!next.__exec(this))return this}this.running=false;this.exitSuccess(this.value);return this};return Compute}();exports.Compute=Compute;var pure=function(a){return new Pure(a)};exports.pure=pure;var raise=function(e){return new Raise(e)};exports.raise=raise;var attempt=function(f){return new Run(function(s){timer_1.tick(function(){try{s.onSuccess(f())}catch(e){s.onError(e)}});return function_1.noop})};exports.attempt=attempt;var delay=function(f,n){if(n===void 0){n=0}return new Run(function(s){setTimeout(function(){try{s.onSuccess(f())}catch(e){s.onError(e)}},n);return function_1.noop})};exports.delay=delay;var wait=function(n){return new Run(function(s){setTimeout(function(){s.onSuccess(undefined)},n);return function_1.noop})};exports.wait=wait;var fromAbortable=function(abort){return function(f){return new Run(function(s){f(function(err,a){return err!=null?s.onError(err):s.onSuccess(a)});return abort})}};exports.fromAbortable=fromAbortable;var fromCallback=function(f){return exports.fromAbortable(function_1.noop)(f)};exports.fromCallback=fromCallback;var Tag=function(){function Tag(index,value){this.index=index;this.value=value}return Tag}();var batch=function(list){return exports.sequential(list.map(function(w){return exports.parallel(w)}))};exports.batch=batch;var parallel=function(list){return new Run(function(s){var done=[];var failed=false;var comps=[];var reconcile=function(){return done.sort(indexCmp).map(function(t){return t.value})};var indexCmp=function(a,b){return a.index-b.index};var onErr=function(e){abortAll();s.onError(e)};var onSucc=function(t){if(!failed){done.push(t);if(done.length===list.length)s.onSuccess(reconcile())}};var abortAll=function(){comps.map(function(c){return c.abort()});failed=true};comps.push.apply(comps,list.map(function(f,i){return f.map(function(value){return new Tag(i,value)}).fork(onErr,onSucc)}));if(comps.length===0)s.onSuccess([]);return function(){return abortAll()}})};exports.parallel=parallel;var sequential=function(list){return new Run(function(s){var i=0;var r=[];var onErr=function(e){return s.onError(e)};var onSuccess=function(a){r.push(a);next()};var abort;var next=function(){if(i<list.length)abort=list[i].fork(onErr,onSuccess);else s.onSuccess(r);i++};next();return function(){if(abort)abort.abort()}})};exports.sequential=sequential;var reduce=function(list,init,f){return new Run(function(s){var i=0;var onErr=function(e){return s.onError(e)};var onSuccess=function(a){init=f(init,a,i);next(init)};var abort;var next=function(value){if(i<list.length)abort=list[i].fork(onErr,onSuccess);else s.onSuccess(value);i++};next(init);return function(){if(abort)abort.abort()}})};exports.reduce=reduce;var race=function(list){return new Run(function(s){var comps=[];var finished=false;var abortAll=function(){finished=true;comps.map(function(c){return c.abort()})};var onErr=function(e){abortAll();s.onError(e)};var onSucc=function(t){if(!finished){finished=true;comps.map(function(c,i){return i!==t.index?c.abort():undefined});s.onSuccess(t.value)}};comps.push.apply(comps,list.map(function(f,i){return f.map(function(value){return new Tag(i,value)}).fork(onErr,onSucc)}));if(comps.length===0)s.onError(new Error("race(): Cannot race an empty list!"));return function(){return abortAll()}})};exports.race=race;var toPromise=function(ft){return new Promise(function(yes,no){return ft.fork(no,yes)})};exports.toPromise=toPromise;var fromExcept=function(e){return e.fold(function(e){return exports.raise(e)},function(a){return exports.pure(a)})};exports.fromExcept=fromExcept;var liftP=function(f){return new Run(function(s){f().then(function(a){return s.onSuccess(a)}).catch(function(e){return s.onError(e)});return function_1.noop})};exports.liftP=liftP;var doFuture=function(f){return _1.doN(f)};exports.doFuture=doFuture},{"../../data/function":23,"../error":17,"../timer":20,"./":19}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.doMonad=exports.doN=exports.pipeN=exports.pipe=exports.compose=exports.join=void 0;var join=function(outer){return outer.chain(function(x){return x})};exports.join=join;var compose=function(g,f){return exports.pipe(f,g)};exports.compose=compose;var pipe=function(f,g){return function(value){return f(value).chain(function(b){return g(b)})}};exports.pipe=pipe;var pipeN=function(f){var list=[];for(var _i=1;_i<arguments.length;_i++){list[_i-1]=arguments[_i]}return function(value){return list.reduce(function(p,c){return p.chain(function(v){return c(v)})},f(value))}};exports.pipeN=pipeN;var doN=function(f){var gen=f();var next=function(val){var r=gen.next(val);if(r.done)return r.value;else return r.value.chain(next)};return next()};exports.doN=doN;exports.doMonad=exports.doN},{}],20:[function(require,module,exports){(function(process){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.throttle=exports.debounce=exports.tick=void 0;var tick=function(f){return typeof window=="undefined"?setTimeout(f,0):process.nextTick(f)};exports.tick=tick;var debounce=function(f,delay){var id=-1;return function(a){if(id===-1){id=setTimeout(function(){return f(a)},delay)}else{clearTimeout(id);id=setTimeout(function(){return f(a)},delay)}}};exports.debounce=debounce;var throttle=function(f,duration){var wait=false;return function(a){if(wait===false){f(a);wait=true;setTimeout(function(){return wait=false},duration)}}};exports.throttle=throttle}).call(this)}).call(this,require("_process"))},{_process:152}],21:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});exports.compact=exports.flatten=exports.combine=exports.make=exports.removeAt=exports.remove=exports.dedupe=exports.distribute=exports.group=exports.partition=exports.concat=exports.flatMap=exports.map=exports.contains=exports.empty=exports.tail=exports.head=void 0;var record_1=require("../record");var math_1=require("../../math");var head=function(list){return list[0]};exports.head=head;var tail=function(list){return list[list.length-1]};exports.tail=tail;var empty=function(list){return list.length===0};exports.empty=empty;var contains=function(list,a){return list.indexOf(a)>-1};exports.contains=contains;var map=function(list){return function(f){return list.map(f)}};exports.map=map;var flatMap=function(list,f){return list.reduce(function(p,c,i){return p.concat(f(c,i,list))},[])};exports.flatMap=flatMap;var concat=function(list,a){return __spreadArrays(list,[a])};exports.concat=concat;var partition=function(list,f){return exports.empty(list)?[[],[]]:list.reduce(function(_a,c,i){var yes=_a[0],no=_a[1];return f(c,i,list)?[exports.concat(yes,c),no]:[yes,exports.concat(no,c)]},[[],[]])};exports.partition=partition;var group=function(list,f){return list.reduce(function(p,c,i){var _a;var g=f(c,i,list);return record_1.merge(p,(_a={},_a[g]=Array.isArray(p[g])?exports.concat(p[g],c):[c],_a))},{})};exports.group=group;var distribute=function(list,size){var r=list.reduce(function(p,c,i){return math_1.isMultipleOf(size,i+1)?[exports.concat(p[0],exports.concat(p[1],c)),[]]:[p[0],exports.concat(p[1],c)]},[[],[]]);return r[1].length===0?r[0]:exports.concat(r[0],r[1])};exports.distribute=distribute;var dedupe=function(list){return list.filter(function(e,i,l){return l.indexOf(e)===i})};exports.dedupe=dedupe;var remove=function(list,target){var idx=list.indexOf(target);if(idx===-1){return list.slice()}else{var a=list.slice();a.splice(idx,1);return a}};exports.remove=remove;var removeAt=function(list,idx){if(list.length>idx&&idx>-1){var a=list.slice();a.splice(idx,1);return a}else{return list.slice()}};exports.removeAt=removeAt;var make=function(size,f){var a=new Array(size);for(var i=0;i<size;i++)a[i]=f(i);return a};exports.make=make;var combine=function(list){return list.reduce(function(p,c){return p.concat(c)},[])};exports.combine=combine;var flatten=function(list){return list.reduce(function(p,c){return p.concat(Array.isArray(c)?exports.flatten(c):c)},[])};exports.flatten=flatten;var compact=function(list){return list.filter(function(v){return v!=null})};exports.compact=compact},{"../../math":29,"../record":25}],22:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.either=exports.fromBoolean=exports.right=exports.left=exports.Right=exports.Left=exports.Either=void 0;var maybe_1=require("./maybe");var Either=function(){function Either(){}Either.prototype.of=function(value){return new Right(value)};return Either}();exports.Either=Either;var Left=function(_super){__extends(Left,_super);function Left(value){var _this=_super.call(this)||this;_this.value=value;return _this}Left.prototype.map=function(_){return new Left(this.value)};Left.prototype.lmap=function(f){return new Left(f(this.value))};Left.prototype.bimap=function(f,_){return new Left(f(this.value))};Left.prototype.alt=function(a){return a};Left.prototype.chain=function(_){return new Left(this.value)};Left.prototype.ap=function(_){return new Left(this.value)};Left.prototype.extend=function(_){return new Left(this.value)};Left.prototype.fold=function(f,_){return f(this.value)};Left.prototype.eq=function(m){return m instanceof Left&&m.value===this.value};Left.prototype.orElse=function(f){return f(this.value)};Left.prototype.orRight=function(f){return new Right(f(this.value))};Left.prototype.isLeft=function(){return true};Left.prototype.isRight=function(){return false};Left.prototype.takeLeft=function(){return this.value};Left.prototype.takeRight=function(){throw new TypeError("Not right!")};Left.prototype.toMaybe=function(){return maybe_1.nothing()};return Left}(Either);exports.Left=Left;var Right=function(_super){__extends(Right,_super);function Right(value){var _this=_super.call(this)||this;_this.value=value;return _this}Right.prototype.map=function(f){return new Right(f(this.value))};Right.prototype.lmap=function(_){return new Right(this.value)};Right.prototype.bimap=function(_,g){return new Right(g(this.value))};Right.prototype.alt=function(_){return this};Right.prototype.chain=function(f){return f(this.value)};Right.prototype.ap=function(e){var _this=this;return e.map(function(f){return f(_this.value)})};Right.prototype.extend=function(f){return new Right(f(this))};Right.prototype.eq=function(m){return m instanceof Right&&m.value===this.value};Right.prototype.fold=function(_,g){return g(this.value)};Right.prototype.orElse=function(_){return this};Right.prototype.orRight=function(_){return this};Right.prototype.isLeft=function(){return false};Right.prototype.isRight=function(){return true};Right.prototype.takeLeft=function(){throw new TypeError("Not left!")};Right.prototype.takeRight=function(){return this.value};Right.prototype.toMaybe=function(){return maybe_1.just(this.value)};return Right}(Either);exports.Right=Right;var left=function(a){return new Left(a)};exports.left=left;var right=function(b){return new Right(b)};exports.right=right;var fromBoolean=function(b){return b?exports.right(true):exports.left(false)};exports.fromBoolean=fromBoolean;var either=function(f){return function(g){return function(e){return e instanceof Right?g(e.takeRight()):f(e.takeLeft())}}};exports.either=either},{"./maybe":24}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noop=exports.curry5=exports.curry4=exports.curry3=exports.curry=exports.id=exports.identity=exports.flip=exports.cons=exports.compose5=exports.compose4=exports.compose3=exports.compose=void 0;var compose=function(f,g){return function(a){return g(f(a))}};exports.compose=compose;var compose3=function(f,g,h){return function(a){return h(g(f(a)))}};exports.compose3=compose3;var compose4=function(f,g,h,i){return function(a){return i(h(g(f(a))))}};exports.compose4=compose4;var compose5=function(f,g,h,i,j){return function(a){return j(i(h(g(f(a)))))}};exports.compose5=compose5;var cons=function(a){return function(_){return a}};exports.cons=cons;var flip=function(f){return function(b){return function(a){return f(a)(b)}}};exports.flip=flip;var identity=function(a){return a};exports.identity=identity;exports.id=exports.identity;var curry=function(f){return function(a){return function(b){return f(a,b)}}};exports.curry=curry;var curry3=function(f){return function(a){return function(b){return function(c){return f(a,b,c)}}}};exports.curry3=curry3;var curry4=function(f){return function(a){return function(b){return function(c){return function(d){return f(a,b,c,d)}}}}};exports.curry4=curry4;var curry5=function(f){return function(a){return function(b){return function(c){return function(d){return function(e){return f(a,b,c,d,e)}}}}}};exports.curry5=curry5;var noop=function(){};exports.noop=noop},{}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromNaN=exports.fromNumber=exports.fromBoolean=exports.fromString=exports.fromObject=exports.fromArray=exports.fromNullable=exports.just=exports.nothing=exports.of=exports.Just=exports.Nothing=void 0;var Nothing=function(){function Nothing(){}Nothing.prototype.map=function(_){return new Nothing};Nothing.prototype.ap=function(_){return new Nothing};Nothing.prototype.of=function(a){return new Just(a)};Nothing.prototype.chain=function(_){return new Nothing};Nothing.prototype.alt=function(a){return a};Nothing.prototype.empty=function(){return new Nothing};Nothing.prototype.extend=function(_){return new Nothing};Nothing.prototype.eq=function(m){return m instanceof Nothing};Nothing.prototype.orJust=function(f){return new Just(f())};Nothing.prototype.orElse=function(f){return f()};Nothing.prototype.isNothing=function(){return true};Nothing.prototype.isJust=function(){return false};Nothing.prototype.get=function(){throw new TypeError("Cannot get a value from Nothing!")};return Nothing}();exports.Nothing=Nothing;var Just=function(){function Just(value){this.value=value}Just.prototype.map=function(f){return new Just(f(this.value))};Just.prototype.ap=function(mb){var _this=this;return mb.map(function(f){return f(_this.value)})};Just.prototype.of=function(a){return new Just(a)};Just.prototype.chain=function(f){return f(this.value)};Just.prototype.alt=function(_){return this};Just.prototype.empty=function(){return new Nothing};Just.prototype.extend=function(f){return new Just(f(this))};Just.prototype.eq=function(m){return m instanceof Just&&m.value===this.value};Just.prototype.orJust=function(_){return this};Just.prototype.orElse=function(_){return this};Just.prototype.isNothing=function(){return false};Just.prototype.isJust=function(){return true};Just.prototype.get=function(){return this.value};return Just}();exports.Just=Just;var of=function(a){return new Just(a)};exports.of=of;var nothing=function(){return new Nothing};exports.nothing=nothing;var just=function(a){return new Just(a)};exports.just=just;var fromNullable=function(a){return a==null?new Nothing:new Just(a)};exports.fromNullable=fromNullable;var fromArray=function(a){return a.length===0?new Nothing:new Just(a)};exports.fromArray=fromArray;var fromObject=function(o){return Object.keys(o).length===0?new Nothing:new Just(o)};exports.fromObject=fromObject;var fromString=function(s){return s===""?new Nothing:new Just(s)};exports.fromString=fromString;var fromBoolean=function(b){return b===false?new Nothing:new Just(b)};exports.fromBoolean=fromBoolean;var fromNumber=function(n){return n===0?new Nothing:new Just(n)};exports.fromNumber=fromNumber;var fromNaN=function(n){return isNaN(n)?new Nothing:new Just(n)};exports.fromNaN=fromNaN},{}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pickValue=exports.pickKey=exports.make=exports.rcompact=exports.compact=exports.isBadKey=exports.set=exports.every=exports.some=exports.empty=exports.count=exports.clone=exports.hasKey=exports.values=exports.group=exports.partition=exports.exclude=exports.rmerge5=exports.rmerge4=exports.rmerge3=exports.rmerge=exports.merge5=exports.merge4=exports.merge3=exports.merge=exports.filter=exports.reduce=exports.forEach=exports.mapTo=exports.map=exports.keys=exports.isRecord=exports.assign=exports.badKeys=void 0;var array_1=require("../array");var type_1=require("../type");var maybe_1=require("../maybe");exports.badKeys=["__proto__"];function assign(target){var _varArgs=[];for(var _i=1;_i<arguments.length;_i++){_varArgs[_i-1]=arguments[_i]}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null)for(var nextKey in nextSource)if(Object.prototype.hasOwnProperty.call(nextSource,nextKey))exports.set(to,nextKey,nextSource[nextKey])}return to}exports.assign=assign;var isRecord=function(value){return typeof value==="object"&&value!=null&&!Array.isArray(value)&&!(value instanceof Date)&&!(value instanceof RegExp)};exports.isRecord=isRecord;var keys=function(obj){return Object.keys(obj)};exports.keys=keys;var map=function(rec,f){return exports.keys(rec).reduce(function(p,k){return exports.merge(p,exports.set({},k,f(rec[k],k,rec)))},{})};exports.map=map;var mapTo=function(rec,f){return exports.keys(rec).map(function(k){return f(rec[k],k,rec)})};exports.mapTo=mapTo;var forEach=function(rec,f){return exports.keys(rec).forEach(function(k){return f(rec[k],k,rec)})};exports.forEach=forEach;var reduce=function(rec,accum,f){return exports.keys(rec).reduce(function(p,k){return f(p,rec[k],k)},accum)};exports.reduce=reduce;var filter=function(rec,f){return exports.keys(rec).reduce(function(p,k){return f(rec[k],k,rec)?exports.merge(p,exports.set({},k,rec[k])):p},{})};exports.filter=filter;var merge=function(left,right){return assign({},left,right)};exports.merge=merge;var merge3=function(a,b,c){return assign({},a,b,c)};exports.merge3=merge3;var merge4=function(a,b,c,d){return assign({},a,b,c,d)};exports.merge4=merge4;var merge5=function(a,b,c,d,e){return assign({},a,b,c,d,e)};exports.merge5=merge5;var rmerge=function(left,right){return exports.reduce(right,left,deepMerge)};exports.rmerge=rmerge;var rmerge3=function(r,s,t){return[s,t].reduce(function(p,c){return exports.reduce(c,p,deepMerge)},r)};exports.rmerge3=rmerge3;var rmerge4=function(r,s,t,u){return[s,t,u].reduce(function(p,c){return exports.reduce(c,p,deepMerge)},r)};exports.rmerge4=rmerge4;var rmerge5=function(r,s,t,u,v){return[s,t,u,v].reduce(function(p,c){return exports.reduce(c,p,deepMerge)},r)};exports.rmerge5=rmerge5;var deepMerge=function(pre,curr,key){return exports.isRecord(curr)?exports.merge(pre,exports.set({},key,exports.isRecord(pre[key])?exports.rmerge(pre[key],curr):exports.merge({},curr))):exports.merge(pre,exports.set({},key,curr))};var exclude=function(rec,keys){var list=Array.isArray(keys)?keys:[keys];return exports.reduce(rec,{},function(p,c,k){return list.indexOf(k)>-1?p:exports.merge(p,exports.set({},k,c))})};exports.exclude=exclude;var partition=function(r,f){return exports.reduce(r,[{},{}],function(_a,c,k){var yes=_a[0],no=_a[1];return f(c,k,r)?[exports.merge(yes,exports.set({},k,c)),no]:[yes,exports.merge(no,exports.set({},k,c))]})};exports.partition=partition;var group=function(rec,f){return exports.reduce(rec,{},function(prev,curr,key){var category=f(curr,key,rec);var value=exports.isRecord(prev[category])?exports.merge(prev[category],exports.set({},key,curr)):exports.set({},key,curr);return exports.merge(prev,exports.set({},category,value))})};exports.group=group;var values=function(r){return exports.reduce(r,[],function(p,c){return array_1.concat(p,c)})};exports.values=values;var hasKey=function(r,key){return Object.hasOwnProperty.call(r,key)};exports.hasKey=hasKey;var clone=function(r){return exports.reduce(r,{},function(p,c,k){exports.set(p,k,_clone(c));return p})};exports.clone=clone;var _clone=function(a){if(type_1.isArray(a))return a.map(_clone);else if(exports.isRecord(a))return exports.clone(a);else return a};var count=function(r){return exports.keys(r).length};exports.count=count;var empty=function(r){return exports.count(r)===0};exports.empty=empty;var some=function(o,f){return exports.keys(o).some(function(k){return f(o[k],k,o)})};exports.some=some;var every=function(o,f){return exports.keys(o).every(function(k){return f(o[k],k,o)})};exports.every=every;var set=function(r,k,value){if(!exports.isBadKey(k))r[k]=value;return r};exports.set=set;var isBadKey=function(key){return exports.badKeys.indexOf(key)!==-1};exports.isBadKey=isBadKey;var compact=function(rec){var result={};for(var key in rec)if(rec.hasOwnProperty(key))if(rec[key]!=null)result=exports.set(result,key,rec[key]);return result};exports.compact=compact;var rcompact=function(rec){return exports.compact(exports.map(rec,function(val){return exports.isRecord(val)?exports.rcompact(val):val}))};exports.rcompact=rcompact;var make=function(init){if(init===void 0){init={}}var rec={};Object.defineProperty(rec,"__proto__",{configurable:false,enumerable:false,set:function(){}});for(var key in init)if(init.hasOwnProperty(key))rec[key]=init[key];return rec};exports.make=make;var pickKey=function(rec,test){return exports.reduce(rec,maybe_1.nothing(),function(p,c,k){return p.isJust()?p:test(c,k,rec)?maybe_1.just(k):p})};exports.pickKey=pickKey;var pickValue=function(rec,test){return exports.reduce(rec,maybe_1.nothing(),function(p,c,k){return p.isJust()?p:test(c,k,rec)?maybe_1.just(c):p})};exports.pickValue=pickValue},{"../array":21,"../maybe":24,"../type":28}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.project=exports.unflatten=exports.flatten=exports.unescapeRecord=exports.escapeRecord=exports.unescape=exports.escape=exports.set=exports.getString=exports.getDefault=exports.get=exports.unsafeGet=exports.tokenize=void 0;var maybe_1=require("../maybe");var _1=require("./");var TOKEN_DOT=".";var TOKEN_BRACKET_LEFT="[";var TOKEN_BRACKET_RIGHT="]";var TOKEN_ESCAPE="\\";var tokenize=function(str){var i=0;var buf="";var curr="";var next="";var tokens=[];while(i<str.length){curr=str[i];next=str[i+1];if(curr===TOKEN_ESCAPE){buf=""+buf+next;i++}else if(curr===TOKEN_DOT){if(buf!=="")tokens.push(buf);buf=""}else if(curr===TOKEN_BRACKET_LEFT&&next===TOKEN_BRACKET_RIGHT){i++}else if(curr===TOKEN_BRACKET_LEFT){var bracketBuf="";var firstDot=-1;var firstDotBuf="";i++;while(true){curr=str[i];next=str[i+1];if(curr===TOKEN_BRACKET_RIGHT&&next===TOKEN_BRACKET_RIGHT){bracketBuf=""+bracketBuf+TOKEN_BRACKET_RIGHT;i++}else if(curr===TOKEN_BRACKET_RIGHT){if(buf!=="")tokens.push(buf);tokens.push(bracketBuf);buf="";break}else if(curr==null){if(firstDot!==-1){i=firstDot;tokens.push(""+buf+TOKEN_BRACKET_LEFT+firstDotBuf);buf="";break}else{buf=""+buf+TOKEN_BRACKET_LEFT+bracketBuf;break}}if(curr===TOKEN_DOT&&firstDot===-1){firstDot=i;firstDotBuf=bracketBuf}bracketBuf=""+bracketBuf+curr;i++}}else{buf=""+buf+curr}i++}if(buf.length>0)tokens.push(buf);return tokens};exports.tokenize=tokenize;var unsafeGet=function(path,src){if(src==null)return undefined;var toks=exports.tokenize(path);var head=src[toks.shift()];return toks.reduce(function(p,c){return p==null?p:p[c]},head)};exports.unsafeGet=unsafeGet;var get=function(path,src){return maybe_1.fromNullable(exports.unsafeGet(path,src))};exports.get=get;var getDefault=function(path,src,def){return exports.get(path,src).orJust(function(){return def}).get()};exports.getDefault=getDefault;var getString=function(path,src){return exports.get(path,src).map(function(v){return String(v)}).orJust(function(){return""}).get()};exports.getString=getString;var set=function(p,v,r){var toks=exports.tokenize(p);return _set(r,v,toks)};exports.set=set;var _set=function(r,value,toks){var o;if(toks.length===0)return value;o=_1.isRecord(r)?_1.clone(r):{};o=_1.set(o,toks[0],_set(o[toks[0]],value,toks.slice(1)));return o};var escape=function(p){var i=0;var buf="";var curr="";while(i<p.length){curr=p[i];if(curr===TOKEN_ESCAPE||curr===TOKEN_DOT)buf=""+buf+TOKEN_ESCAPE+curr;else buf=""+buf+curr;i++}return buf};exports.escape=escape;var unescape=function(p){var i=0;var curr="";var next="";var buf="";while(i<p.length){curr=p[i];next=p[i+1];if(curr===TOKEN_ESCAPE){buf=""+buf+next;i++}else{buf=""+buf+curr}i++}return buf};exports.unescape=unescape;var escapeRecord=function(r){return _1.reduce(r,{},function(p,c,k){if(typeof c==="object")p=_1.set(p,exports.escape(k),exports.escapeRecord(c));else p=_1.set(p,exports.escape(k),c);return p})};exports.escapeRecord=escapeRecord;var unescapeRecord=function(r){return _1.reduce(r,{},function(p,c,k){if(_1.isRecord(c))p=_1.set(p,exports.unescape(k),exports.unescapeRecord(c));else p=_1.set(p,exports.unescape(k),c);return p})};exports.unescapeRecord=unescapeRecord;var flatten=function(r){return flatImpl("")({})(r)};exports.flatten=flatten;var flatImpl=function(pfix){return function(prev){return function(r){return _1.reduce(r,prev,function(p,c,k){return _1.isRecord(c)?flatImpl(prefix(pfix,k))(p)(c):_1.merge(p,_1.set({},prefix(pfix,k),c))})}}};var prefix=function(pfix,key){return pfix===""?exports.escape(key):pfix+"."+exports.escape(key)};var unflatten=function(r){return _1.reduce(r,{},function(p,c,k){return exports.set(k,c,p)})};exports.unflatten=unflatten;var project=function(spec,rec){return _1.reduce(spec,{},function(p,c,k){return c===true?exports.set(k,exports.unsafeGet(k,rec),p):p})};exports.project=project},{"../maybe":24,"./":25}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.alphanumeric=exports.numeric=exports.alpha=exports.interpolate=exports.uncapitalize=exports.capitalize=exports.propercase=exports.modulecase=exports.classcase=exports.camelcase=exports.contains=exports.endsWith=exports.startsWith=void 0;var path_1=require("../record/path");var record_1=require("../record");var startsWith=function(str,search,pos){if(pos===void 0){pos=0}return str.substr(!pos||pos<0?0:+pos,search.length)===search};exports.startsWith=startsWith;var endsWith=function(str,search,this_len){if(this_len===void 0){this_len=str.length}return this_len===undefined||this_len>str.length?this_len=str.length:str.substring(this_len-search.length,this_len)===search};exports.endsWith=endsWith;var contains=function(str,match){return str.indexOf(match)>-1};exports.contains=contains;var seperator=/([\\\/._-]|\s)+/g;var camelcase=function(str){var i=0;var curr="";var prev="";var buf="";while(true){if(i===str.length)return buf;curr=i===0?str[i].toLowerCase():str[i];if(curr.match(seperator)){prev="-"}else{buf=buf.concat(prev==="-"?curr.toUpperCase():curr.toLowerCase());prev=""}i++}};exports.camelcase=camelcase;var classcase=function(str){return str===""?"":str[0].toUpperCase().concat(exports.camelcase(str).slice(1))};exports.classcase=classcase;var modulecase=function(str){var i=0;var prev="";var curr="";var next="";var buf="";while(true){if(i===str.length)return buf;curr=str[i];next=str[i+1];if(curr.match(/[A-Z]/)&&i>0){if(prev!=="-")buf=buf.concat("-");prev=curr.toLowerCase();buf=buf.concat(prev)}else if(curr.match(seperator)){if(prev!=="-"&&next&&!seperator.test(next)){prev="-";buf=buf.concat(prev)}}else{prev=curr.toLowerCase();buf=buf.concat(prev)}i++}};exports.modulecase=modulecase;var propercase=function(str){return str.trim().toLowerCase().split(" ").map(function(tok){return tok.length>0?""+tok[0].toUpperCase()+tok.slice(1):tok}).join(" ")};exports.propercase=propercase;var capitalize=function(str){return str===""?"":""+str[0].toUpperCase()+str.slice(1)};exports.capitalize=capitalize;var uncapitalize=function(str){return str===""?"":""+str[0].toLowerCase()+str.slice(1)};exports.uncapitalize=uncapitalize;var interpolateDefaults={start:"{",end:"}",regex:"([\\w$.-]+)",leaveMissing:true,applyFunctions:false};var interpolate=function(str,data,opts){if(opts===void 0){opts={}}var options=record_1.assign({},interpolateDefaults,opts);var reg=new RegExp(""+options.start+options.regex+options.end,"g");return str.replace(reg,function(_,k){return path_1.get(k,data).map(function(v){if(typeof v==="function")return v(k);else return""+v}).orJust(function(){if(opts.leaveMissing)return k;else return""}).get()})};exports.interpolate=interpolate;var alpha=function(str){return str.replace(/[^a-zA-Z]/g,"")};exports.alpha=alpha;var numeric=function(str){return str.replace(/[^0-9]/g,"")};exports.numeric=numeric;var alphanumeric=function(str){return str.replace(/[\W]|[_]/g,"")};exports.alphanumeric=alphanumeric},{"../record":25,"../record/path":26}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toString=exports.show=exports.test=exports.is=exports.isPrim=exports.isFunction=exports.isBoolean=exports.isNumber=exports.isString=exports.isArray=exports.isObject=exports.Any=void 0;var prims=["string","number","boolean"];var Any=function(){function Any(){}return Any}();exports.Any=Any;var isObject=function(value){return typeof value==="object"&&!exports.isArray(value)};exports.isObject=isObject;exports.isArray=Array.isArray;var isString=function(value){return typeof value==="string"};exports.isString=isString;var isNumber=function(value){return typeof value==="number"&&!isNaN(value)};exports.isNumber=isNumber;var isBoolean=function(value){return typeof value==="boolean"};exports.isBoolean=isBoolean;var isFunction=function(value){return typeof value==="function"};exports.isFunction=isFunction;var isPrim=function(value){return!(exports.isObject(value)||exports.isArray(value)||exports.isFunction(value))};exports.isPrim=isPrim;var is=function(expected){return function(value){return typeof value===expected}};exports.is=is;var test=function(value,t){if(prims.indexOf(typeof t)>-1&&value===t)return true;else if(typeof t==="function"&&(t===String&&typeof value==="string"||t===Number&&typeof value==="number"||t===Boolean&&typeof value==="boolean"||t===Array&&Array.isArray(value)||t===Any||value instanceof t))return true;else if(t instanceof RegExp&&(typeof value==="string"&&t.test(value)))return true;else if(typeof t==="object"&&typeof value==="object")return Object.keys(t).every(function(k){return Object.hasOwnProperty.call(value,k)?exports.test(value[k],t[k]):false});return false};exports.test=test;var show=function(value){if(typeof value==="object"){if(Array.isArray(value))return"["+value.map(exports.show)+"];";else if(value.constructor!==Object)return value.constructor.name||value.constructor;else return JSON.stringify(value)}else{return""+value}};exports.show=show;var toString=function(val){return val==null?"":String(val)};exports.toString=toString},{}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.round=exports.isMultipleOf=void 0;var isMultipleOf=function(x,y){return y%x===0};exports.isMultipleOf=isMultipleOf;var round=function(x,n){if(n===void 0){n=0}var exp=Math.pow(10,n);var sign=x>=0?1:-1;var offset=n>0?1/Math.pow(10,n+1):0;return sign*(Math.round(Math.abs(x)*exp+offset)/exp)};exports.round=round},{}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var property_seek_1=require("property-seek");var defaults={start:"{",end:"}",regex:"([\\w$.-]+)",leaveMissing:true,applyFunctions:false};var maybe=function(v,k,opts){return typeof v==="function"?opts.applyFunctions?v(k):v:v!=null?v:opts.leaveMissing?""+opts.start+k+opts.end:v};exports.polate=function(str,data,opts){if(opts===void 0){opts={}}var options=Object.assign({},defaults,opts);return str.replace(new RegExp(""+options.start+options.regex+options.end,"g"),function(_,k){return maybe(property_seek_1.default(k,data),k,options)})};exports.default=exports.polate},{"property-seek":153}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tuple=exports.map=exports.filter=exports.range=exports.min=exports.max=exports.notEmpty=exports.isArray=void 0;var either_1=require("@quenk/noni/lib/data/either");var record_1=require("@quenk/noni/lib/data/record");var array_1=require("./result/failure/array");var result_1=require("./result");exports.isArray=function(a){return Array.isArray(a)?result_1.succeed(a):result_1.fail("isArray",a)};exports.notEmpty=function(value){return value.length===0?result_1.fail("notEmpty",value,{value:value}):result_1.succeed(value)};exports.max=function(target){return function(value){return value.length>target?result_1.fail("max",value,{target:target,value:value}):result_1.succeed(value)}};exports.min=function(target){return function(value){return value.length<target?result_1.fail("min",value,{target:target,value:value}):result_1.succeed(value)}};exports.range=function(min,max){return function(value){return value.length<min?result_1.fail("range.min",value,{min:min,max:max,value:value}):value.length>max?result_1.fail("range.max",value):result_1.succeed(value)}};exports.filter=function(p){return function(value){return result_1.succeed(value.map(p).filter(function(e){return e instanceof either_1.Right}).map(function(e){return e.takeRight()}))}};exports.map=function(p){return function(value){return review(value,value.reduce(mapReduce(p),reports()))}};var review=function(value,r){return Object.keys(r.failures).length>0?either_1.left(array_1.ArrayFailure.create(r.failures,value,{value:value})):result_1.succeed(r.values)};var mapReduce=function(p){return function(reports,a,k){return p(a).fold(onFailure(k,reports),onSuccess(reports))}};var reports=function(){return{failures:{},values:[]}};var onFailure=function(key,_a){var failures=_a.failures,values=_a.values;return function(f){var _a;return{values:values,failures:record_1.merge(failures,(_a={},_a[key]=f,_a))}}};var onSuccess=function(_a){var failures=_a.failures,values=_a.values;return function(b){return{failures:failures,values:values.concat(b)}}};exports.tuple=function(list){return function(value){if(value.length!==list.length)return result_1.fail("tuple",value);var results=value.map(function(v,idx){return list[idx](v)});var fails=results.filter(function(v){return v.isLeft()}).map(function(e){return e.takeLeft()});if(fails.length>0){var failMap=fails.reduce(function(p,c,k){p[k]=c;return p},{});return either_1.left(array_1.ArrayFailure.create(failMap,value,{value:value}))}return result_1.succeed(results.map(function(e){return e.takeRight()}))}}},{"./result":38,"./result/failure/array":35,"@quenk/noni/lib/data/either":22,"@quenk/noni/lib/data/record":25}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toBoolean=exports.isBoolean=void 0;var result_1=require("./result");exports.isBoolean=function(n){return typeof n==="boolean"?result_1.succeed(n):result_1.fail("isBoolean",n)};exports.toBoolean=function(value){return value==null||value===false?result_1.succeed(false):result_1.succeed(true)}},{"./result":38}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.log=exports.caseOf=exports.match=exports.isin=exports.exists=exports.every=exports.and=exports.or=exports.reject=exports.discard=exports.identity=exports.optional=exports.notNull=exports.neq=exports.eq=exports.whenFalse=exports.whenTrue=exports.when=exports.constant=void 0;var either_1=require("@quenk/noni/lib/data/either");var type_1=require("@quenk/noni/lib/data/type");var result_1=require("./result");var failure_1=require("./result/failure");exports.constant=function(b){return function(_){return result_1.succeed(b)}};exports.when=function(test,applied,otherwise){return function(value){return test(value)===true?applied(value):otherwise(value)}};exports.whenTrue=function(condition,applied,otherwise){return function(value){return condition===true?applied(value):otherwise(value)}};exports.whenFalse=function(condition,applied,otherwise){return function(value){return condition===false?applied(value):otherwise(value)}};exports.eq=function(target){return function(value){return target===value?result_1.succeed(target):result_1.fail("eq",value,{target:target})}};exports.neq=function(target){return function(value){return target===value?result_1.fail("neq",value,{target:target}):result_1.succeed(target)}};exports.notNull=function(value){return value==null||typeof value==="string"&&value===""?result_1.fail("notNull",value):result_1.succeed(value)};exports.optional=function(p){return function(value){return value==null||typeof value==="string"&&value===""?result_1.succeed(value):p(value)}};exports.identity=function(value){return result_1.succeed(value)};exports.discard=function(_){return result_1.succeed(undefined)};exports.reject=function(reason){return function(value){return result_1.fail(reason,value)}};exports.or=function(left,right){return function(value){return left(value).orElse(function(f){return right(value).lmap(function(f2){return new failure_1.DualFailure(value,f,f2)})})}};exports.and=function(l,r){return function(value){var result=l(value);if(result instanceof either_1.Left){return either_1.left(result.takeLeft())}else{var result2=r(result.takeRight());if(result2 instanceof either_1.Left)return either_1.left(failure_1.ModifiedFailure.create(value,result2.takeLeft()));else return either_1.right(result2.takeRight())}}};exports.every=function(p){var list=[];for(var _i=1;_i<arguments.length;_i++){list[_i-1]=arguments[_i]}return function(value){var r=p(value);if(r instanceof either_1.Left)return r;var r2=list.reduce(function(p,c){return p.chain(c)},either_1.right(r.takeRight()));if(r2 instanceof either_1.Left)return either_1.left(failure_1.ModifiedFailure.create(value,r2.takeLeft()));return either_1.right(r2.takeRight())}};exports.exists=function(list){return function(value){return list.indexOf(value)<0?result_1.fail("exists",value,{value:value,list:list}):result_1.succeed(value)}};exports.isin=function(list){return function(value){return list.indexOf(value)>-1?result_1.succeed(value):result_1.fail("isin",value)}};exports.match=function(p){var list=[];for(var _i=1;_i<arguments.length;_i++){list[_i-1]=arguments[_i]}return function(value){return list.reduce(function(e,f){return e instanceof either_1.Right?e:e.orElse(function(r){return r.message==="caseOf"?f(value):e})},p(value))}};exports.caseOf=function(t,p){return function(value){return type_1.test(value,t)?p(value):result_1.fail("caseOf",value,{type:t})}};exports.log=function(value){return console.log(value),result_1.succeed(value)}},{"./result":38,"./result/failure":36,"@quenk/noni/lib/data/either":22,"@quenk/noni/lib/data/type":28}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.map=exports.union=exports.intersect=exports.disjoint=exports.restrict=exports.isRecord=void 0;var record_1=require("@quenk/noni/lib/data/record");var record_2=require("@quenk/noni/lib/data/record");var record_3=require("./result/failure/record");var result_1=require("./result");exports.isRecord=function(value){return record_1.isRecord(value)?result_1.succeed(value):result_1.fail("isRecord",value)};exports.restrict=function(tests){return function(value){var add2Reports=function(r,p,k){return p(value[k]).fold(onFailure(k,r),onSuccess(k,r))};var result=record_1.reduce(tests,reports(),add2Reports);return review(result,value)}};exports.disjoint=function(tests){return function(value){var add2Reports=function(r,v,k){return tests.hasOwnProperty(k)?tests[k](v).fold(onFailure(k,r),onSuccess(k,r)):onSuccess(k,r)(v)};var result=record_1.reduce(value,reports(),add2Reports);return review(result,value)}};exports.intersect=function(tests){return function(value){var add2Reports=function(r,v,k){return tests.hasOwnProperty(k)?tests[k](v).fold(onFailure(k,r),onSuccess(k,r)):onSuccess(k,r)(null)};var result=record_1.reduce(value,reports(),add2Reports);return review(result,value)}};exports.union=function(tests){return function(value){var ks=record_2.keys(tests).concat(record_2.keys(value));var add2Reports=function(r,k){return tests.hasOwnProperty(k)?tests[k](value[k]).fold(onFailure(k,r),onSuccess(k,r)):onSuccess(k,r)(value[k])};var results=ks.reduce(add2Reports,reports());return review(results,value)}};exports.map=function(condition){return function(value){var add2Reports=function(r,v,k){return condition(v).fold(onFailure(k,r),onSuccess(k,r))};var result=record_1.reduce(value,reports(),add2Reports);return review(result,value)}};var reports=function(){return{failures:{},values:{}}};var review=function(reports,value){return!record_1.empty(reports.failures)?record_3.fail(reports.failures,value,{value:value}):result_1.succeed(reports.values)};var onFailure=function(key,_a){var failures=_a.failures,values=_a.values;return function(f){var _a;return{values:values,failures:record_1.merge(failures,(_a={},_a[key]=f,_a))}}};var onSuccess=function(key,_a){var failures=_a.failures,values=_a.values;return function(v){var _a;return v==null?{failures:failures,values:values}:{failures:failures,values:record_1.merge(values,(_a={},_a[key]=v,_a))}}}},{"./result":38,"./result/failure/record":37,"@quenk/noni/lib/data/record":25}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fail=exports.ArrayFailure=void 0;var record_1=require("@quenk/noni/lib/data/record");var either_1=require("@quenk/noni/lib/data/either");var ArrayFailure=function(){function ArrayFailure(failures,value,contexts){if(contexts===void 0){contexts={}}this.failures=failures;this.value=value;this.contexts=contexts;this.message="array"}Object.defineProperty(ArrayFailure.prototype,"context",{get:function(){return this.contexts},enumerable:false,configurable:true});ArrayFailure.create=function(errs,val,ctx){return new ArrayFailure(errs,val,ctx)};ArrayFailure.prototype.explain=function(templates,c){if(templates===void 0){templates={}}if(c===void 0){c={}}return record_1.reduce(this.failures,{},function(p,f,$index){var _a;return record_1.merge(p,(_a={},_a[$index]=f.explain(templates,record_1.merge(c,{$index:$index})),_a))})};ArrayFailure.prototype.toError=function(templates,context){if(templates===void 0){templates={}}if(context===void 0){context={}}var e=this.explain(templates,context);return new Error(typeof e==="object"?JSON.stringify(e):e)};return ArrayFailure}();exports.ArrayFailure=ArrayFailure;exports.fail=function(fails,val,ctx){if(ctx===void 0){ctx={}}return either_1.left(ArrayFailure.create(fails,val,ctx))}},{"@quenk/noni/lib/data/either":22,"@quenk/noni/lib/data/record":25}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DualFailure=exports.ModifiedFailure=exports.PrimFailure=void 0;var polate_1=require("@quenk/polate");var record_1=require("@quenk/noni/lib/data/record");var PrimFailure=function(){function PrimFailure(message,value,context){if(context===void 0){context={}}this.message=message;this.value=value;this.context=context}PrimFailure.create=function(message,value,ctx){if(ctx===void 0){ctx={}}return new PrimFailure(message,value,ctx)};PrimFailure.prototype.explain=function(templates,ctx){if(templates===void 0){templates={}}if(ctx===void 0){ctx={}}var context=record_1.merge(this.context,ctx);var key=context.$key;var $value=this.value;var split=templates[this.message.split(".")[0]];var str=this.message;var combined=typeof context["$key"]==="string"?context.$key+"."+this.message:this.message;if(templates[combined]){str=templates[combined]}else if(templates[key]){str=templates[key]}else if(templates[split]){str=templates[split]}else if(templates[this.message]){str=templates[this.message]}return polate_1.polate(str,record_1.merge(context,{$value:$value}))};PrimFailure.prototype.toError=function(templates,context){if(templates===void 0){templates={}}if(context===void 0){context={}}return new Error(this.explain(templates,context))};return PrimFailure}();exports.PrimFailure=PrimFailure;var ModifiedFailure=function(){function ModifiedFailure(value,previous){this.value=value;this.previous=previous}Object.defineProperty(ModifiedFailure.prototype,"message",{get:function(){return this.previous.message},enumerable:false,configurable:true});Object.defineProperty(ModifiedFailure.prototype,"context",{get:function(){return this.previous.context},enumerable:false,configurable:true});ModifiedFailure.create=function(value,previous){return new ModifiedFailure(value,previous)};ModifiedFailure.prototype.explain=function(templates,ctx){if(templates===void 0){templates={}}if(ctx===void 0){ctx={}}return this.previous.explain(templates,record_1.merge(ctx,{value:this.value}))};ModifiedFailure.prototype.toError=function(templates,context){if(templates===void 0){templates={}}if(context===void 0){context={}}var e=this.explain(templates,context);return new Error(typeof e==="object"?JSON.stringify(e):e)};return ModifiedFailure}();exports.ModifiedFailure=ModifiedFailure;var DualFailure=function(){function DualFailure(value,left,right){this.value=value;this.left=left;this.right=right}Object.defineProperty(DualFailure.prototype,"message",{get:function(){return this.left.message+" | "+this.right.message},enumerable:false,configurable:true});Object.defineProperty(DualFailure.prototype,"context",{get:function(){return{left:this.left.context,right:this.right.context}},enumerable:false,configurable:true});DualFailure.prototype.explain=function(templates,ctx){if(templates===void 0){templates={}}if(ctx===void 0){ctx={}}var _ctx=record_1.merge(ctx,{value:this.value});return{left:this.left.explain(templates,_ctx),right:this.right.explain(templates,_ctx)}};DualFailure.prototype.toError=function(templates,context){if(templates===void 0){templates={}}if(context===void 0){context={}}var e=this.explain(templates,context);return new Error(typeof e==="object"?JSON.stringify(e):e)};return DualFailure}();exports.DualFailure=DualFailure},{"@quenk/noni/lib/data/record":25,"@quenk/polate":30}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fail=exports.RecordFailure=void 0;var record_1=require("@quenk/noni/lib/data/record");var either_1=require("@quenk/noni/lib/data/either");var RecordFailure=function(){function RecordFailure(failures,value,contexts){if(contexts===void 0){contexts={}}this.failures=failures;this.value=value;this.contexts=contexts;this.message="object"}Object.defineProperty(RecordFailure.prototype,"context",{get:function(){return this.contexts},enumerable:false,configurable:true});RecordFailure.create=function(errs,val,ctxs){if(ctxs===void 0){ctxs={}}return new RecordFailure(errs,val,ctxs)};RecordFailure.prototype.explain=function(templates,c){if(templates===void 0){templates={}}if(c===void 0){c={}}return record_1.reduce(this.failures,{},function(o,f,$key){var _a;return record_1.merge(o,(_a={},_a[$key]=f.explain(templates,record_1.merge(c,{$key:$key})),_a))})};RecordFailure.prototype.toError=function(templates,context){if(templates===void 0){templates={}}if(context===void 0){context={}}var e=this.explain(templates,context);return new Error(typeof e==="object"?JSON.stringify(e):e)};return RecordFailure}();exports.RecordFailure=RecordFailure;exports.fail=function(failures,value,ctx){if(ctx===void 0){ctx={}}return either_1.left(RecordFailure.create(failures,value,ctx))}},{"@quenk/noni/lib/data/either":22,"@quenk/noni/lib/data/record":25}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.succeed=exports.fail=void 0;var either_1=require("@quenk/noni/lib/data/either");var failure_1=require("./failure");exports.fail=function(msg,value,ctx){if(ctx===void 0){ctx={}}return either_1.left(failure_1.PrimFailure.create(msg,value,ctx))};exports.succeed=function(b){return either_1.right(b)}},{"./failure":36,"@quenk/noni/lib/data/either":22}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toString=exports.isString=exports.notEmpty=exports.split=exports.trim=exports.lower=exports.lowercase=exports.upper=exports.uppercase=exports.range=exports.minLength=exports.maxLength=exports.matches=void 0;var result_1=require("./result");exports.matches=function(pattern){return function(value){return!pattern.test(value)?result_1.fail("matches",value,{pattern:pattern.toString()}):result_1.succeed(value)}};exports.maxLength=function(target){return function(value){return value.length>target?result_1.fail("maxLength",value,{target:target,value:value}):result_1.succeed(value)}};exports.minLength=function(target){return function(value){return value.length<target?result_1.fail("minLength",value,{target:target,value:value}):result_1.succeed(value)}};exports.range=function(min,max){return function(value){return value.length<min?result_1.fail("range.min",value,{min:min,max:max,value:value}):value.length>max?result_1.fail("range.max",value,{min:min,max:max,value:value}):result_1.succeed(value)}};exports.uppercase=function(value){return result_1.succeed(value.toUpperCase())};exports.upper=exports.uppercase;exports.lowercase=function(value){return result_1.succeed(value.toLowerCase())};exports.lower=exports.lowercase;exports.trim=function(value){return result_1.succeed(value.trim())};exports.split=function(token){return function(value){return result_1.succeed(value.split(token))}};exports.notEmpty=function(value){return value===""?result_1.fail("notEmpty",value):result_1.succeed(value)};exports.isString=function(a){return typeof a==="string"?result_1.succeed(a):result_1.fail("isString",a)};exports.toString=function(a){return result_1.succeed(String(a))}},{"./result":38}],40:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/caret");var wml_1=require("@quenk/wml");var util_1=require("../../util");exports.CARET="ww-caret";var Caret=function(_super){__extends(Caret,_super);function Caret(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={root:{id:_this.attrs.ww&&_this.attrs.ww.id?_this.attrs.ww.id:"",className:util_1.concat(exports.CARET,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"")}};return _this}return Caret}(wml_1.Component);exports.Caret=Caret},{"../../util":89,"./wml/caret":41,"@quenk/wml":91}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("span",{id:__context.values.root.id,class:__context.values.root.className},[])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],42:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var util_1=require("../../util");var __1=require("../../");var embed_1=require("./wml/embed");exports.EMBED="ww-embed";var Embed=function(_super){__extends(Embed,_super);function Embed(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new embed_1.Main(_this);_this.values={wml:{id:"embed"},id:__1.getId(_this.attrs),className:util_1.concat(exports.EMBED,__1.getClassName(_this.attrs))};return _this}return Embed}(wml_1.Component);exports.Embed=Embed},{"../../":78,"../../util":89,"./wml/embed":43,"@quenk/wml":91}],43:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{id:__context.values.id,class:__context.values.className},__spreadArrays(__context.children))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],44:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml=require("@quenk/wml");var views=require("./wml/link");var util_1=require("../../util");var active_1=require("../state/active");exports.LINK="ww-link";var LinkClickedEvent=function(){function LinkClickedEvent(name,href){this.name=name;this.href=href}return LinkClickedEvent}();exports.LinkClickedEvent=LinkClickedEvent;var Link=function(_super){__extends(Link,_super);function Link(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.name=_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"";_this.title=_this.attrs.ww&&_this.attrs.ww.title?_this.attrs.ww.title:"";_this.href=_this.attrs.ww&&_this.attrs.ww.href?_this.attrs.ww.href:"";_this.values={a:{id:_this.attrs.ww&&_this.attrs.ww.id?_this.attrs.ww.id:"",disabled:_this.attrs.ww&&_this.attrs.ww.disabled?_this.attrs.ww.disabled:null,className:util_1.concat(exports.LINK,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"",_this.attrs.ww&&_this.attrs.ww.active?active_1.ACTIVE:""),title:_this.attrs.ww&&_this.attrs.ww.title?_this.attrs.ww.title:null,name:_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:null,href:_this.attrs.ww&&_this.attrs.ww.href?_this.attrs.ww.href:"#",active:_this.attrs.ww&&_this.attrs.ww.active?_this.attrs.ww.active:false,content:_this.attrs.ww&&_this.attrs.ww.text?[document.createTextNode(_this.attrs.ww.text)]:_this.children,clicked:function(e){if(_this.attrs.ww){var _a=_this.attrs.ww,name_1=_a.name,href=_a.href,onClick=_a.onClick;if(!href)e.preventDefault();if(onClick)onClick(new LinkClickedEvent(name_1,href))}}}};return _this}Link.prototype.activate=function(){var m=util_1.getById(this.view,this.values.a.id);if(m.isJust()){var e=m.get();e.classList.remove(active_1.ACTIVE);e.classList.add(active_1.ACTIVE)}return this};Link.prototype.deactivate=function(){var m=util_1.getById(this.view,this.values.a.id);if(m.isJust())m.get().classList.remove(active_1.ACTIVE);return this};return Link}(wml.Component);exports.Link=Link},{"../../util":89,"../state/active":48,"./wml/link":45,"@quenk/wml":91}],45:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("a",{id:__context.values.a.id,class:__context.values.a.className,href:__context.values.a.href,title:__context.values.a.title,disabled:__context.values.a.disabled,onclick:__context.values.a.clicked},__spreadArrays(__context.values.a.content))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VERTICAL="-vertical";exports.PUSHABLE="-pushable";exports.POSITIONED="-positioned";exports.BLOCK="-block";exports.CLEARFIX="-clearfix";exports.JUSTIFIED="-justified";exports.LEFT="-left";exports.RIGHT="-right";exports.HORIZONTAL="-horizontal";exports.MIDDLE="-middle";exports.BOTTOM="-bottom";exports.getBlockClassName=function(attrs){return attrs.ww&&attrs.ww.block===true?exports.BLOCK:""}},{}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EXTRA_SMALL="-extra-small";exports.SMALL="-small";exports.MEDIUM="-medium";exports.LARGE="-large";exports.EXTRA_LARGE="-extra-large";var Size;(function(Size){Size["ExtraSmall"]="extra-small";Size["Small"]="small";Size["Medium"]="medium";Size["Large"]="large";Size["ExtraLarge"]="extra-large"})(Size=exports.Size||(exports.Size={}));exports.getSizeClassName=function(s){if(s===Size.ExtraSmall)return exports.EXTRA_SMALL;else if(s===Size.Small)return exports.SMALL;else if(s===Size.Medium)return exports.MEDIUM;else if(s===Size.Large)return exports.LARGE;else if(s===Size.ExtraLarge)return exports.EXTRA_LARGE;return""}},{}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var util_1=require("../../util");exports.ACTIVE="-active";exports.activate=function(view,id){return util_1.getById(view,id).map(function(e){e.classList.remove(exports.ACTIVE);e.classList.add(exports.ACTIVE)})};exports.deactivate=function(view,id){return util_1.getById(view,id).map(function(e){return e.classList.remove(exports.ACTIVE)})};exports.isActive=function(view,id){return util_1.getById(view,id).map(function(e){return e.classList.contains(exports.ACTIVE)}).orJust(function(){return false}).get()}},{"../../util":89}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DISABLED="-disabled"},{}],50:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var util_1=require("../../util");exports.HIDDEN="-ww-hidden";exports.isHidden=function(view,id){var m=view.findById(id);if(m.isNothing()){util_1.warnMissing(view,id);return true}else{return m.get().classList.contains(exports.HIDDEN)}};exports.hide=function(view,id){var m=view.findById(id);if(m.isNothing()){return util_1.warnMissing(view,id)}else{var e=m.get();e.classList.remove(exports.HIDDEN);e.classList.add(exports.HIDDEN)}};exports.show=function(view,id){var m=view.findById(id);if(m.isNothing()){return util_1.warnMissing(view,id)}else{m.get().classList.remove(exports.HIDDEN)}};exports.toggle=function(view,id){var m=view.findById(id);if(m.isNothing()){return util_1.warnMissing(view,id)}else{m.get().classList.toggle(exports.HIDDEN)}}},{"../../util":89}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT="-default";exports.PRIMARY="-primary";exports.SUCCESS="-success";exports.INFO="-info";exports.WARNING="-warning";exports.ERROR="-error";exports.OUTLINE="-outline";var Style;(function(Style){Style["Default"]="default";Style["Primary"]="primary";Style["Success"]="success";Style["Info"]="info";Style["Warning"]="warning";Style["Error"]="error"})(Style=exports.Style||(exports.Style={}));exports.styles=[Style.Default,Style.Success,Style.Info,Style.Warning,Style.Error];exports.getStyleClassName=function(s){switch(s){case Style.Default:return exports.DEFAULT;case Style.Primary:return exports.PRIMARY;case Style.Success:return exports.SUCCESS;case Style.Info:return exports.INFO;case Style.Warning:return exports.WARNING;case Style.Error:return exports.ERROR}return exports.DEFAULT}},{}],52:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/button");var toolbar_1=require("../toolbar");var active_1=require("../../content/state/active");var orientation_1=require("../../content/orientation");var style_1=require("../../content/style");exports.Style=style_1.Style;var size_1=require("../../content/size");var util_1=require("../../util");var __1=require("../../");var __2=require("../");exports.BUTTON="ww-button";var ButtonClickedEvent=function(_super){__extends(ButtonClickedEvent,_super);function ButtonClickedEvent(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonClickedEvent}(__2.Event);exports.ButtonClickedEvent=ButtonClickedEvent;var Button=function(_super){__extends(Button,_super);function Button(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=_this.attrs.ww&&_this.attrs.ww.anchor?new views.AnchorView(_this):new views.ButtonView(_this);_this.values={button:{wml:{id:"button"},id:__1.getId(_this.attrs),className:util_1.concat(exports.BUTTON,__1.getClassName(_this.attrs),toolbar_1.TOOLBAR_COMPAT,_this.attrs.ww&&_this.attrs.ww.style?style_1.getStyleClassName(_this.attrs.ww.style):style_1.DEFAULT,_this.attrs.ww&&_this.attrs.ww.size?size_1.getSizeClassName(_this.attrs.ww.size):"",_this.attrs.ww&&_this.attrs.ww.outline?style_1.OUTLINE:"",_this.attrs.ww&&_this.attrs.ww.block?orientation_1.BLOCK:"",_this.attrs.ww&&_this.attrs.ww.active?active_1.ACTIVE:""),type:_this.attrs.ww&&_this.attrs.ww.type?_this.attrs.ww.type:"button",name:_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"",disabled:_this.attrs.ww&&_this.attrs.ww.disabled?true:null,anchor:_this.attrs.ww&&_this.attrs.ww.anchor?_this.attrs.ww.anchor:false,onclick:function(e){e.preventDefault();_this.attrs.ww&&_this.attrs.ww.onClick&&_this.attrs.ww.onClick(new ButtonClickedEvent(_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"",_this.attrs.ww.value))},content:function(){return _this.attrs.ww&&_this.attrs.ww.text?[__1.text(_this.attrs.ww.text)]:_this.children}}};return _this}Button.prototype.disable=function(){util_1.getById(this.view,this.values.button.wml.id).map(function(b){return b.setAttribute("disabled","disabled")})};Button.prototype.enable=function(){util_1.getById(this.view,this.values.button.wml.id).map(function(b){return b.removeAttribute("disabled")})};Button.prototype.toggle=function(){var _this=this;util_1.getById(this.view,this.values.button.wml.id).map(function(b){return b.hasAttribute("disabled")?_this.enable():_this.disable()})};return Button}(__2.AbstractControl);exports.Button=Button},{"../":65,"../../":78,"../../content/orientation":46,"../../content/size":47,"../../content/state/active":48,"../../content/style":51,"../../util":89,"../toolbar":76,"./wml/button":53}],53:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var ButtonView=function(){function ButtonView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("button",{wml:{id:__context.values.button.wml.id},id:__context.values.button.id,type:__context.values.button.type,name:__context.values.button.name,disabled:__context.values.button.disabled,class:__context.values.button.className,onclick:__context.values.button.onclick},__spreadArrays(__context.values.button.content()))}}ButtonView.prototype.registerView=function(v){this.views.push(v);return v};ButtonView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};ButtonView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};ButtonView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};ButtonView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};ButtonView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};ButtonView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};ButtonView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return ButtonView}();exports.ButtonView=ButtonView;var AnchorView=function(){function AnchorView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("a",{wml:{id:__context.values.button.wml.id},id:__context.values.button.id,type:__context.values.button.type,href:"#",name:__context.values.button.name,disabled:__context.values.button.disabled,class:__context.values.button.className,onclick:__context.values.button.onclick},__spreadArrays(__context.values.button.content()))}}AnchorView.prototype.registerView=function(v){this.views.push(v);return v};AnchorView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};AnchorView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};AnchorView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};AnchorView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};AnchorView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};AnchorView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};AnchorView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return AnchorView}();exports.AnchorView=AnchorView},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],54:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var checkbox_1=require("./wml/checkbox");var util_1=require("../../util");var __1=require("../");var __2=require("../../");exports.CHECKBOX="ww-checkbox";var CheckChangedEvent=function(_super){__extends(CheckChangedEvent,_super);function CheckChangedEvent(){return _super!==null&&_super.apply(this,arguments)||this}return CheckChangedEvent}(__1.Event);exports.CheckChangedEvent=CheckChangedEvent;var Checkbox=function(_super){__extends(Checkbox,_super);function Checkbox(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new checkbox_1.Main(_this);_this.values={root:{id:__2.getId(_this.attrs),className:util_1.concat(exports.CHECKBOX,__2.getClassName(_this.attrs))},input:{name:__1.getName(_this.attrs),value:_this.attrs.ww&&_this.attrs.ww.value?_this.attrs.ww.value:null,onChange:function(){_this.values.input.value=!_this.values.input.value||null;if(_this.attrs.ww&&_this.attrs.ww.onChange)_this.attrs.ww.onChange(new CheckChangedEvent(_this.values.input.name,_this.values.input.value||false))}}};return _this}return Checkbox}(__1.AbstractControl);exports.Checkbox=Checkbox},{"../":65,"../../":78,"../../util":89,"./wml/checkbox":55}],55:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("span",{id:__context.values.root.id,class:__context.values.root.className},[__this.node("label",{},__spreadArrays([__this.node("input",{type:"checkbox",name:__context.values.input.name,checked:__context.values.input.value,onchange:__context.values.input.onChange},[])],__context.children))])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],56:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var toolbar_1=require("../toolbar");var orientation_1=require("../../content/orientation");var disabled_1=require("../../content/state/disabled");var style_1=require("../../content/style");exports.Style=style_1.Style;var size_1=require("../../content/size");var util_1=require("../../util");var __1=require("../../");var display_field_1=require("./wml/display-field");exports.DISPLAY_FIELD="ww-display-field";exports.DISPLAY_FIELD_CONTENT="ww-display-field__content";var DisplayField=function(_super){__extends(DisplayField,_super);function DisplayField(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new display_field_1.Main(_this);_this.values={wml:{id:"display"},id:__1.getId(_this.attrs),disabled:_this.attrs.ww&&_this.attrs.ww.disabled?_this.attrs.ww.disabled:false,className:util_1.concat(exports.DISPLAY_FIELD,__1.getClassName(_this.attrs),toolbar_1.TOOLBAR_COMPAT,_this.attrs.ww&&_this.attrs.ww.style?style_1.getStyleClassName(_this.attrs.ww.style):style_1.DEFAULT,_this.attrs.ww&&_this.attrs.ww.size?size_1.getSizeClassName(_this.attrs.ww.size):"",_this.attrs.ww&&_this.attrs.ww.block?orientation_1.BLOCK:"",_this.attrs.ww&&_this.attrs.ww.disabled?disabled_1.DISABLED:""),onclick:function(e){e.stopPropagation();if(_this.attrs.ww&&_this.attrs.ww.onClick&&!_this.values.disabled)_this.attrs.ww.onClick()},content:{className:exports.DISPLAY_FIELD_CONTENT}};return _this}return DisplayField}(wml_1.Component);exports.DisplayField=DisplayField},{"../../":78,"../../content/orientation":46,"../../content/size":47,"../../content/state/disabled":49,"../../content/style":51,"../../util":89,"../toolbar":76,"./wml/display-field":57,"@quenk/wml":91}],57:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{id:__context.values.id,class:__context.values.className,onclick:__context.values.onclick},[__this.node("div",{class:__context.values.content.className},__spreadArrays(__context.children))])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],58:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/drop-list");var util_1=require("../../util");var size_1=require("../../content/size");var orientation_1=require("../../content/orientation");var results_menu_1=require("../results-menu");exports.ItemSelectedEvent=results_menu_1.ItemSelectedEvent;var search_1=require("../search");var __1=require("../../");var __2=require("../");exports.DROP_LIST="ww-drop-list";var DropList=function(_super){__extends(DropList,_super);function DropList(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={id:__1.getId(_this.attrs),className:util_1.concat(exports.DROP_LIST,__1.getClassName(_this.attrs),_this.attrs.ww&&_this.attrs.ww.size?size_1.getSizeClassName(_this.attrs.ww.size):"",_this.attrs.ww&&_this.attrs.ww.block?orientation_1.BLOCK:""),name:__2.getName(_this.attrs),value:_this.attrs.ww&&_this.attrs.ww.value,control:{wml:{id:"drop-list"}},messages:{wml:{id:"messages"}},display:{disabled:_this.attrs.ww&&_this.attrs.ww.disabled,placeholder:function(){if(_this.attrs.ww){if(_this.attrs.ww.options&&_this.values.value)return getCurrent(_this.attrs.ww.options,_this.values.value);return _this.attrs.ww.placeholder||"Select one"}},onClick:function(){_this.toggle()}},menu:{wml:{id:"menu"},name:_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"",block:_this.attrs.ww&&_this.attrs.ww.block?_this.attrs.ww.block:false,hidden:true,results:_this.attrs.ww&&_this.attrs.ww.options?_this.attrs.ww.options:[],onSelect:function(e){if(_this.attrs.ww&&_this.attrs.ww.onSelect)_this.attrs.ww.onSelect(new results_menu_1.ItemSelectedEvent(e.name,e.value.value));_this.values.value=e.value.value;_this.view.invalidate()},itemTemplate:_this.attrs.ww&&_this.attrs.ww.itemTemplate?_this.attrs.ww.itemTemplate:undefined,noItemsTemplate:_this.attrs.ww&&_this.attrs.ww.noItemsTemplate?_this.attrs.ww.noItemsTemplate:undefined,stringifier:_this.attrs.ww&&_this.attrs.ww.stringifier?_this.attrs.ww.stringifier:function(v){return v.label}}};return _this}DropList.prototype.update=function(options){this.values.menu.results=options;this.view.invalidate();return this};DropList.prototype.open=function(){search_1.openMenu(this.view,this.values.menu.wml.id);return this};DropList.prototype.close=function(){search_1.closeMenu(this.view,this.values.menu.wml.id);return this};DropList.prototype.toggle=function(){search_1.toggleMenu(this.view,this.values.menu.wml.id);return this};return DropList}(__2.AbstractControl);exports.DropList=DropList;var getCurrent=function(opts,value,text){if(text===void 0){text="Select one"}return opts.reduce(function(p,c){return c.value===value?c.label:p},text)}},{"../":65,"../../":78,"../../content/orientation":46,"../../content/size":47,"../../util":89,"../results-menu":68,"../search":70,"./wml/drop-list":59}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var caret_1=require("../../../content/caret");var results_menu_1=require("../../results-menu");var display_field_1=require("../../display-field");var __1=require("../../../");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{id:__context.values.id,class:__context.values.className},[__this.widget(new display_field_1.DisplayField({ww:{onClick:__context.values.display.onClick,disabled:__context.values.display.disabled}},[__1.text(__context.values.display.placeholder()),__this.widget(new caret_1.Caret({},[]),{})]),{ww:{onClick:__context.values.display.onClick,disabled:__context.values.display.disabled}}),__this.widget(new results_menu_1.ResultsMenu({wml:{id:__context.values.menu.wml.id},ww:{block:__context.values.menu.block,name:__context.values.menu.name,hidden:__context.values.menu.hidden,results:__context.values.menu.results,onSelect:__context.values.menu.onSelect,noItemsTemplate:__context.values.menu.noItemsTemplate,itemTemplate:__context.values.menu.itemTemplate,stringifier:__context.values.menu.stringifier}},[]),{wml:{id:__context.values.menu.wml.id},ww:{block:__context.values.menu.block,name:__context.values.menu.name,hidden:__context.values.menu.hidden,results:__context.values.menu.results,onSelect:__context.values.menu.onSelect,noItemsTemplate:__context.values.menu.noItemsTemplate,itemTemplate:__context.values.menu.itemTemplate,stringifier:__context.values.menu.stringifier}})])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"../../../":78,"../../../content/caret":40,"../../display-field":56,"../../results-menu":68,"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],60:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var style=require("../content/style");var util_1=require("../util");var control_1=require("../control");var ValidationState;(function(ValidationState){ValidationState["Neutral"]="neutral";ValidationState["Error"]="error";ValidationState["Success"]="success";ValidationState["Warning"]="warning"})(ValidationState=exports.ValidationState||(exports.ValidationState={}));var AbstractFeedbackControl=function(_super){__extends(AbstractFeedbackControl,_super);function AbstractFeedbackControl(){return _super!==null&&_super.apply(this,arguments)||this}AbstractFeedbackControl.prototype.setMessage=function(msg){exports.setMessage(this.view,this.values.messages.wml.id,msg);return this};AbstractFeedbackControl.prototype.removeMessage=function(){exports.removeMessage(this.view,this.values.messages.wml.id);return this};AbstractFeedbackControl.prototype.setValidationState=function(state){exports.setValidationState(this.view,this.values.control.wml.id,state);return this};AbstractFeedbackControl.prototype.removeValidationState=function(){exports.removeValidationState(this.view,this.values.control.wml.id);return this};AbstractFeedbackControl.prototype.getValidationState=function(){return exports.getValidationState(this.view,this.values.control.wml.id)};return AbstractFeedbackControl}(control_1.AbstractControl);exports.AbstractFeedbackControl=AbstractFeedbackControl;exports.setMessage=function(view,id,msg){return util_1.getById(view,id).map(function(messages){var node=document.createTextNode(msg);while(messages.lastChild)messages.removeChild(messages.lastChild);messages.appendChild(node)})};exports.removeMessage=function(view,id){return util_1.getById(view,id).map(function(messages){while(messages.lastChild)messages.removeChild(messages.lastChild)})};exports.setValidationState=function(view,id,state){exports.removeValidationState(view,id);if(state!==ValidationState.Neutral)util_1.getById(view,id).map(function(e){return e.classList.add(exports.validationState2ClassName(state))})};exports.removeValidationState=function(view,id){util_1.getById(view,id).map(function(h){h.classList.remove(style.SUCCESS);h.classList.remove(style.ERROR);h.classList.remove(style.WARNING)})};exports.getValidationState=function(view,id){return util_1.getById(view,id).map(function(h){if(h.classList.contains(style.SUCCESS))return ValidationState.Success;else if(h.classList.contains(style.WARNING))return ValidationState.Warning;else if(h.classList.contains(style.ERROR))return ValidationState.Error;else return ValidationState.Neutral}).get()};exports.getValidityClassName=function(attrs){if(attrs.ww){if(attrs.ww.error&&attrs.ww.error!="")return style.ERROR;if(attrs.ww.warning&&attrs.ww.warning!="")return style.WARNING;if(attrs.ww.success&&attrs.ww.success!="")return style.SUCCESS}return""};exports.getMessage=function(attrs){if(attrs.ww){if(attrs.ww.error&&attrs.ww.error!="")return attrs.ww.error;if(attrs.ww.warning&&attrs.ww.warning!="")return attrs.ww.warning;if(attrs.ww.success&&attrs.ww.success!="")return attrs.ww.success;if(attrs.ww.message&&attrs.ww.message!="")return attrs.ww.message}return""};exports.validationState2ClassName=function(state){if(state===ValidationState.Success)return style.SUCCESS;else if(state===ValidationState.Warning)return style.WARNING;else if(state===ValidationState.Error)return style.ERROR;else return""}},{"../content/style":51,"../control":65,"../util":89}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var util_1=require("../util");var FocusGainedEvent=function(){function FocusGainedEvent(name){this.name=name}return FocusGainedEvent}();exports.FocusGainedEvent=FocusGainedEvent;var FocusLostEvent=function(){function FocusLostEvent(name){this.name=name}return FocusLostEvent}();exports.FocusLostEvent=FocusLostEvent;exports.focus=function(view,id){util_1.getById(view,id).map(function(e){return e.focus()})}},{"../util":89}],62:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var util_1=require("../util");var feedback_1=require("./feedback");var AbstractFormControl=function(_super){__extends(AbstractFormControl,_super);function AbstractFormControl(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractFormControl}(feedback_1.AbstractFeedbackControl);exports.AbstractFormControl=AbstractFormControl;exports.getLabel=function(attrs){return attrs.ww&&attrs.ww.label?attrs.ww.label:""};exports.setMessage=function(view,id,msg){util_1.getById(view,id).map(function(h){h.setMessage(msg)})};exports.removeMessage=function(view,id){util_1.getById(view,id).map(function(h){h.removeMessage()})}},{"../util":89,"./feedback":60}],63:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var util_1=require("../../util");var feedback_1=require("../feedback");var __1=require("../../");var help_1=require("./wml/help");exports.HELP="ww-help";var Help=function(_super){__extends(Help,_super);function Help(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new help_1.Main(_this);_this.values={help:{wml:{id:"help"},id:_this.attrs.ww&&_this.attrs.ww.id?_this.attrs.ww.id:"",className:util_1.concat(exports.HELP,__1.getClassName(_this.attrs)),text:_this.attrs.ww&&_this.attrs.ww.text?[document.createTextNode(_this.attrs.ww.text)]:_this.children}};return _this}Help.prototype.setMessage=function(msg){feedback_1.setMessage(this.view,this.values.help.wml.id,msg);return this};Help.prototype.removeMessage=function(){feedback_1.removeMessage(this.view,this.values.help.wml.id);return this};return Help}(wml_1.Component);exports.Help=Help},{"../../":78,"../../util":89,"../feedback":60,"./wml/help":64,"@quenk/wml":91}],64:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("span",{wml:{id:__context.values.help.wml.id},id:__context.values.help.id,class:__context.values.help.className},__spreadArrays(__context.values.help.text))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],65:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var maybe_1=require("@quenk/noni/lib/data/maybe");var Event=function(){function Event(name,value){this.name=name;this.value=value}return Event}();exports.Event=Event;var AbstractControl=function(_super){__extends(AbstractControl,_super);function AbstractControl(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractControl}(wml_1.Component);exports.AbstractControl=AbstractControl;exports.getName=function(attrs){return attrs.ww&&attrs.ww.name?attrs.ww.name:""};exports.getDisabled=function(attrs){return attrs.ww&&attrs.ww.disabled?attrs.ww.disabled:undefined};exports.getValue=function(attrs){return attrs.ww&&attrs.ww.value?maybe_1.just(attrs.ww.value):maybe_1.nothing()}},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml":91}],66:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var util_1=require("../../util");var __1=require("../../");var label_1=require("./wml/label");exports.LABEL="ww-label";var Label=function(_super){__extends(Label,_super);function Label(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new label_1.Main(_this);_this.values={label:{className:util_1.concat(exports.LABEL,__1.getClassName(_this.attrs)),for:_this.attrs.ww&&_this.attrs.ww.for?_this.attrs.ww.for:"",text:_this.attrs.ww&&_this.attrs.ww.text?[document.createTextNode(_this.attrs.ww.text)]:_this.children}};return _this}return Label}(wml_1.Component);exports.Label=Label},{"../../":78,"../../util":89,"./wml/label":67,"@quenk/wml":91}],67:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("label",{for:__context.values.label.for,class:__context.values.label.className},__spreadArrays(__context.values.label.text))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],68:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var maybe_1=require("@quenk/noni/lib/data/maybe");var wml_1=require("@quenk/wml");var __1=require("../../");var util_1=require("../../util");var __2=require("../");var results_menu_1=require("./wml/results-menu");exports.RESULTS_MENU="ww-results-menu";var ItemSelectedEvent=function(_super){__extends(ItemSelectedEvent,_super);function ItemSelectedEvent(){return _super!==null&&_super.apply(this,arguments)||this}return ItemSelectedEvent}(__2.Event);exports.ItemSelectedEvent=ItemSelectedEvent;var ResultsMenu=function(_super){__extends(ResultsMenu,_super);function ResultsMenu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new results_menu_1.Main(_this);_this.values={wml:{id:"menu"},tree:maybe_1.nothing(),results:_this.attrs.ww&&_this.attrs.ww.results?_this.attrs.ww.results:[],name:_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"",className:util_1.concat(exports.RESULTS_MENU,__1.getClassName(_this.attrs)),block:_this.attrs.ww&&_this.attrs.ww.block?_this.attrs.ww.block:false,hidden:_this.attrs.ww&&_this.attrs.ww.hidden?_this.attrs.ww.hidden:false,item:{stringifier:_this.attrs.ww&&_this.attrs.ww.stringifier?_this.attrs.ww.stringifier:function(v){return Object.toString.call(v)},click:function(index){if(_this.attrs.ww&&_this.attrs.ww.onSelect)_this.attrs.ww.onSelect(new ItemSelectedEvent(_this.attrs.ww&&_this.attrs.ww.name||"",_this.values.results[index]))},template:_this.attrs.ww&&_this.attrs.ww.itemTemplate?_this.attrs.ww.itemTemplate:function(option,index){return results_menu_1.itemTemplate(_this,option,index)},noItemsTemplate:function(){return _this.attrs.ww&&_this.attrs.ww.noItemsTemplate?_this.attrs.ww.noItemsTemplate:results_menu_1.noItemsTemplate()}}};return _this}ResultsMenu.prototype.open=function(){util_1.getById(this.view,this.values.wml.id).map(function(m){return m.show()});this.values.hidden=false;if(this.attrs.ww&&this.attrs.ww.onOpen)this.attrs.ww.onOpen();return this};ResultsMenu.prototype.close=function(){util_1.getById(this.view,this.values.wml.id).map(function(m){return m.hide()});this.values.hidden=true;if(this.attrs.ww&&this.attrs.ww.onClose)this.attrs.ww.onClose();return this};ResultsMenu.prototype.toggle=function(){util_1.getById(this.view,this.values.wml.id).map(function(m){return m.toggle()});this.values.hidden=!this.values.hidden;if(this.values.hidden===true&&this.attrs.ww&&this.attrs.ww.onClose)this.attrs.ww.onClose();else if(this.values.hidden===false&&this.attrs.ww&&this.attrs.ww.onOpen)this.attrs.ww.onOpen();return this};ResultsMenu.prototype.handleEvent=function(e){if(this.values.tree.isJust()){var root=this.values.tree.get();if(!document.body.contains(root))document.removeEventListener("click",this);if(!root.contains(e.target))this.close()}};ResultsMenu.prototype.update=function(results){this.values.results=results;this.values.hidden=false;this.view.invalidate();return this};ResultsMenu.prototype.render=function(){this.values.tree=maybe_1.just(this.view.render());window.removeEventListener("click",this);window.addEventListener("click",this);return this.values.tree.get()};return ResultsMenu}(wml_1.Component);exports.ResultsMenu=ResultsMenu},{"../":65,"../../":78,"../../util":89,"./wml/results-menu":69,"@quenk/noni/lib/data/maybe":24,"@quenk/wml":91}],69:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __1=require("../../../");var link_1=require("../../../content/link");var menu_1=require("../../../menu/menu");var item_1=require("../../../menu/item");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};exports.itemTemplate=function(r,option,_index){return function(__this){return[__1.text(r.values.item.stringifier(option))]}};exports.noItemsTemplate=function(){return function(__this){return[__this.node("b",{},[__document.createTextNode("No results to display.")])]}};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.widget(new menu_1.Menu({wml:{id:__context.values.wml.id},ww:{className:__context.values.className,block:__context.values.block,hidden:__context.values.hidden}},__spreadArrays(__forIn(__context.values.results,function(result,index,_$$all){return[__this.widget(new item_1.Item({ww:{name:""+index}},[__this.widget(new link_1.Link({ww:{onClick:function(){return __context.values.item.click(index)}}},__spreadArrays(__context.values.item.template(result,index)(__this))),{ww:{onClick:function(){return __context.values.item.click(index)}}})]),{ww:{name:""+index}})]},function(){return __spreadArrays(__context.values.item.noItemsTemplate()(__this))}))),{wml:{id:__context.values.wml.id},ww:{className:__context.values.className,block:__context.values.block,hidden:__context.values.hidden}})}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"../../../":78,"../../../content/link":44,"../../../menu/item":84,"../../../menu/menu":86,"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],70:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/search");var timer_1=require("@quenk/noni/lib/control/timer");var orientation_1=require("../../content/orientation");var util_1=require("../../util");var results_menu_1=require("../results-menu");exports.ItemSelectedEvent=results_menu_1.ItemSelectedEvent;var __1=require("../../");var __2=require("../");exports.ESCAPE=27;exports.SEARCH="ww-search";exports.SEARCH_INPUT="ww-search__input";var TermChangedEvent=function(_super){__extends(TermChangedEvent,_super);function TermChangedEvent(){return _super!==null&&_super.apply(this,arguments)||this}return TermChangedEvent}(__2.Event);exports.TermChangedEvent=TermChangedEvent;var FocusGainedEvent=function(){function FocusGainedEvent(name){this.name=name}return FocusGainedEvent}();exports.FocusGainedEvent=FocusGainedEvent;var FocusLostEvent=function(){function FocusLostEvent(name){this.name=name}return FocusLostEvent}();exports.FocusLostEvent=FocusLostEvent;var EscapeEvent=function(){function EscapeEvent(name){this.name=name}return EscapeEvent}();exports.EscapeEvent=EscapeEvent;var Input=function(_super){__extends(Input,_super);function Input(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.InputView(_this);_this.values={wml:{id:"root"},className:util_1.concat(exports.SEARCH_INPUT,__1.getClassName(_this.attrs)),placeholder:_this.attrs.ww&&_this.attrs.ww.placeholder?_this.attrs.ww.placeholder:"",readOnly:_this.attrs.ww&&_this.attrs.ww.readOnly||undefined,disabled:_this.attrs.ww&&_this.attrs.ww.disabled||undefined,autocomplete:"do not enable please",autofocus:_this.attrs.ww&&_this.attrs.ww.autofocus?true:undefined,size:String(_this.attrs.ww&&_this.attrs.ww.size?_this.attrs.ww.size:20),value:_this.attrs.ww&&_this.attrs.ww.value?_this.attrs.ww.value:"",onfocus:function(e){var target=e.target;if(_this.attrs.ww&&_this.attrs.ww.onFocus)_this.attrs.ww.onFocus(new FocusGainedEvent(_this.attrs.ww&&_this.attrs.ww.name||""));target.value=target.value},onkeyup:function(e){if(e.keyCode===exports.ESCAPE){if(_this.attrs.ww&&_this.attrs.ww.onEscape)_this.attrs.ww.onEscape(new EscapeEvent(_this.attrs.ww.name||""))}else{_this.fireSearch(e)}},oninput:function(e){e.target.oninput=null;_this.values.onkeyup(e)},onblur:function(){if(_this.attrs.ww&&_this.attrs.ww.onBlur)_this.attrs.ww.onBlur(new FocusLostEvent(_this.attrs.ww&&_this.attrs.ww.name||""))}};return _this}Input.prototype.fireSearch=function(e){if(this.attrs.ww&&this.attrs.ww.onSearch){var name_1=""+this.attrs.ww.name;var value=e.target.value;this.attrs.ww.onSearch(new TermChangedEvent(name_1,value))}};Input.prototype.rendered=function(){if(this.values.autofocus===true)this.focus()};Input.prototype.focus=function(){var _this=this;timer_1.tick(function(){return getInput(_this).map(function(i){return i.focus()})});return this};Input.prototype.setSize=function(n){this.values.size=String(n);getInput(this).map(function(i){return i.setAttribute("size",String(n))});return this};Input.prototype.getSize=function(){return Number(this.values.size)};return Input}(__2.AbstractControl);exports.Input=Input;var Search=function(_super){__extends(Search,_super);function Search(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={root:{wml:{id:"root"},id:__1.getId(_this.attrs),className:util_1.concat(exports.SEARCH,__1.getClassName(_this.attrs),orientation_1.getBlockClassName(_this.attrs))},input:{wml:{id:"input"},name:__2.getName(_this.attrs),placeholder:_this.attrs.ww&&_this.attrs.ww.placeholder?_this.attrs.ww.placeholder:"",autofocus:_this.attrs.ww&&_this.attrs.ww.autofocus?true:undefined,readOnly:_this.attrs.ww&&_this.attrs.ww.readOnly||undefined,disabled:_this.attrs.ww&&_this.attrs.ww.disabled||undefined,value:_this.attrs.ww&&_this.attrs.ww.term?_this.attrs.ww.term:_this.attrs.ww&&_this.attrs.ww.stringifier&&_this.attrs.ww.value?_this.attrs.ww.stringifier(_this.attrs.ww.value):"",onFocus:_this.attrs.ww&&_this.attrs.ww.onFocus||undefined,onSearch:_this.attrs.ww&&_this.attrs.ww.onSearch?_this.attrs.ww.onSearch:undefined,onEscape:function(){return _this.close()},onBlur:_this.attrs.ww&&_this.attrs.ww.onBlur?_this.attrs.ww.onBlur:undefined},menu:{wml:{id:"menu"},name:_this.attrs.ww&&_this.attrs.ww.name?_this.attrs.ww.name:"",block:_this.attrs.ww&&_this.attrs.ww.block?_this.attrs.ww.block:false,onSelect:function(e){_this.close();if(_this.attrs.ww&&_this.attrs.ww.onSelect)_this.attrs.ww.onSelect(e)},itemTemplate:_this.attrs.ww&&_this.attrs.ww.itemTemplate?_this.attrs.ww.itemTemplate:undefined,noItemsTemplate:_this.attrs.ww&&_this.attrs.ww.noItemsTemplate?_this.attrs.ww.noItemsTemplate:undefined,stringifier:_this.attrs.ww&&_this.attrs.ww.stringifier?_this.attrs.ww.stringifier:undefined}};return _this}Search.prototype.set=function(value){util_1.getById(this.view,this.values.root.wml.id).map(function(e){e.value=value});return this};Search.prototype.focus=function(){util_1.getById(this.view,this.values.input.wml.id).map(function(i){return i.focus()});return this};Search.prototype.update=function(results){exports.updateMenu(this.view,this.values.menu.wml.id,results);return this};Search.prototype.open=function(){exports.openMenu(this.view,this.values.menu.wml.id);return this};Search.prototype.close=function(){exports.closeMenu(this.view,this.values.menu.wml.id);return this};return Search}(__2.AbstractControl);exports.Search=Search;var getInput=function(i){return util_1.getById(i.view,i.values.wml.id)};exports.updateMenu=function(view,id,results){var mMenu=util_1.getById(view,id);if(mMenu.isJust())mMenu.get().update(results)};exports.openMenu=function(view,id){util_1.getById(view,id).map(function(m){return m.open()})};exports.closeMenu=function(view,id){util_1.getById(view,id).map(function(m){return m.close()})};exports.toggleMenu=function(view,id){util_1.getById(view,id).map(function(m){return m.toggle()})}},{"../":65,"../../":78,"../../content/orientation":46,"../../util":89,"../results-menu":68,"./wml/search":71,"@quenk/noni/lib/control/timer":20}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var results_menu_1=require("../../results-menu");var __1=require("../");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var InputView=function(){function InputView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("input",{wml:{id:__context.values.wml.id},class:__context.values.className,onkeyup:__context.values.onkeyup,oninput:__context.values.oninput,onfocus:__context.values.onfocus,onblur:__context.values.onblur,autofocus:__context.values.autofocus,autocomplete:__context.values.autocomplete,size:__context.values.size,placeholder:__context.values.placeholder,readOnly:__context.values.readOnly,disabled:__context.values.disabled,value:__context.values.value},[])}}InputView.prototype.registerView=function(v){this.views.push(v);return v};InputView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};InputView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};InputView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};InputView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};InputView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};InputView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};InputView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return InputView}();exports.InputView=InputView;var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.root.wml.id},id:__context.values.root.id,class:__context.values.root.className},[__this.widget(new __1.Input({wml:{id:__context.values.input.wml.id},ww:{name:__context.values.input.name,autofocus:__context.values.input.autofocus,onFocus:__context.values.input.onFocus,onSearch:__context.values.input.onSearch,onEscape:__context.values.input.onEscape,onBlur:__context.values.input.onBlur,placeholder:__context.values.input.placeholder,readOnly:__context.values.input.readOnly,disabled:__context.values.input.disabled,value:__context.values.input.value}},[]),{wml:{id:__context.values.input.wml.id},ww:{name:__context.values.input.name,autofocus:__context.values.input.autofocus,onFocus:__context.values.input.onFocus,onSearch:__context.values.input.onSearch,onEscape:__context.values.input.onEscape,onBlur:__context.values.input.onBlur,placeholder:__context.values.input.placeholder,readOnly:__context.values.input.readOnly,disabled:__context.values.input.disabled,value:__context.values.input.value}}),__this.widget(new results_menu_1.ResultsMenu({wml:{id:__context.values.menu.wml.id},ww:{hidden:true,block:__context.values.menu.block,onSelect:__context.values.menu.onSelect,noItemsTemplate:__context.values.menu.noItemsTemplate,itemTemplate:__context.values.menu.itemTemplate,stringifier:__context.values.menu.stringifier}},[]),{wml:{id:__context.values.menu.wml.id},ww:{hidden:true,block:__context.values.menu.block,onSelect:__context.values.menu.onSelect,noItemsTemplate:__context.values.menu.noItemsTemplate,itemTemplate:__context.values.menu.itemTemplate,stringifier:__context.values.menu.stringifier}})])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"../":70,"../../results-menu":68,"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],72:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/text-field");var util_1=require("../../util");var feedback_1=require("../feedback");var form_1=require("../form");var text_input_1=require("../text-input");exports.TextChangedEvent=text_input_1.TextChangedEvent;var __1=require("../../");var __2=require("../");exports.TEXT_FIELD="ww-text-field";var TextField=function(_super){__extends(TextField,_super);function TextField(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={root:{wml:{id:"root"},className:util_1.concat(exports.TEXT_FIELD,__1.getClassName(_this.attrs),feedback_1.getValidityClassName(_this.attrs))},messages:{wml:{id:"message"},text:feedback_1.getMessage(_this.attrs)},label:{id:__2.getName(_this.attrs),text:form_1.getLabel(_this.attrs)},control:{wml:{id:"root"},id:__1.getId(_this.attrs),name:__2.getName(_this.attrs),type:_this.attrs.ww&&_this.attrs.ww.type?_this.attrs.ww.type:"text",min:_this.attrs.ww&&_this.attrs.ww.min?_this.attrs.ww.min:undefined,max:_this.attrs.ww&&_this.attrs.ww.max?_this.attrs.ww.max:undefined,focus:_this.attrs.ww&&_this.attrs.ww.focus?_this.attrs.ww.focus:undefined,placeholder:_this.attrs.ww&&_this.attrs.ww.placeholder?_this.attrs.ww.placeholder:"",match:_this.attrs.ww&&_this.attrs.ww.match?_this.attrs.ww.match:undefined,length:_this.attrs.ww&&_this.attrs.ww.length?_this.attrs.ww.length:undefined,value:_this.attrs.ww&&_this.attrs.ww.value?_this.attrs.ww.value:"",disabled:_this.attrs.ww&&_this.attrs.ww.disabled?true:undefined,readOnly:_this.attrs.ww&&_this.attrs.ww.readOnly?true:undefined,rows:_this.attrs.ww&&_this.attrs.ww.rows?_this.attrs.ww.rows:1,oninput:_this.attrs.ww&&_this.attrs.ww.onChange?oninput(_this):function(){},onChange:_this.attrs.ww&&_this.attrs.ww.onChange?_this.attrs.ww.onChange:function(){}}};return _this}TextField.prototype.setMessage=function(msg){getHelp(this).map(function(h){return h.setMessage(msg)});return this};TextField.prototype.removeMessage=function(){getHelp(this).map(function(h){return h.removeMessage()});return this};return TextField}(form_1.AbstractFormControl);exports.TextField=TextField;var getHelp=function(t){return util_1.getById(t.view,t.values.messages.wml.id)};var oninput=function(f){return function(e){if(f.attrs.ww&&f.attrs.ww&&f.attrs.ww.onChange)f.attrs.ww.onChange(new text_input_1.TextChangedEvent(f.attrs.ww&&f.attrs.ww.name?f.attrs.ww.name:"",e.target.value))}}},{"../":65,"../../":78,"../../util":89,"../feedback":60,"../form":62,"../text-input":74,"./wml/text-field":73}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var label_1=require("../../label");var help_1=require("../../help");var text_input_1=require("../../text-input");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.root.wml.id},class:__context.values.root.className},[__this.widget(new label_1.Label({ww:{for:__context.values.control.id,text:__context.values.label.text}},[]),{ww:{for:__context.values.control.id,text:__context.values.label.text}}),__this.widget(new text_input_1.TextInput({ww:{id:__context.values.control.id,name:__context.values.control.name,focus:__context.values.control.focus,placeholder:__context.values.control.placeholder,onChange:__context.values.control.onChange,block:true,type:__context.values.control.type,min:__context.values.control.min,max:__context.values.control.max,match:__context.values.control.match,length:__context.values.control.length,value:__context.values.control.value,rows:__context.values.control.rows,disabled:__context.values.control.disabled,readOnly:__context.values.control.readOnly}},[]),{ww:{id:__context.values.control.id,name:__context.values.control.name,focus:__context.values.control.focus,placeholder:__context.values.control.placeholder,onChange:__context.values.control.onChange,block:true,type:__context.values.control.type,min:__context.values.control.min,max:__context.values.control.max,match:__context.values.control.match,length:__context.values.control.length,value:__context.values.control.value,rows:__context.values.control.rows,disabled:__context.values.control.disabled,readOnly:__context.values.control.readOnly}}),__this.widget(new help_1.Help({wml:{id:__context.values.messages.wml.id},ww:{text:__context.values.messages.text}},[]),{wml:{id:__context.values.messages.wml.id},ww:{text:__context.values.messages.text}})])}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"../../help":63,"../../label":66,"../../text-input":74,"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],74:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/text-input");var timer_1=require("@quenk/noni/lib/control/timer");var util_1=require("../../util");var orientation_1=require("../../content/orientation");var size_1=require("../../content/size");var focus_1=require("../focus");var __1=require("../../");var __2=require("../");exports.TEXT_INPUT="ww-text-input";var TextChangedEvent=function(_super){__extends(TextChangedEvent,_super);function TextChangedEvent(){return _super!==null&&_super.apply(this,arguments)||this}return TextChangedEvent}(__2.Event);exports.TextChangedEvent=TextChangedEvent;var TextInput=function(_super){__extends(TextInput,_super);function TextInput(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=_this.attrs.ww&&_this.attrs.ww.rows&&_this.attrs.ww.rows>1?new views.Textarea(_this):new views.Input(_this);_this.values={control:{wml:{id:"root"}},id:__1.getId(_this.attrs),className:util_1.concat(exports.TEXT_INPUT,__1.getClassName(_this.attrs),_this.attrs.ww&&_this.attrs.ww.size?size_1.getSizeClassName(_this.attrs.ww.size):"",_this.attrs.ww&&_this.attrs.ww.block?orientation_1.BLOCK:""),name:__2.getName(_this.attrs),type:_this.attrs.ww&&_this.attrs.ww.type?_this.attrs.ww.type:"text",min:_this.attrs.ww&&_this.attrs.ww.min?String(_this.attrs.ww.min):null,max:_this.attrs.ww&&_this.attrs.ww.max?String(_this.attrs.ww.max):null,match:new RegExp(_this.attrs.ww&&_this.attrs.ww.match?_this.attrs.ww.match:"."),length:_this.attrs.ww&&_this.attrs.ww.length?_this.attrs.ww.length:Infinity,placeholder:_this.attrs.ww&&_this.attrs.ww.placeholder?_this.attrs.ww.placeholder:"",value:_this.attrs.ww&&_this.attrs.ww.value?_this.attrs.ww.value:"",rows:String(_this.attrs.ww&&_this.attrs.ww.rows?_this.attrs.ww.rows:1),disabled:_this.attrs.ww&&_this.attrs.ww.disabled===true?true:null,readOnly:_this.attrs.ww&&_this.attrs.ww.readOnly===true?true:null,onkeydown:function(e){if(e.key.length===1){var value=e.target.value||"";if(!_this.values.match.test(e.key)||value.length>_this.values.length)e.preventDefault()}},oninput:dispatchInput(_this),autofocus:_this.attrs.ww&&_this.attrs.ww.focus?true:undefined,onfocus:function(){if(_this.attrs.ww&&_this.attrs.ww.onFocusGained)_this.attrs.ww.onFocusGained(new focus_1.FocusGainedEvent(__2.getName(_this.attrs)))},onblur:function(){if(_this.attrs.ww&&_this.attrs.ww.onFocusLost)_this.attrs.ww.onFocusLost(new focus_1.FocusLostEvent(__2.getName(_this.attrs)))}};return _this}TextInput.prototype.rendered=function(){if(this.values.autofocus===true)this.focus()};TextInput.prototype.focus=function(){var _this=this;return timer_1.tick(function(){return focus_1.focus(_this.view,_this.values.control.wml.id)})};return TextInput}(__2.AbstractControl);exports.TextInput=TextInput;var dispatchInput=function(i){return function(e){if(i.attrs.ww&&i.attrs.ww.onChange)i.attrs.ww.onChange(new TextChangedEvent(i.attrs&&i.attrs.ww.name?i.attrs.ww.name:"",e.target.value))}}},{"../":65,"../../":78,"../../content/orientation":46,"../../content/size":47,"../../util":89,"../focus":61,"./wml/text-input":75,"@quenk/noni/lib/control/timer":20}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Textarea=function(){function Textarea(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("textarea",{wml:{id:__context.values.control.wml.id},id:__context.values.id,name:__context.values.name,placeholder:__context.values.placeholder,oninput:__context.values.oninput,value:__context.values.value,disabled:__context.values.disabled,readonly:__context.values.readOnly,rows:__context.values.rows,class:__context.values.className},[document.createTextNode(__context.values.value)])}}Textarea.prototype.registerView=function(v){this.views.push(v);return v};Textarea.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Textarea.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Textarea.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Textarea.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Textarea.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Textarea.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Textarea.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Textarea}();exports.Textarea=Textarea;var Input=function(){function Input(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("input",{wml:{id:__context.values.control.wml.id},id:__context.values.id,name:__context.values.name,type:__context.values.type,min:__context.values.min,max:__context.values.max,placeholder:__context.values.placeholder,oninput:__context.values.oninput,onkeydown:__context.values.onkeydown,autofocus:__context.values.autofocus,value:__context.values.value,disabled:__context.values.disabled,readonly:__context.values.readOnly,class:__context.values.className},[])}}Input.prototype.registerView=function(v){this.views.push(v);return v};Input.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Input.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Input.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Input.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Input.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Input.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Input.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Input}();exports.Input=Input},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],76:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/toolbar");var wml_1=require("@quenk/wml");var util_1=require("../../util");var __1=require("../../");exports.TOOLBAR="ww-toolbar";exports.TOOLBAR_COMPAT="-toolbar-compat";var Toolbar=function(_super){__extends(Toolbar,_super);function Toolbar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={root:{id:__1.getId(_this.attrs),className:util_1.concat(exports.TOOLBAR,__1.getClassName(_this.attrs))}};return _this}return Toolbar}(wml_1.Component);exports.Toolbar=Toolbar},{"../../":78,"../../util":89,"./wml/toolbar":77,"@quenk/wml":91}],77:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{id:__context.values.root.id,class:__context.values.root.className},__spreadArrays(__context.children))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getId=function(attrs){return attrs.ww&&attrs.ww.id?attrs.ww.id:""};exports.getClassName=function(attrs){return attrs.ww&&attrs.ww.className?attrs.ww.className:""};exports.text=function(str){return document.createTextNode(String(str==null?"":str))}},{}],79:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var views=require("./wml/grid");var util_1=require("../../util");var __1=require("../");exports.GRID_LAYOUT="ww-grid-layout";exports.GRID_LAYOUT_ROW="ww-grid-layout__row";exports.GRID_LAYOUT_COLUMN="ww-grid-layout__column";var GridLayout=function(_super){__extends(GridLayout,_super);function GridLayout(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.GridLayout(_this);_this.values={content:{id:_this.attrs.ww&&_this.attrs.ww.id,wml:{id:"root"},className:function(){var c=_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"";return util_1.concat(exports.GRID_LAYOUT,__1.LAYOUT,c)}}};return _this}return GridLayout}(__1.AbstractLayout);exports.GridLayout=GridLayout;var Row=function(_super){__extends(Row,_super);function Row(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Row(_this);_this.values={content:{id:_this.attrs.ww&&_this.attrs.ww.id,wml:{id:"row"},className:function(){var c=_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"";return util_1.concat(exports.GRID_LAYOUT_ROW,c)}}};return _this}return Row}(__1.AbstractLayout);exports.Row=Row;var Column=function(_super){__extends(Column,_super);function Column(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Column(_this);_this.values={content:{id:_this.attrs.ww&&_this.attrs.ww.id,wml:{id:"column"},className:function(){if(_this.attrs.ww!=null){return util_1.concat(exports.GRID_LAYOUT_COLUMN,_this.attrs.ww.span?"-span"+_this.attrs.ww.span:"-span12",_this.attrs.ww.offset?"-offset"+_this.attrs.ww.offset:"",_this.attrs.ww.className)}else{return util_1.concat(exports.GRID_LAYOUT_COLUMN,"-span12")}}}};return _this}return Column}(__1.AbstractLayout);exports.Column=Column},{"../":81,"../../util":89,"./wml/grid":80}],80:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var GridLayout=function(){function GridLayout(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.wml.id},id:__context.values.content.id,class:__context.values.content.className()},__spreadArrays(__context.children))}}GridLayout.prototype.registerView=function(v){this.views.push(v);return v};GridLayout.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};GridLayout.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};GridLayout.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};GridLayout.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};GridLayout.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};GridLayout.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};GridLayout.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return GridLayout}();exports.GridLayout=GridLayout;var Row=function(){function Row(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.wml.id},id:__context.values.content.id,class:__context.values.content.className()},__spreadArrays(__context.children))}}Row.prototype.registerView=function(v){this.views.push(v);return v};Row.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Row.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Row.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Row.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Row.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Row.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Row.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Row}();exports.Row=Row;var Column=function(){function Column(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.wml.id},id:__context.values.content.id,class:__context.values.content.className()},__spreadArrays(__context.children))}}Column.prototype.registerView=function(v){this.views.push(v);return v};Column.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Column.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Column.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Column.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Column.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Column.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Column.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Column}();exports.Column=Column},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],81:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml_1=require("@quenk/wml");var util_1=require("../util");exports.LAYOUT="-layout";var AbstractLayout=function(_super){__extends(AbstractLayout,_super);function AbstractLayout(){return _super!==null&&_super.apply(this,arguments)||this}AbstractLayout.prototype.setContent=function(c){exports.doSetContent(this.view,this.values.content.wml.id,c);return this};AbstractLayout.prototype.removeContent=function(){exports.doRemoveContent(this.view,this.values.content.wml.id);return this};return AbstractLayout}(wml_1.Component);exports.AbstractLayout=AbstractLayout;exports.doSetContent=function(view,id,content){var maybeRoot=view.findById(id);if(maybeRoot.isNothing())return util_1.warnMissing(view,id);var n=maybeRoot.get();while(n.firstChild)n.removeChild(n.firstChild);for(var i=0;i<content.length;i++)n.appendChild(content[i])};exports.doRemoveContent=function(view,id){var maybeNode=view.findById(id);if(maybeNode.isNothing())return util_1.warnMissing(view,id);var n=maybeNode.get();while(n.firstChild)n.removeChild(n.firstChild)}},{"../util":89,"@quenk/wml":91}],82:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var style=require("../../content/style");var views=require("./wml/panel");var util_1=require("../../util");var __1=require("..");exports.PANEL="ww-panel";exports.PANEL_HEADER="ww-panel__header";exports.PANEL_BODY="ww-panel__body";exports.PANEL_FOOTER="ww-panel__footer";var Panel=function(_super){__extends(Panel,_super);function Panel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Panel(_this);_this.values={content:{id:_this.attrs.ww&&_this.attrs.ww.id,wml:{id:"panel"},className:util_1.concat(exports.PANEL,__1.LAYOUT,_this.attrs.ww&&_this.attrs.ww.style?"-"+_this.attrs.ww.style:style.DEFAULT,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"")}};return _this}return Panel}(__1.AbstractLayout);exports.Panel=Panel;var PanelHeader=function(_super){__extends(PanelHeader,_super);function PanelHeader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.PanelHeader(_this);_this.values={content:{wml:{id:"header"},id:_this.attrs.ww&&_this.attrs.ww.id,className:util_1.concat(exports.PANEL_HEADER,__1.LAYOUT,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"")}};return _this}return PanelHeader}(__1.AbstractLayout);exports.PanelHeader=PanelHeader;var PanelBody=function(_super){__extends(PanelBody,_super);function PanelBody(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.PanelBody(_this);_this.values={content:{wml:{id:"body"},id:_this.attrs.ww&&_this.attrs.ww.id,className:util_1.concat(exports.PANEL_BODY,__1.LAYOUT,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"")}};return _this}return PanelBody}(__1.AbstractLayout);exports.PanelBody=PanelBody;var PanelFooter=function(_super){__extends(PanelFooter,_super);function PanelFooter(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.PanelFooter(_this);_this.values={content:{wml:{id:"footer"},id:_this.attrs.ww&&_this.attrs.ww.id,className:util_1.concat(exports.PANEL_FOOTER,__1.LAYOUT,_this.attrs.ww&&_this.attrs.ww.className?_this.attrs.ww.className:"")}};return _this}return PanelFooter}(__1.AbstractLayout);exports.PanelFooter=PanelFooter},{"..":81,"../../content/style":51,"../../util":89,"./wml/panel":83}],83:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Panel=function(){function Panel(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.id},class:__context.values.content.className},__spreadArrays(__context.children))}}Panel.prototype.registerView=function(v){this.views.push(v);return v};Panel.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Panel.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Panel.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Panel.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Panel.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Panel.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Panel.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Panel}();exports.Panel=Panel;var PanelHeader=function(){function PanelHeader(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.id},class:__context.values.content.className},__spreadArrays(__context.children))}}PanelHeader.prototype.registerView=function(v){this.views.push(v);return v};PanelHeader.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PanelHeader.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PanelHeader.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PanelHeader.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PanelHeader.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PanelHeader.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PanelHeader.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PanelHeader}();exports.PanelHeader=PanelHeader;var PanelBody=function(){function PanelBody(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.id},class:__context.values.content.className},__spreadArrays(__context.children))}}PanelBody.prototype.registerView=function(v){this.views.push(v);return v};PanelBody.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PanelBody.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PanelBody.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PanelBody.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PanelBody.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PanelBody.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PanelBody.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PanelBody}();exports.PanelBody=PanelBody;var PanelFooter=function(){function PanelFooter(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("div",{wml:{id:__context.values.content.id},class:__context.values.content.className},__spreadArrays(__context.children))}}PanelFooter.prototype.registerView=function(v){this.views.push(v);return v};PanelFooter.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PanelFooter.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PanelFooter.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PanelFooter.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PanelFooter.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PanelFooter.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PanelFooter.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PanelFooter}();exports.PanelFooter=PanelFooter},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],84:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wml=require("@quenk/wml");var views=require("./wml/item");var active_1=require("../../content/state/active");var active_2=require("../../content/state/active");var util_1=require("../../util");exports.ITEM="ww-menu-item";exports.DIVIDER="-divider";var ItemClickedEvent=function(){function ItemClickedEvent(name){this.name=name}return ItemClickedEvent}();exports.ItemClickedEvent=ItemClickedEvent;var Item=function(_super){__extends(Item,_super);function Item(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new views.Main(_this);_this.values={root:{wml:{id:"root"},id:_this.attrs.ww&&_this.attrs.ww.id?_this.attrs.ww.id:"",className:util_1.concat(exports.ITEM,_this.attrs.ww&&_this.attrs.ww.active?active_2.ACTIVE:"",_this.attrs.ww&&_this.attrs.ww.divider?exports.DIVIDER:""),content:{render:function(){if(_this.attrs.ww&&_this.attrs.ww.divider)return[];else if(_this.attrs.ww&&_this.attrs.ww.text)return[document.createTextNode(_this.attrs.ww.text)];else return _this.children}}}};return _this}Item.prototype.activate=function(){active_1.activate(this.view,this.values.root.wml.id);return this};Item.prototype.deactivate=function(){active_1.deactivate(this.view,this.values.root.wml.id);return this};return Item}(wml.Component);exports.Item=Item},{"../../content/state/active":48,"../../util":89,"./wml/item":85,"@quenk/wml":91}],85:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("li",{wml:{id:__context.values.root.wml.id},id:__context.values.root.id,class:__context.values.root.className},__spreadArrays(__context.values.root.content.render()))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],86:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var hidden=require("../../content/state/hidden");var headerViews=require("./wml/header");var wml_1=require("@quenk/wml");var util_1=require("../../util");var orientation_1=require("../../content/orientation");var __1=require("../../");var menu_1=require("./wml/menu");exports.MENU="ww-menu";exports.MENU_HEADER_ITEM="ww-menu__header-item";exports.NAV_MODE="nav";exports.CONTENT_MODE="content";var HeaderItem=function(_super){__extends(HeaderItem,_super);function HeaderItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new headerViews.Main(_this);_this.values={root:{className:util_1.concat(exports.MENU_HEADER_ITEM,__1.getClassName(_this.attrs)),content:_this.attrs.ww&&_this.attrs.ww.text?[__1.text(_this.attrs.ww.text)]:_this.children}};return _this}return HeaderItem}(wml_1.Component);exports.HeaderItem=HeaderItem;var Menu=function(_super){__extends(Menu,_super);function Menu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.view=new menu_1.Main(_this);_this.values={root:{wml:{id:"root"},id:__1.getId(_this.attrs),className:util_1.concat(exports.MENU,__1.getClassName(_this.attrs),_this.attrs.ww&&_this.attrs.ww.hidden?hidden.HIDDEN:"",_this.attrs.ww&&_this.attrs.ww.block?orientation_1.BLOCK:"")},menu:{id:"menu"},content:function(){return _this.children}};return _this}Menu.prototype.isHidden=function(){return hidden.isHidden(this.view,this.values.root.wml.id)};Menu.prototype.hide=function(){hidden.hide(this.view,this.values.root.wml.id);return this};Menu.prototype.show=function(){hidden.show(this.view,this.values.root.wml.id);return this};Menu.prototype.toggle=function(){hidden.toggle(this.view,this.values.root.wml.id);return this};Menu.prototype.setContent=function(content){this.values.content=function(){return content};this.view.invalidate();this.show();return this};return Menu}(wml_1.Component);exports.Menu=Menu},{"../../":78,"../../content/orientation":46,"../../content/state/hidden":50,"../../util":89,"./wml/header":87,"./wml/menu":88,"@quenk/wml":91}],87:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("li",{class:__context.values.root.className},__spreadArrays(__context.values.root.content))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],88:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var Main=function(){function Main(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("ul",{wml:{id:__context.values.root.wml.id},id:__context.values.root.id,class:__context.values.root.className},__spreadArrays(__context.values.content()))}}Main.prototype.registerView=function(v){this.views.push(v);return v};Main.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};Main.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};Main.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};Main.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};Main.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};Main.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};Main.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return Main}();exports.Main=Main},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml/lib/dom":90}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getById=function(view,id){var m=view.findById(id);if(m.isNothing()){exports.warnMissing(view,id)}return m};exports.warnMissing=function(view,id){console.warn("The view ",view,' does not have an id "'+id+'"!')};exports.combine=function(str,joiner){if(joiner===void 0){joiner=" "}return str.filter(function(s){return s!=null||s!=""}).join(joiner)};exports.concat=function(){var str=[];for(var _i=0;_i<arguments.length;_i++){str[_i]=arguments[_i]}return str.filter(function(s){return s==null||s==""?false:true}).map(function(s){return s.trim()}).join(" ")};exports.noop=function(){};exports.replaceContent=function(r,node){while(node.lastChild)node.removeChild(node.lastChild);node.appendChild(r.render())};exports.debounce=function(f,delay){var timer=-1;return delay===0?f:function(a){if(timer===-1){timer=window.setTimeout(function(){return f(a)},delay)}else{clearTimeout(timer);timer=window.setTimeout(function(){return f(a)},delay)}}}},{}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ATTRS_ESC_REGEX=/[><&\u2028\u2029]/g;var HTML_ESC_REGEX=/["'&<>]/;var ATTR_ESC_MAP={"&":"\\u0026",">":"\\u003e","<":"\\u003c",'"':"\\u0022","\u2028":"\\u2028","\u2029":"\\u2029"};var HTML_ENT_MAP={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;"};var voidElements=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var SSRText=function(){function SSRText(value){this.value=value}SSRText.prototype.renderToString=function(){return escapeHTML(this.value)};return SSRText}();exports.SSRText=SSRText;var SSRElement=function(){function SSRElement(name){this.name=name;this.attrs=[];this.children=[]}SSRElement.prototype.setAttribute=function(key,value){var newKey=escapeAttrValue(key);this.attrs.push(value===""?newKey:newKey+'="'+escapeAttrValue(value)+'"')};SSRElement.prototype.appendChild=function(node){this.children.push(node)};SSRElement.prototype.renderToString=function(){var name=this.name;var childs=this.children.map(function(c){return c.renderToString()}).join("");var attrs=this.attrs.join(" ");var open="<"+name+" "+attrs+">";return voidElements.indexOf(name)>-1?open:"<"+open+">"+childs+"</"+name+">"};return SSRElement}();exports.SSRElement=SSRElement;var isBrowser=window!=null&&document!=null;var escapeAttrValue=function(value){return value.replace(ATTRS_ESC_REGEX,function(hit){return ATTR_ESC_MAP[hit]})};var escapeHTML=function(value){return value.replace(HTML_ESC_REGEX,function(hit){return HTML_ENT_MAP[hit]})};exports.createTextNode=function(txt){return isBrowser?document.createTextNode(txt):new SSRText(txt)};exports.createElement=function(name){return isBrowser?document.createElement(name):new SSRElement(name)}},{}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Component=function(){function Component(attrs,children){this.attrs=attrs;this.children=children}Component.prototype.rendered=function(){};Component.prototype.removed=function(){};Component.prototype.render=function(){return this.view.render()};return Component}();exports.Component=Component;exports.renderAsNode=function(r){return r.render()}},{}],92:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],93:[function(require,module,exports){},{}],94:[function(require,module,exports){(function(Buffer){(function(){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);buf.__proto__=Buffer.prototype;return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}buf.__proto__=Buffer.prototype;return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}}).call(this)}).call(this,require("buffer").Buffer)},{"base64-js":92,buffer:94,ieee754:121}],95:[function(require,module,exports){"use strict";var isMergeableObject=function isMergeableObject(value){return isNonNullObject(value)&&!isSpecial(value)};function isNonNullObject(value){return!!value&&typeof value==="object"}function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return stringValue==="[object RegExp]"||stringValue==="[object Date]"||isReactElement(value)}var canUseSymbol=typeof Symbol==="function"&&Symbol.for;var REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(val){return Array.isArray(val)?[]:{}}function cloneUnlessOtherwiseSpecified(value,options){return options.clone!==false&&options.isMergeableObject(value)?deepmerge(emptyTarget(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map(function(element){return cloneUnlessOtherwiseSpecified(element,options)})}function getMergeFunction(key,options){if(!options.customMerge){return deepmerge}var customMerge=options.customMerge(key);return typeof customMerge==="function"?customMerge:deepmerge}function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter(function(symbol){return target.propertyIsEnumerable(symbol)}):[]}function getKeys(target){return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return false}}function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))}function mergeObject(target,source,options){var destination={};if(options.isMergeableObject(target)){getKeys(target).forEach(function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})}getKeys(source).forEach(function(key){if(propertyIsUnsafe(target,key)){return}if(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])){destination[key]=getMergeFunction(key,options)(target[key],source[key],options)}else{destination[key]=cloneUnlessOtherwiseSpecified(source[key],options)}});return destination}function deepmerge(target,source,options){options=options||{};options.arrayMerge=options.arrayMerge||defaultArrayMerge;options.isMergeableObject=options.isMergeableObject||isMergeableObject;options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);var targetIsArray=Array.isArray(target);var sourceAndTargetTypesMatch=sourceIsArray===targetIsArray;if(!sourceAndTargetTypesMatch){return cloneUnlessOtherwiseSpecified(source,options)}else if(sourceIsArray){return options.arrayMerge(target,source,options)}else{return mergeObject(target,source,options)}}deepmerge.all=function deepmergeAll(array,options){if(!Array.isArray(array)){throw new Error("first argument should be an array")}return array.reduce(function(prev,next){return deepmerge(prev,next,options)},{})};var deepmerge_1=deepmerge;module.exports=deepmerge_1},{}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.attributeNames=exports.elementNames=void 0;exports.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);exports.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},{}],97:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});var ElementType=__importStar(require("domelementtype"));var entities_1=require("entities");var foreignNames_1=require("./foreignNames");var unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function formatAttributes(attributes,opts){if(!attributes)return;return Object.keys(attributes).map(function(key){var _a,_b;var value=(_a=attributes[key])!==null&&_a!==void 0?_a:"";if(opts.xmlMode==="foreign"){key=(_b=foreignNames_1.attributeNames.get(key))!==null&&_b!==void 0?_b:key}if(!opts.emptyAttrs&&!opts.xmlMode&&value===""){return key}return key+'="'+(opts.decodeEntities!==false?entities_1.encodeXML(value):value.replace(/"/g,"&quot;"))+'"'}).join(" ")}var singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render(node,options){if(options===void 0){options={}}var nodes=Array.isArray(node)||node.cheerio?node:[node];var output="";for(var i=0;i<nodes.length;i++){output+=renderNode(nodes[i],options)}return output}exports.default=render;function renderNode(node,options){switch(node.type){case ElementType.Root:return render(node.children,options);case ElementType.Directive:case ElementType.Doctype:return renderDirective(node);case ElementType.Comment:return renderComment(node);case ElementType.CDATA:return renderCdata(node);case ElementType.Script:case ElementType.Style:case ElementType.Tag:return renderTag(node,options);case ElementType.Text:return renderText(node,options)}}var foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]);var foreignElements=new Set(["svg","math"]);function renderTag(elem,opts){var _a;if(opts.xmlMode==="foreign"){elem.name=(_a=foreignNames_1.elementNames.get(elem.name))!==null&&_a!==void 0?_a:elem.name;if(elem.parent&&foreignModeIntegrationPoints.has(elem.parent.name)){opts=__assign(__assign({},opts),{xmlMode:false})}}if(!opts.xmlMode&&foreignElements.has(elem.name)){opts=__assign(__assign({},opts),{xmlMode:"foreign"})}var tag="<"+elem.name;var attribs=formatAttributes(elem.attribs,opts);if(attribs){tag+=" "+attribs}if(elem.children.length===0&&(opts.xmlMode?opts.selfClosingTags!==false:opts.selfClosingTags&&singleTag.has(elem.name))){if(!opts.xmlMode)tag+=" ";tag+="/>"}else{tag+=">";if(elem.children.length>0){tag+=render(elem.children,opts)}if(opts.xmlMode||!singleTag.has(elem.name)){tag+="</"+elem.name+">"}}return tag}function renderDirective(elem){return"<"+elem.data+">"}function renderText(elem,opts){var data=elem.data||"";if(opts.decodeEntities!==false&&!(!opts.xmlMode&&elem.parent&&unencodedElements.has(elem.parent.name))){data=entities_1.encodeXML(data)}return data}function renderCdata(elem){return"<![CDATA["+elem.children[0].data+"]]>"}function renderComment(elem){return"\x3c!--"+elem.data+"--\x3e"}},{"./foreignNames":96,domelementtype:98,entities:111}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Doctype=exports.CDATA=exports.Tag=exports.Style=exports.Script=exports.Comment=exports.Directive=exports.Text=exports.Root=exports.isTag=exports.ElementType=void 0;var ElementType;(function(ElementType){ElementType["Root"]="root";ElementType["Text"]="text";ElementType["Directive"]="directive";ElementType["Comment"]="comment";ElementType["Script"]="script";ElementType["Style"]="style";ElementType["Tag"]="tag";ElementType["CDATA"]="cdata";ElementType["Doctype"]="doctype"})(ElementType=exports.ElementType||(exports.ElementType={}));function isTag(elem){return elem.type===ElementType.Tag||elem.type===ElementType.Script||elem.type===ElementType.Style}exports.isTag=isTag;exports.Root=ElementType.Root;exports.Text=ElementType.Text;exports.Directive=ElementType.Directive;exports.Comment=ElementType.Comment;exports.Script=ElementType.Script;exports.Style=ElementType.Style;exports.Tag=ElementType.Tag;exports.CDATA=ElementType.CDATA;exports.Doctype=ElementType.Doctype},{}],99:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports,p))__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:true});exports.DomHandler=void 0;var domelementtype_1=require("domelementtype");var node_1=require("./node");__exportStar(require("./node"),exports);var reWhitespace=/\s+/g;var defaultOpts={normalizeWhitespace:false,withStartIndices:false,withEndIndices:false};var DomHandler=function(){function DomHandler(callback,options,elementCB){this.dom=[];this.root=new node_1.Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null;if(typeof options==="function"){elementCB=options;options=defaultOpts}if(typeof callback==="object"){options=callback;callback=undefined}this.callback=callback!==null&&callback!==void 0?callback:null;this.options=options!==null&&options!==void 0?options:defaultOpts;this.elementCB=elementCB!==null&&elementCB!==void 0?elementCB:null}DomHandler.prototype.onparserinit=function(parser){this.parser=parser};DomHandler.prototype.onreset=function(){var _a;this.dom=[];this.root=new node_1.Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=(_a=this.parser)!==null&&_a!==void 0?_a:null};DomHandler.prototype.onend=function(){if(this.done)return;this.done=true;this.parser=null;this.handleCallback(null)};DomHandler.prototype.onerror=function(error){this.handleCallback(error)};DomHandler.prototype.onclosetag=function(){this.lastNode=null;var elem=this.tagStack.pop();if(this.options.withEndIndices){elem.endIndex=this.parser.endIndex}if(this.elementCB)this.elementCB(elem)};DomHandler.prototype.onopentag=function(name,attribs){var type=this.options.xmlMode?domelementtype_1.ElementType.Tag:undefined;var element=new node_1.Element(name,attribs,undefined,type);this.addNode(element);this.tagStack.push(element)};DomHandler.prototype.ontext=function(data){var normalizeWhitespace=this.options.normalizeWhitespace;var lastNode=this.lastNode;if(lastNode&&lastNode.type===domelementtype_1.ElementType.Text){if(normalizeWhitespace){lastNode.data=(lastNode.data+data).replace(reWhitespace," ")}else{lastNode.data+=data}}else{if(normalizeWhitespace){data=data.replace(reWhitespace," ")}var node=new node_1.Text(data);this.addNode(node);this.lastNode=node}};DomHandler.prototype.oncomment=function(data){if(this.lastNode&&this.lastNode.type===domelementtype_1.ElementType.Comment){this.lastNode.data+=data;return}var node=new node_1.Comment(data);this.addNode(node);this.lastNode=node};DomHandler.prototype.oncommentend=function(){this.lastNode=null};DomHandler.prototype.oncdatastart=function(){var text=new node_1.Text("");var node=new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA,[text]);this.addNode(node);text.parent=node;this.lastNode=text};DomHandler.prototype.oncdataend=function(){this.lastNode=null};DomHandler.prototype.onprocessinginstruction=function(name,data){var node=new node_1.ProcessingInstruction(name,data);this.addNode(node)};DomHandler.prototype.handleCallback=function(error){if(typeof this.callback==="function"){this.callback(error,this.dom)}else if(error){throw error}};DomHandler.prototype.addNode=function(node){var parent=this.tagStack[this.tagStack.length-1];var previousSibling=parent.children[parent.children.length-1];if(this.options.withStartIndices){node.startIndex=this.parser.startIndex}if(this.options.withEndIndices){node.endIndex=this.parser.endIndex}parent.children.push(node);if(previousSibling){node.prev=previousSibling;previousSibling.next=node}node.parent=parent;this.lastNode=null};return DomHandler}();exports.DomHandler=DomHandler;exports.default=DomHandler},{"./node":100,domelementtype:98}],100:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:true});exports.cloneNode=exports.hasChildren=exports.isDocument=exports.isDirective=exports.isComment=exports.isText=exports.isCDATA=exports.isTag=exports.Element=exports.Document=exports.NodeWithChildren=exports.ProcessingInstruction=exports.Comment=exports.Text=exports.DataNode=exports.Node=void 0;var domelementtype_1=require("domelementtype");var nodeTypes=new Map([[domelementtype_1.ElementType.Tag,1],[domelementtype_1.ElementType.Script,1],[domelementtype_1.ElementType.Style,1],[domelementtype_1.ElementType.Directive,1],[domelementtype_1.ElementType.Text,3],[domelementtype_1.ElementType.CDATA,4],[domelementtype_1.ElementType.Comment,8],[domelementtype_1.ElementType.Root,9]]);var Node=function(){function Node(type){this.type=type;this.parent=null;this.prev=null;this.next=null;this.startIndex=null;this.endIndex=null}Object.defineProperty(Node.prototype,"nodeType",{get:function(){var _a;return(_a=nodeTypes.get(this.type))!==null&&_a!==void 0?_a:1},enumerable:false,configurable:true});Object.defineProperty(Node.prototype,"parentNode",{get:function(){return this.parent},set:function(parent){this.parent=parent},enumerable:false,configurable:true});Object.defineProperty(Node.prototype,"previousSibling",{get:function(){return this.prev},set:function(prev){this.prev=prev},enumerable:false,configurable:true});Object.defineProperty(Node.prototype,"nextSibling",{get:function(){return this.next},set:function(next){this.next=next},enumerable:false,configurable:true});Node.prototype.cloneNode=function(recursive){if(recursive===void 0){recursive=false}return cloneNode(this,recursive)};return Node}();exports.Node=Node;var DataNode=function(_super){__extends(DataNode,_super);function DataNode(type,data){var _this=_super.call(this,type)||this;_this.data=data;return _this}Object.defineProperty(DataNode.prototype,"nodeValue",{get:function(){return this.data},set:function(data){this.data=data},enumerable:false,configurable:true});return DataNode}(Node);exports.DataNode=DataNode;var Text=function(_super){__extends(Text,_super);function Text(data){return _super.call(this,domelementtype_1.ElementType.Text,data)||this}return Text}(DataNode);exports.Text=Text;var Comment=function(_super){__extends(Comment,_super);function Comment(data){return _super.call(this,domelementtype_1.ElementType.Comment,data)||this}return Comment}(DataNode);exports.Comment=Comment;var ProcessingInstruction=function(_super){__extends(ProcessingInstruction,_super);function ProcessingInstruction(name,data){var _this=_super.call(this,domelementtype_1.ElementType.Directive,data)||this;_this.name=name;return _this}return ProcessingInstruction}(DataNode);exports.ProcessingInstruction=ProcessingInstruction;var NodeWithChildren=function(_super){__extends(NodeWithChildren,_super);function NodeWithChildren(type,children){var _this=_super.call(this,type)||this;_this.children=children;return _this}Object.defineProperty(NodeWithChildren.prototype,"firstChild",{get:function(){var _a;return(_a=this.children[0])!==null&&_a!==void 0?_a:null},enumerable:false,configurable:true});Object.defineProperty(NodeWithChildren.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:false,configurable:true});Object.defineProperty(NodeWithChildren.prototype,"childNodes",{get:function(){return this.children},set:function(children){this.children=children},enumerable:false,configurable:true});return NodeWithChildren}(Node);exports.NodeWithChildren=NodeWithChildren;var Document=function(_super){__extends(Document,_super);function Document(children){return _super.call(this,domelementtype_1.ElementType.Root,children)||this}return Document}(NodeWithChildren);exports.Document=Document;var Element=function(_super){__extends(Element,_super);function Element(name,attribs,children,type){if(children===void 0){children=[]}if(type===void 0){type=name==="script"?domelementtype_1.ElementType.Script:name==="style"?domelementtype_1.ElementType.Style:domelementtype_1.ElementType.Tag}var _this=_super.call(this,type,children)||this;_this.name=name;_this.attribs=attribs;return _this}Object.defineProperty(Element.prototype,"tagName",{get:function(){return this.name},set:function(name){this.name=name},enumerable:false,configurable:true});Object.defineProperty(Element.prototype,"attributes",{get:function(){var _this=this;return Object.keys(this.attribs).map(function(name){var _a,_b;return{name:name,value:_this.attribs[name],namespace:(_a=_this["x-attribsNamespace"])===null||_a===void 0?void 0:_a[name],prefix:(_b=_this["x-attribsPrefix"])===null||_b===void 0?void 0:_b[name]}})},enumerable:false,configurable:true});return Element}(NodeWithChildren);exports.Element=Element;function isTag(node){return domelementtype_1.isTag(node)}exports.isTag=isTag;function isCDATA(node){return node.type===domelementtype_1.ElementType.CDATA}exports.isCDATA=isCDATA;function isText(node){return node.type===domelementtype_1.ElementType.Text}exports.isText=isText;function isComment(node){return node.type===domelementtype_1.ElementType.Comment}exports.isComment=isComment;function isDirective(node){return node.type===domelementtype_1.ElementType.Directive}exports.isDirective=isDirective;function isDocument(node){return node.type===domelementtype_1.ElementType.Root}exports.isDocument=isDocument;function hasChildren(node){return Object.prototype.hasOwnProperty.call(node,"children")}exports.hasChildren=hasChildren;function cloneNode(node,recursive){if(recursive===void 0){recursive=false}var result;if(isText(node)){result=new Text(node.data)}else if(isComment(node)){result=new Comment(node.data)}else if(isTag(node)){var children=recursive?cloneChildren(node.children):[];var clone_1=new Element(node.name,__assign({},node.attribs),children);children.forEach(function(child){return child.parent=clone_1});if(node["x-attribsNamespace"]){clone_1["x-attribsNamespace"]=__assign({},node["x-attribsNamespace"])}if(node["x-attribsPrefix"]){clone_1["x-attribsPrefix"]=__assign({},node["x-attribsPrefix"])}result=clone_1}else if(isCDATA(node)){var children=recursive?cloneChildren(node.children):[];var clone_2=new NodeWithChildren(domelementtype_1.ElementType.CDATA,children);children.forEach(function(child){return child.parent=clone_2});result=clone_2}else if(isDocument(node)){var children=recursive?cloneChildren(node.children):[];var clone_3=new Document(children);children.forEach(function(child){return child.parent=clone_3});if(node["x-mode"]){clone_3["x-mode"]=node["x-mode"]}result=clone_3}else if(isDirective(node)){var instruction=new ProcessingInstruction(node.name,node.data);if(node["x-name"]!=null){instruction["x-name"]=node["x-name"];instruction["x-publicId"]=node["x-publicId"];instruction["x-systemId"]=node["x-systemId"]}result=instruction}else{throw new Error("Not implemented yet: "+node.type)}result.startIndex=node.startIndex;result.endIndex=node.endIndex;return result}exports.cloneNode=cloneNode;function cloneChildren(childs){var children=childs.map(function(child){return cloneNode(child,true)});for(var i=1;i<children.length;i++){children[i].prev=children[i-1];children[i-1].next=children[i]}return children}},{domelementtype:98}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqueSort=exports.compareDocumentPosition=exports.removeSubsets=void 0;var domhandler_1=require("domhandler");function removeSubsets(nodes){var idx=nodes.length;while(--idx>=0){var node=nodes[idx];if(idx>0&&nodes.lastIndexOf(node,idx-1)>=0){nodes.splice(idx,1);continue}for(var ancestor=node.parent;ancestor;ancestor=ancestor.parent){if(nodes.includes(ancestor)){nodes.splice(idx,1);break}}}return nodes}exports.removeSubsets=removeSubsets;function compareDocumentPosition(nodeA,nodeB){var aParents=[];var bParents=[];if(nodeA===nodeB){return 0}var current=domhandler_1.hasChildren(nodeA)?nodeA:nodeA.parent;while(current){aParents.unshift(current);current=current.parent}current=domhandler_1.hasChildren(nodeB)?nodeB:nodeB.parent;while(current){bParents.unshift(current);current=current.parent}var maxIdx=Math.min(aParents.length,bParents.length);var idx=0;while(idx<maxIdx&&aParents[idx]===bParents[idx]){idx++}if(idx===0){return 1}var sharedParent=aParents[idx-1];var siblings=sharedParent.children;var aSibling=aParents[idx];var bSibling=bParents[idx];if(siblings.indexOf(aSibling)>siblings.indexOf(bSibling)){if(sharedParent===nodeB){return 4|16}return 4}if(sharedParent===nodeA){return 2|8}return 2}exports.compareDocumentPosition=compareDocumentPosition;function uniqueSort(nodes){nodes=nodes.filter(function(node,i,arr){return!arr.includes(node,i+1)});nodes.sort(function(a,b){var relative=compareDocumentPosition(a,b);if(relative&2){return-1}else if(relative&4){return 1}return 0});return nodes}exports.uniqueSort=uniqueSort},{domhandler:99}],102:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports,p))__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:true});exports.hasChildren=exports.isDocument=exports.isComment=exports.isText=exports.isCDATA=exports.isTag=void 0;__exportStar(require("./stringify"),exports);__exportStar(require("./traversal"),exports);__exportStar(require("./manipulation"),exports);__exportStar(require("./querying"),exports);__exportStar(require("./legacy"),exports);__exportStar(require("./helpers"),exports);var domhandler_1=require("domhandler");Object.defineProperty(exports,"isTag",{enumerable:true,get:function(){return domhandler_1.isTag}});Object.defineProperty(exports,"isCDATA",{enumerable:true,get:function(){return domhandler_1.isCDATA}});Object.defineProperty(exports,"isText",{enumerable:true,get:function(){return domhandler_1.isText}});Object.defineProperty(exports,"isComment",{enumerable:true,get:function(){return domhandler_1.isComment}});Object.defineProperty(exports,"isDocument",{enumerable:true,get:function(){return domhandler_1.isDocument}});Object.defineProperty(exports,"hasChildren",{enumerable:true,get:function(){return domhandler_1.hasChildren}})},{"./helpers":101,"./legacy":103,"./manipulation":104,"./querying":105,"./stringify":106,"./traversal":107,domhandler:99}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getElementsByTagType=exports.getElementsByTagName=exports.getElementById=exports.getElements=exports.testElement=void 0;var domhandler_1=require("domhandler");var querying_1=require("./querying");var Checks={tag_name:function(name){if(typeof name==="function"){return function(elem){return domhandler_1.isTag(elem)&&name(elem.name)}}else if(name==="*"){return domhandler_1.isTag}return function(elem){return domhandler_1.isTag(elem)&&elem.name===name}},tag_type:function(type){if(typeof type==="function"){return function(elem){return type(elem.type)}}return function(elem){return elem.type===type}},tag_contains:function(data){if(typeof data==="function"){return function(elem){return domhandler_1.isText(elem)&&data(elem.data)}}return function(elem){return domhandler_1.isText(elem)&&elem.data===data}}};function getAttribCheck(attrib,value){if(typeof value==="function"){return function(elem){return domhandler_1.isTag(elem)&&value(elem.attribs[attrib])}}return function(elem){return domhandler_1.isTag(elem)&&elem.attribs[attrib]===value}}function combineFuncs(a,b){return function(elem){return a(elem)||b(elem)}}function compileTest(options){var funcs=Object.keys(options).map(function(key){var value=options[key];return key in Checks?Checks[key](value):getAttribCheck(key,value)});return funcs.length===0?null:funcs.reduce(combineFuncs)}function testElement(options,node){var test=compileTest(options);return test?test(node):true}exports.testElement=testElement;function getElements(options,nodes,recurse,limit){if(limit===void 0){limit=Infinity}var test=compileTest(options);return test?querying_1.filter(test,nodes,recurse,limit):[]}exports.getElements=getElements;function getElementById(id,nodes,recurse){if(recurse===void 0){recurse=true}if(!Array.isArray(nodes))nodes=[nodes];return querying_1.findOne(getAttribCheck("id",id),nodes,recurse)}exports.getElementById=getElementById;function getElementsByTagName(tagName,nodes,recurse,limit){if(recurse===void 0){recurse=true}if(limit===void 0){limit=Infinity}return querying_1.filter(Checks.tag_name(tagName),nodes,recurse,limit)}exports.getElementsByTagName=getElementsByTagName;function getElementsByTagType(type,nodes,recurse,limit){if(recurse===void 0){recurse=true}if(limit===void 0){limit=Infinity}return querying_1.filter(Checks.tag_type(type),nodes,recurse,limit)}exports.getElementsByTagType=getElementsByTagType},{"./querying":105,domhandler:99}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prepend=exports.prependChild=exports.append=exports.appendChild=exports.replaceElement=exports.removeElement=void 0;function removeElement(elem){if(elem.prev)elem.prev.next=elem.next;if(elem.next)elem.next.prev=elem.prev;if(elem.parent){var childs=elem.parent.children;childs.splice(childs.lastIndexOf(elem),1)}}exports.removeElement=removeElement;function replaceElement(elem,replacement){var prev=replacement.prev=elem.prev;if(prev){prev.next=replacement}var next=replacement.next=elem.next;if(next){next.prev=replacement}var parent=replacement.parent=elem.parent;if(parent){var childs=parent.children;childs[childs.lastIndexOf(elem)]=replacement}}exports.replaceElement=replaceElement;function appendChild(elem,child){removeElement(child);child.next=null;child.parent=elem;if(elem.children.push(child)>1){var sibling=elem.children[elem.children.length-2];sibling.next=child;child.prev=sibling}else{child.prev=null}}exports.appendChild=appendChild;function append(elem,next){removeElement(next);var parent=elem.parent;var currNext=elem.next;next.next=currNext;next.prev=elem;elem.next=next;next.parent=parent;if(currNext){currNext.prev=next;if(parent){var childs=parent.children;childs.splice(childs.lastIndexOf(currNext),0,next)}}else if(parent){parent.children.push(next)}}exports.append=append;function prependChild(elem,child){removeElement(child);child.parent=elem;child.prev=null;if(elem.children.unshift(child)!==1){var sibling=elem.children[1];sibling.prev=child;child.next=sibling}else{child.next=null}}exports.prependChild=prependChild;function prepend(elem,prev){removeElement(prev);var parent=elem.parent;if(parent){var childs=parent.children;childs.splice(childs.indexOf(elem),0,prev)}if(elem.prev){elem.prev.next=prev}prev.parent=parent;prev.prev=elem.prev;prev.next=elem;elem.prev=prev}exports.prepend=prepend},{}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findAll=exports.existsOne=exports.findOne=exports.findOneChild=exports.find=exports.filter=void 0;var domhandler_1=require("domhandler");function filter(test,node,recurse,limit){if(recurse===void 0){recurse=true}if(limit===void 0){limit=Infinity}if(!Array.isArray(node))node=[node];return find(test,node,recurse,limit)}exports.filter=filter;function find(test,nodes,recurse,limit){var result=[];for(var _i=0,nodes_1=nodes;_i<nodes_1.length;_i++){var elem=nodes_1[_i];if(test(elem)){result.push(elem);if(--limit<=0)break}if(recurse&&domhandler_1.hasChildren(elem)&&elem.children.length>0){var children=find(test,elem.children,recurse,limit);result.push.apply(result,children);limit-=children.length;if(limit<=0)break}}return result}exports.find=find;function findOneChild(test,nodes){return nodes.find(test)}exports.findOneChild=findOneChild;function findOne(test,nodes,recurse){if(recurse===void 0){recurse=true}var elem=null;for(var i=0;i<nodes.length&&!elem;i++){var checked=nodes[i];if(!domhandler_1.isTag(checked)){continue}else if(test(checked)){elem=checked}else if(recurse&&checked.children.length>0){elem=findOne(test,checked.children)}}return elem}exports.findOne=findOne;function existsOne(test,nodes){return nodes.some(function(checked){return domhandler_1.isTag(checked)&&(test(checked)||checked.children.length>0&&existsOne(test,checked.children))})}exports.existsOne=existsOne;function findAll(test,nodes){var _a;var result=[];var stack=nodes.filter(domhandler_1.isTag);var elem;while(elem=stack.shift()){var children=(_a=elem.children)===null||_a===void 0?void 0:_a.filter(domhandler_1.isTag);if(children&&children.length>0){stack.unshift.apply(stack,children)}if(test(elem))result.push(elem)}return result}exports.findAll=findAll},{domhandler:99}],106:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getText=exports.getInnerHTML=exports.getOuterHTML=void 0;var domhandler_1=require("domhandler");var dom_serializer_1=__importDefault(require("dom-serializer"));function getOuterHTML(node,options){return dom_serializer_1.default(node,options)}exports.getOuterHTML=getOuterHTML;function getInnerHTML(node,options){return domhandler_1.hasChildren(node)?node.children.map(function(node){return getOuterHTML(node,options)}).join(""):""}exports.getInnerHTML=getInnerHTML;function getText(node){if(Array.isArray(node))return node.map(getText).join("");if(domhandler_1.isTag(node))return node.name==="br"?"\n":getText(node.children);if(domhandler_1.isCDATA(node))return getText(node.children);if(domhandler_1.isText(node))return node.data;return""}exports.getText=getText},{"dom-serializer":97,domhandler:99}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prevElementSibling=exports.nextElementSibling=exports.getName=exports.hasAttrib=exports.getAttributeValue=exports.getSiblings=exports.getParent=exports.getChildren=void 0;var domhandler_1=require("domhandler");var emptyArray=[];function getChildren(elem){var _a;return(_a=elem.children)!==null&&_a!==void 0?_a:emptyArray}exports.getChildren=getChildren;function getParent(elem){return elem.parent||null}exports.getParent=getParent;function getSiblings(elem){var _a,_b;var parent=getParent(elem);if(parent!=null)return getChildren(parent);var siblings=[elem];var prev=elem.prev,next=elem.next;while(prev!=null){siblings.unshift(prev);_a=prev,prev=_a.prev}while(next!=null){siblings.push(next);_b=next,next=_b.next}return siblings}exports.getSiblings=getSiblings;function getAttributeValue(elem,name){var _a;return(_a=elem.attribs)===null||_a===void 0?void 0:_a[name]}exports.getAttributeValue=getAttributeValue;function hasAttrib(elem,name){return elem.attribs!=null&&Object.prototype.hasOwnProperty.call(elem.attribs,name)&&elem.attribs[name]!=null}exports.hasAttrib=hasAttrib;function getName(elem){return elem.name}exports.getName=getName;function nextElementSibling(elem){var _a;var next=elem.next;while(next!==null&&!domhandler_1.isTag(next))_a=next,next=_a.next;return next}exports.nextElementSibling=nextElementSibling;function prevElementSibling(elem){var _a;var prev=elem.prev;while(prev!==null&&!domhandler_1.isTag(prev))_a=prev,prev=_a.prev;return prev}exports.prevElementSibling=prevElementSibling},{domhandler:99}],108:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.decodeHTML=exports.decodeHTMLStrict=exports.decodeXML=void 0;var entities_json_1=__importDefault(require("./maps/entities.json"));var legacy_json_1=__importDefault(require("./maps/legacy.json"));var xml_json_1=__importDefault(require("./maps/xml.json"));var decode_codepoint_1=__importDefault(require("./decode_codepoint"));var strictEntityRe=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;exports.decodeXML=getStrictDecoder(xml_json_1.default);exports.decodeHTMLStrict=getStrictDecoder(entities_json_1.default);function getStrictDecoder(map){var replace=getReplacer(map);return function(str){return String(str).replace(strictEntityRe,replace)}}var sorter=function(a,b){return a<b?1:-1};exports.decodeHTML=function(){var legacy=Object.keys(legacy_json_1.default).sort(sorter);var keys=Object.keys(entities_json_1.default).sort(sorter);for(var i=0,j=0;i<keys.length;i++){if(legacy[j]===keys[i]){keys[i]+=";?";j++}else{keys[i]+=";"}}var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g");var replace=getReplacer(entities_json_1.default);function replacer(str){if(str.substr(-1)!==";")str+=";";return replace(str)}return function(str){return String(str).replace(re,replacer)}}();function getReplacer(map){return function replace(str){if(str.charAt(1)==="#"){var secondChar=str.charAt(2);if(secondChar==="X"||secondChar==="x"){return decode_codepoint_1.default(parseInt(str.substr(3),16))}return decode_codepoint_1.default(parseInt(str.substr(2),10))}return map[str.slice(1,-1)]||str}}},{"./decode_codepoint":109,"./maps/entities.json":113,"./maps/legacy.json":114,"./maps/xml.json":115}],109:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var decode_json_1=__importDefault(require("./maps/decode.json"));var fromCodePoint=String.fromCodePoint||function(codePoint){var output="";if(codePoint>65535){codePoint-=65536;output+=String.fromCharCode(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}output+=String.fromCharCode(codePoint);return output};function decodeCodePoint(codePoint){if(codePoint>=55296&&codePoint<=57343||codePoint>1114111){return""}if(codePoint in decode_json_1.default){codePoint=decode_json_1.default[codePoint]}return fromCodePoint(codePoint)}exports.default=decodeCodePoint},{"./maps/decode.json":112}],110:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.escapeUTF8=exports.escape=exports.encodeNonAsciiHTML=exports.encodeHTML=exports.encodeXML=void 0;var xml_json_1=__importDefault(require("./maps/xml.json"));var inverseXML=getInverseObj(xml_json_1.default);var xmlReplacer=getInverseReplacer(inverseXML);exports.encodeXML=getASCIIEncoder(inverseXML);var entities_json_1=__importDefault(require("./maps/entities.json"));var inverseHTML=getInverseObj(entities_json_1.default);var htmlReplacer=getInverseReplacer(inverseHTML);exports.encodeHTML=getInverse(inverseHTML,htmlReplacer);exports.encodeNonAsciiHTML=getASCIIEncoder(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce(function(inverse,name){inverse[obj[name]]="&"+name+";";return inverse},{})}function getInverseReplacer(inverse){var single=[];var multiple=[];for(var _i=0,_a=Object.keys(inverse);_i<_a.length;_i++){var k=_a[_i];if(k.length===1){single.push("\\"+k)}else{multiple.push(k)}}single.sort();for(var start=0;start<single.length-1;start++){var end=start;while(end<single.length-1&&single[end].charCodeAt(1)+1===single[end+1].charCodeAt(1)){end+=1}var count=1+end-start;if(count<3)continue;single.splice(start,count,single[start]+"-"+single[end])}multiple.unshift("["+single.join("")+"]");return new RegExp(multiple.join("|"),"g")}var reNonASCII=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;var getCodePoint=String.prototype.codePointAt!=null?function(str){return str.codePointAt(0)}:function(c){return(c.charCodeAt(0)-55296)*1024+c.charCodeAt(1)-56320+65536};function singleCharReplacer(c){return"&#x"+(c.length>1?getCodePoint(c):c.charCodeAt(0)).toString(16).toUpperCase()+";"}function getInverse(inverse,re){return function(data){return data.replace(re,function(name){return inverse[name]}).replace(reNonASCII,singleCharReplacer)}}var reEscapeChars=new RegExp(xmlReplacer.source+"|"+reNonASCII.source,"g");function escape(data){return data.replace(reEscapeChars,singleCharReplacer)}exports.escape=escape;function escapeUTF8(data){return data.replace(xmlReplacer,singleCharReplacer)}exports.escapeUTF8=escapeUTF8;function getASCIIEncoder(obj){return function(data){return data.replace(reEscapeChars,function(c){return obj[c]||singleCharReplacer(c)})}}},{"./maps/entities.json":113,"./maps/xml.json":115}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodeXMLStrict=exports.decodeHTML5Strict=exports.decodeHTML4Strict=exports.decodeHTML5=exports.decodeHTML4=exports.decodeHTMLStrict=exports.decodeHTML=exports.decodeXML=exports.encodeHTML5=exports.encodeHTML4=exports.escapeUTF8=exports.escape=exports.encodeNonAsciiHTML=exports.encodeHTML=exports.encodeXML=exports.encode=exports.decodeStrict=exports.decode=void 0;var decode_1=require("./decode");var encode_1=require("./encode");function decode(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTML)(data)}exports.decode=decode;function decodeStrict(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTMLStrict)(data)}exports.decodeStrict=decodeStrict;function encode(data,level){return(!level||level<=0?encode_1.encodeXML:encode_1.encodeHTML)(data)}exports.encode=encode;var encode_2=require("./encode");Object.defineProperty(exports,"encodeXML",{enumerable:true,get:function(){return encode_2.encodeXML}});Object.defineProperty(exports,"encodeHTML",{enumerable:true,get:function(){return encode_2.encodeHTML}});Object.defineProperty(exports,"encodeNonAsciiHTML",{enumerable:true,get:function(){return encode_2.encodeNonAsciiHTML}});Object.defineProperty(exports,"escape",{enumerable:true,get:function(){return encode_2.escape}});Object.defineProperty(exports,"escapeUTF8",{enumerable:true,get:function(){return encode_2.escapeUTF8}});Object.defineProperty(exports,"encodeHTML4",{enumerable:true,get:function(){return encode_2.encodeHTML}});Object.defineProperty(exports,"encodeHTML5",{enumerable:true,get:function(){return encode_2.encodeHTML}});var decode_2=require("./decode");Object.defineProperty(exports,"decodeXML",{enumerable:true,get:function(){return decode_2.decodeXML}});Object.defineProperty(exports,"decodeHTML",{enumerable:true,get:function(){return decode_2.decodeHTML}});Object.defineProperty(exports,"decodeHTMLStrict",{enumerable:true,get:function(){return decode_2.decodeHTMLStrict}});Object.defineProperty(exports,"decodeHTML4",{enumerable:true,get:function(){return decode_2.decodeHTML}});Object.defineProperty(exports,"decodeHTML5",{enumerable:true,get:function(){return decode_2.decodeHTML}});Object.defineProperty(exports,"decodeHTML4Strict",{enumerable:true,get:function(){return decode_2.decodeHTMLStrict}});Object.defineProperty(exports,"decodeHTML5Strict",{enumerable:true,get:function(){return decode_2.decodeHTMLStrict}});Object.defineProperty(exports,"decodeXMLStrict",{enumerable:true,get:function(){return decode_2.decodeXML}})},{"./decode":108,"./encode":110}],112:[function(require,module,exports){module.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},{}],113:[function(require,module,exports){module.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}},{}],114:[function(require,module,exports){module.exports={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""}},{}],115:[function(require,module,exports){module.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},{}],116:[function(require,module,exports){"use strict";module.exports=(string=>{if(typeof string!=="string"){throw new TypeError("Expected a string")}return string.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})},{}],117:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.parseFeed=exports.FeedHandler=void 0;var domhandler_1=__importDefault(require("domhandler"));var DomUtils=__importStar(require("domutils"));var Parser_1=require("./Parser");var FeedItemMediaMedium;(function(FeedItemMediaMedium){FeedItemMediaMedium[FeedItemMediaMedium["image"]=0]="image";FeedItemMediaMedium[FeedItemMediaMedium["audio"]=1]="audio";FeedItemMediaMedium[FeedItemMediaMedium["video"]=2]="video";FeedItemMediaMedium[FeedItemMediaMedium["document"]=3]="document";FeedItemMediaMedium[FeedItemMediaMedium["executable"]=4]="executable"})(FeedItemMediaMedium||(FeedItemMediaMedium={}));var FeedItemMediaExpression;(function(FeedItemMediaExpression){FeedItemMediaExpression[FeedItemMediaExpression["sample"]=0]="sample";FeedItemMediaExpression[FeedItemMediaExpression["full"]=1]="full";FeedItemMediaExpression[FeedItemMediaExpression["nonstop"]=2]="nonstop"})(FeedItemMediaExpression||(FeedItemMediaExpression={}));var FeedHandler=function(_super){__extends(FeedHandler,_super);function FeedHandler(callback,options){var _this=this;if(typeof callback==="object"){callback=undefined;options=callback}_this=_super.call(this,callback,options)||this;return _this}FeedHandler.prototype.onend=function(){var _a,_b;var feedRoot=getOneElement(isValidFeed,this.dom);if(!feedRoot){this.handleCallback(new Error("couldn't find root of feed"));return}var feed={};if(feedRoot.name==="feed"){var childs=feedRoot.children;feed.type="atom";addConditionally(feed,"id","id",childs);addConditionally(feed,"title","title",childs);var href=getAttribute("href",getOneElement("link",childs));if(href){feed.link=href}addConditionally(feed,"description","subtitle",childs);var updated=fetch("updated",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","email",childs,true);feed.items=getElements("entry",childs).map(function(item){var entry={};var children=item.children;addConditionally(entry,"id","id",children);addConditionally(entry,"title","title",children);var href=getAttribute("href",getOneElement("link",children));if(href){entry.link=href}var description=fetch("summary",children)||fetch("content",children);if(description){entry.description=description}var pubDate=fetch("updated",children);if(pubDate){entry.pubDate=new Date(pubDate)}entry.media=getMediaElements(children);return entry})}else{var childs=(_b=(_a=getOneElement("channel",feedRoot.children))===null||_a===void 0?void 0:_a.children)!==null&&_b!==void 0?_b:[];feed.type=feedRoot.name.substr(0,3);feed.id="";addConditionally(feed,"title","title",childs);addConditionally(feed,"link","link",childs);addConditionally(feed,"description","description",childs);var updated=fetch("lastBuildDate",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","managingEditor",childs,true);feed.items=getElements("item",feedRoot.children).map(function(item){var entry={};var children=item.children;addConditionally(entry,"id","guid",children);addConditionally(entry,"title","title",children);addConditionally(entry,"link","link",children);addConditionally(entry,"description","description",children);var pubDate=fetch("pubDate",children);if(pubDate)entry.pubDate=new Date(pubDate);entry.media=getMediaElements(children);return entry})}this.feed=feed;this.handleCallback(null)};return FeedHandler}(domhandler_1.default);exports.FeedHandler=FeedHandler;function getMediaElements(where){return getElements("media:content",where).map(function(elem){var media={medium:elem.attribs.medium,isDefault:!!elem.attribs.isDefault};if(elem.attribs.url){media.url=elem.attribs.url}if(elem.attribs.fileSize){media.fileSize=parseInt(elem.attribs.fileSize,10)}if(elem.attribs.type){media.type=elem.attribs.type}if(elem.attribs.expression){media.expression=elem.attribs.expression}if(elem.attribs.bitrate){media.bitrate=parseInt(elem.attribs.bitrate,10)}if(elem.attribs.framerate){media.framerate=parseInt(elem.attribs.framerate,10)}if(elem.attribs.samplingrate){media.samplingrate=parseInt(elem.attribs.samplingrate,10)}if(elem.attribs.channels){media.channels=parseInt(elem.attribs.channels,10)}if(elem.attribs.duration){media.duration=parseInt(elem.attribs.duration,10)}if(elem.attribs.height){media.height=parseInt(elem.attribs.height,10)}if(elem.attribs.width){media.width=parseInt(elem.attribs.width,10)}if(elem.attribs.lang){media.lang=elem.attribs.lang}return media})}function getElements(tagName,where){return DomUtils.getElementsByTagName(tagName,where,true)}function getOneElement(tagName,node){return DomUtils.getElementsByTagName(tagName,node,true,1)[0]}function fetch(tagName,where,recurse){if(recurse===void 0){recurse=false}return DomUtils.getText(DomUtils.getElementsByTagName(tagName,where,recurse,1)).trim()}function getAttribute(name,elem){if(!elem){return null}var attribs=elem.attribs;return attribs[name]}function addConditionally(obj,prop,what,where,recurse){if(recurse===void 0){recurse=false}var tmp=fetch(what,where,recurse);if(tmp)obj[prop]=tmp}function isValidFeed(value){return value==="rss"||value==="feed"||value==="rdf:RDF"}function parseFeed(feed,options){if(options===void 0){options={xmlMode:true}}var handler=new FeedHandler(options);new Parser_1.Parser(handler,options).end(feed);return handler.feed}exports.parseFeed=parseFeed},{"./Parser":118,domhandler:99,domutils:102}],118:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.Parser=void 0;var Tokenizer_1=__importDefault(require("./Tokenizer"));var formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]);var pTag=new Set(["p"]);var openImpliesClose={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:pTag,h1:pTag,h2:pTag,h3:pTag,h4:pTag,h5:pTag,h6:pTag,select:formTags,input:formTags,output:formTags,button:formTags,datalist:formTags,textarea:formTags,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:pTag,article:pTag,aside:pTag,blockquote:pTag,details:pTag,div:pTag,dl:pTag,fieldset:pTag,figcaption:pTag,figure:pTag,footer:pTag,form:pTag,header:pTag,hr:pTag,main:pTag,nav:pTag,ol:pTag,pre:pTag,section:pTag,table:pTag,ul:pTag,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])};var voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);var foreignContextElements=new Set(["math","svg"]);var htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]);var reNameEnd=/\s|\//;var Parser=function(){function Parser(cbs,options){if(options===void 0){options={}}var _a,_b,_c,_d,_e;this.startIndex=0;this.endIndex=null;this.tagname="";this.attribname="";this.attribvalue="";this.attribs=null;this.stack=[];this.foreignContext=[];this.options=options;this.cbs=cbs!==null&&cbs!==void 0?cbs:{};this.lowerCaseTagNames=(_a=options.lowerCaseTags)!==null&&_a!==void 0?_a:!options.xmlMode;this.lowerCaseAttributeNames=(_b=options.lowerCaseAttributeNames)!==null&&_b!==void 0?_b:!options.xmlMode;this.tokenizer=new((_c=options.Tokenizer)!==null&&_c!==void 0?_c:Tokenizer_1.default)(this.options,this);(_e=(_d=this.cbs).onparserinit)===null||_e===void 0?void 0:_e.call(_d,this)}Parser.prototype.updatePosition=function(initialOffset){if(this.endIndex===null){if(this.tokenizer.sectionStart<=initialOffset){this.startIndex=0}else{this.startIndex=this.tokenizer.sectionStart-initialOffset}}else{this.startIndex=this.endIndex+1}this.endIndex=this.tokenizer.getAbsoluteIndex()};Parser.prototype.ontext=function(data){var _a,_b;this.updatePosition(1);this.endIndex--;(_b=(_a=this.cbs).ontext)===null||_b===void 0?void 0:_b.call(_a,data)};Parser.prototype.onopentagname=function(name){var _a,_b;if(this.lowerCaseTagNames){name=name.toLowerCase()}this.tagname=name;if(!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(openImpliesClose,name)){var el=void 0;while(this.stack.length>0&&openImpliesClose[name].has(el=this.stack[this.stack.length-1])){this.onclosetag(el)}}if(this.options.xmlMode||!voidElements.has(name)){this.stack.push(name);if(foreignContextElements.has(name)){this.foreignContext.push(true)}else if(htmlIntegrationElements.has(name)){this.foreignContext.push(false)}}(_b=(_a=this.cbs).onopentagname)===null||_b===void 0?void 0:_b.call(_a,name);if(this.cbs.onopentag)this.attribs={}};Parser.prototype.onopentagend=function(){var _a,_b;this.updatePosition(1);if(this.attribs){(_b=(_a=this.cbs).onopentag)===null||_b===void 0?void 0:_b.call(_a,this.tagname,this.attribs);this.attribs=null}if(!this.options.xmlMode&&this.cbs.onclosetag&&voidElements.has(this.tagname)){this.cbs.onclosetag(this.tagname)}this.tagname=""};Parser.prototype.onclosetag=function(name){this.updatePosition(1);if(this.lowerCaseTagNames){name=name.toLowerCase()}if(foreignContextElements.has(name)||htmlIntegrationElements.has(name)){this.foreignContext.pop()}if(this.stack.length&&(this.options.xmlMode||!voidElements.has(name))){var pos=this.stack.lastIndexOf(name);if(pos!==-1){if(this.cbs.onclosetag){pos=this.stack.length-pos;while(pos--){this.cbs.onclosetag(this.stack.pop())}}else this.stack.length=pos}else if(name==="p"&&!this.options.xmlMode){this.onopentagname(name);this.closeCurrentTag()}}else if(!this.options.xmlMode&&(name==="br"||name==="p")){this.onopentagname(name);this.closeCurrentTag()}};Parser.prototype.onselfclosingtag=function(){if(this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]){this.closeCurrentTag()}else{this.onopentagend()}};Parser.prototype.closeCurrentTag=function(){var _a,_b;var name=this.tagname;this.onopentagend();if(this.stack[this.stack.length-1]===name){(_b=(_a=this.cbs).onclosetag)===null||_b===void 0?void 0:_b.call(_a,name);this.stack.pop()}};Parser.prototype.onattribname=function(name){if(this.lowerCaseAttributeNames){name=name.toLowerCase()}this.attribname=name};Parser.prototype.onattribdata=function(value){this.attribvalue+=value};Parser.prototype.onattribend=function(quote){var _a,_b;(_b=(_a=this.cbs).onattribute)===null||_b===void 0?void 0:_b.call(_a,this.attribname,this.attribvalue,quote);if(this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)){this.attribs[this.attribname]=this.attribvalue}this.attribname="";this.attribvalue=""};Parser.prototype.getInstructionName=function(value){var idx=value.search(reNameEnd);var name=idx<0?value:value.substr(0,idx);if(this.lowerCaseTagNames){name=name.toLowerCase()}return name};Parser.prototype.ondeclaration=function(value){if(this.cbs.onprocessinginstruction){var name_1=this.getInstructionName(value);this.cbs.onprocessinginstruction("!"+name_1,"!"+value)}};Parser.prototype.onprocessinginstruction=function(value){if(this.cbs.onprocessinginstruction){var name_2=this.getInstructionName(value);this.cbs.onprocessinginstruction("?"+name_2,"?"+value)}};Parser.prototype.oncomment=function(value){var _a,_b,_c,_d;this.updatePosition(4);(_b=(_a=this.cbs).oncomment)===null||_b===void 0?void 0:_b.call(_a,value);(_d=(_c=this.cbs).oncommentend)===null||_d===void 0?void 0:_d.call(_c)};Parser.prototype.oncdata=function(value){var _a,_b,_c,_d,_e,_f;this.updatePosition(1);if(this.options.xmlMode||this.options.recognizeCDATA){(_b=(_a=this.cbs).oncdatastart)===null||_b===void 0?void 0:_b.call(_a);(_d=(_c=this.cbs).ontext)===null||_d===void 0?void 0:_d.call(_c,value);(_f=(_e=this.cbs).oncdataend)===null||_f===void 0?void 0:_f.call(_e)}else{this.oncomment("[CDATA["+value+"]]")}};Parser.prototype.onerror=function(err){var _a,_b;(_b=(_a=this.cbs).onerror)===null||_b===void 0?void 0:_b.call(_a,err)};Parser.prototype.onend=function(){var _a,_b;if(this.cbs.onclosetag){for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i]));}(_b=(_a=this.cbs).onend)===null||_b===void 0?void 0:_b.call(_a)};Parser.prototype.reset=function(){var _a,_b,_c,_d;(_b=(_a=this.cbs).onreset)===null||_b===void 0?void 0:_b.call(_a);this.tokenizer.reset();this.tagname="";this.attribname="";this.attribs=null;this.stack=[];(_d=(_c=this.cbs).onparserinit)===null||_d===void 0?void 0:_d.call(_c,this)};Parser.prototype.parseComplete=function(data){this.reset();this.end(data)};Parser.prototype.write=function(chunk){this.tokenizer.write(chunk)};Parser.prototype.end=function(chunk){this.tokenizer.end(chunk)};Parser.prototype.pause=function(){this.tokenizer.pause()};Parser.prototype.resume=function(){this.tokenizer.resume()};Parser.prototype.parseChunk=function(chunk){this.write(chunk)};Parser.prototype.done=function(chunk){this.end(chunk)};return Parser}();exports.Parser=Parser},{"./Tokenizer":119}],119:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var decode_codepoint_1=__importDefault(require("entities/lib/decode_codepoint"));var entities_json_1=__importDefault(require("entities/lib/maps/entities.json"));var legacy_json_1=__importDefault(require("entities/lib/maps/legacy.json"));var xml_json_1=__importDefault(require("entities/lib/maps/xml.json"));function whitespace(c){return c===" "||c==="\n"||c==="\t"||c==="\f"||c==="\r"}function isASCIIAlpha(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"}function ifElseState(upper,SUCCESS,FAILURE){var lower=upper.toLowerCase();if(upper===lower){return function(t,c){if(c===lower){t._state=SUCCESS}else{t._state=FAILURE;t._index--}}}return function(t,c){if(c===lower||c===upper){t._state=SUCCESS}else{t._state=FAILURE;t._index--}}}function consumeSpecialNameChar(upper,NEXT_STATE){var lower=upper.toLowerCase();return function(t,c){if(c===lower||c===upper){t._state=NEXT_STATE}else{t._state=3;t._index--}}}var stateBeforeCdata1=ifElseState("C",24,16);var stateBeforeCdata2=ifElseState("D",25,16);var stateBeforeCdata3=ifElseState("A",26,16);var stateBeforeCdata4=ifElseState("T",27,16);var stateBeforeCdata5=ifElseState("A",28,16);var stateBeforeScript1=consumeSpecialNameChar("R",35);var stateBeforeScript2=consumeSpecialNameChar("I",36);var stateBeforeScript3=consumeSpecialNameChar("P",37);var stateBeforeScript4=consumeSpecialNameChar("T",38);var stateAfterScript1=ifElseState("R",40,1);var stateAfterScript2=ifElseState("I",41,1);var stateAfterScript3=ifElseState("P",42,1);var stateAfterScript4=ifElseState("T",43,1);var stateBeforeStyle1=consumeSpecialNameChar("Y",45);var stateBeforeStyle2=consumeSpecialNameChar("L",46);var stateBeforeStyle3=consumeSpecialNameChar("E",47);var stateAfterStyle1=ifElseState("Y",49,1);var stateAfterStyle2=ifElseState("L",50,1);var stateAfterStyle3=ifElseState("E",51,1);var stateBeforeSpecialT=consumeSpecialNameChar("I",54);var stateBeforeTitle1=consumeSpecialNameChar("T",55);var stateBeforeTitle2=consumeSpecialNameChar("L",56);var stateBeforeTitle3=consumeSpecialNameChar("E",57);var stateAfterSpecialTEnd=ifElseState("I",58,1);var stateAfterTitle1=ifElseState("T",59,1);var stateAfterTitle2=ifElseState("L",60,1);var stateAfterTitle3=ifElseState("E",61,1);var stateBeforeEntity=ifElseState("#",63,64);var stateBeforeNumericEntity=ifElseState("X",66,65);var Tokenizer=function(){function Tokenizer(options,cbs){var _a;this._state=1;this.buffer="";this.sectionStart=0;this._index=0;this.bufferOffset=0;this.baseState=1;this.special=1;this.running=true;this.ended=false;this.cbs=cbs;this.xmlMode=!!(options===null||options===void 0?void 0:options.xmlMode);this.decodeEntities=(_a=options===null||options===void 0?void 0:options.decodeEntities)!==null&&_a!==void 0?_a:true}Tokenizer.prototype.reset=function(){this._state=1;this.buffer="";this.sectionStart=0;this._index=0;this.bufferOffset=0;this.baseState=1;this.special=1;this.running=true;this.ended=false};Tokenizer.prototype.write=function(chunk){if(this.ended)this.cbs.onerror(Error(".write() after done!"));this.buffer+=chunk;this.parse()};Tokenizer.prototype.end=function(chunk){if(this.ended)this.cbs.onerror(Error(".end() after done!"));if(chunk)this.write(chunk);this.ended=true;if(this.running)this.finish()};Tokenizer.prototype.pause=function(){this.running=false};Tokenizer.prototype.resume=function(){this.running=true;if(this._index<this.buffer.length){this.parse()}if(this.ended){this.finish()}};Tokenizer.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index};Tokenizer.prototype.stateText=function(c){if(c==="<"){if(this._index>this.sectionStart){this.cbs.ontext(this.getSection())}this._state=2;this.sectionStart=this._index}else if(this.decodeEntities&&c==="&"&&(this.special===1||this.special===4)){if(this._index>this.sectionStart){this.cbs.ontext(this.getSection())}this.baseState=1;this._state=62;this.sectionStart=this._index}};Tokenizer.prototype.isTagStartChar=function(c){return isASCIIAlpha(c)||this.xmlMode&&!whitespace(c)&&c!=="/"&&c!==">"};Tokenizer.prototype.stateBeforeTagName=function(c){if(c==="/"){this._state=5}else if(c==="<"){this.cbs.ontext(this.getSection());this.sectionStart=this._index}else if(c===">"||this.special!==1||whitespace(c)){this._state=1}else if(c==="!"){this._state=15;this.sectionStart=this._index+1}else if(c==="?"){this._state=17;this.sectionStart=this._index+1}else if(!this.isTagStartChar(c)){this._state=1}else{this._state=!this.xmlMode&&(c==="s"||c==="S")?32:!this.xmlMode&&(c==="t"||c==="T")?52:3;this.sectionStart=this._index}};Tokenizer.prototype.stateInTagName=function(c){if(c==="/"||c===">"||whitespace(c)){this.emitToken("onopentagname");this._state=8;this._index--}};Tokenizer.prototype.stateBeforeClosingTagName=function(c){if(whitespace(c)){}else if(c===">"){this._state=1}else if(this.special!==1){if(this.special!==4&&(c==="s"||c==="S")){this._state=33}else if(this.special===4&&(c==="t"||c==="T")){this._state=53}else{this._state=1;this._index--}}else if(!this.isTagStartChar(c)){this._state=20;this.sectionStart=this._index}else{this._state=6;this.sectionStart=this._index}};Tokenizer.prototype.stateInClosingTagName=function(c){if(c===">"||whitespace(c)){this.emitToken("onclosetag");this._state=7;this._index--}};Tokenizer.prototype.stateAfterClosingTagName=function(c){if(c===">"){this._state=1;this.sectionStart=this._index+1}};Tokenizer.prototype.stateBeforeAttributeName=function(c){if(c===">"){this.cbs.onopentagend();this._state=1;this.sectionStart=this._index+1}else if(c==="/"){this._state=4}else if(!whitespace(c)){this._state=9;this.sectionStart=this._index}};Tokenizer.prototype.stateInSelfClosingTag=function(c){if(c===">"){this.cbs.onselfclosingtag();this._state=1;this.sectionStart=this._index+1;this.special=1}else if(!whitespace(c)){this._state=8;this._index--}};Tokenizer.prototype.stateInAttributeName=function(c){if(c==="="||c==="/"||c===">"||whitespace(c)){this.cbs.onattribname(this.getSection());this.sectionStart=-1;this._state=10;this._index--}};Tokenizer.prototype.stateAfterAttributeName=function(c){if(c==="="){this._state=11}else if(c==="/"||c===">"){this.cbs.onattribend(undefined);this._state=8;this._index--}else if(!whitespace(c)){this.cbs.onattribend(undefined);this._state=9;this.sectionStart=this._index}};Tokenizer.prototype.stateBeforeAttributeValue=function(c){if(c==='"'){this._state=12;this.sectionStart=this._index+1}else if(c==="'"){this._state=13;this.sectionStart=this._index+1}else if(!whitespace(c)){this._state=14;this.sectionStart=this._index;this._index--}};Tokenizer.prototype.handleInAttributeValue=function(c,quote){if(c===quote){this.emitToken("onattribdata");this.cbs.onattribend(quote);this._state=8}else if(this.decodeEntities&&c==="&"){this.emitToken("onattribdata");this.baseState=this._state;this._state=62;this.sectionStart=this._index}};Tokenizer.prototype.stateInAttributeValueDoubleQuotes=function(c){this.handleInAttributeValue(c,'"')};Tokenizer.prototype.stateInAttributeValueSingleQuotes=function(c){this.handleInAttributeValue(c,"'")};Tokenizer.prototype.stateInAttributeValueNoQuotes=function(c){if(whitespace(c)||c===">"){this.emitToken("onattribdata");this.cbs.onattribend(null);this._state=8;this._index--}else if(this.decodeEntities&&c==="&"){this.emitToken("onattribdata");this.baseState=this._state;this._state=62;this.sectionStart=this._index}};Tokenizer.prototype.stateBeforeDeclaration=function(c){this._state=c==="["?23:c==="-"?18:16};Tokenizer.prototype.stateInDeclaration=function(c){if(c===">"){this.cbs.ondeclaration(this.getSection());this._state=1;this.sectionStart=this._index+1}};Tokenizer.prototype.stateInProcessingInstruction=function(c){if(c===">"){this.cbs.onprocessinginstruction(this.getSection());this._state=1;this.sectionStart=this._index+1}};Tokenizer.prototype.stateBeforeComment=function(c){if(c==="-"){this._state=19;this.sectionStart=this._index+1}else{this._state=16}};Tokenizer.prototype.stateInComment=function(c){if(c==="-")this._state=21};Tokenizer.prototype.stateInSpecialComment=function(c){if(c===">"){this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index));this._state=1;this.sectionStart=this._index+1}};Tokenizer.prototype.stateAfterComment1=function(c){if(c==="-"){this._state=22}else{this._state=19}};Tokenizer.prototype.stateAfterComment2=function(c){if(c===">"){this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2));this._state=1;this.sectionStart=this._index+1}else if(c!=="-"){this._state=19}};Tokenizer.prototype.stateBeforeCdata6=function(c){if(c==="["){this._state=29;this.sectionStart=this._index+1}else{this._state=16;this._index--}};Tokenizer.prototype.stateInCdata=function(c){if(c==="]")this._state=30};Tokenizer.prototype.stateAfterCdata1=function(c){if(c==="]")this._state=31;else this._state=29};Tokenizer.prototype.stateAfterCdata2=function(c){if(c===">"){this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2));this._state=1;this.sectionStart=this._index+1}else if(c!=="]"){this._state=29}};Tokenizer.prototype.stateBeforeSpecialS=function(c){if(c==="c"||c==="C"){this._state=34}else if(c==="t"||c==="T"){this._state=44}else{this._state=3;this._index--}};Tokenizer.prototype.stateBeforeSpecialSEnd=function(c){if(this.special===2&&(c==="c"||c==="C")){this._state=39}else if(this.special===3&&(c==="t"||c==="T")){this._state=48}else this._state=1};Tokenizer.prototype.stateBeforeSpecialLast=function(c,special){if(c==="/"||c===">"||whitespace(c)){this.special=special}this._state=3;this._index--};Tokenizer.prototype.stateAfterSpecialLast=function(c,sectionStartOffset){if(c===">"||whitespace(c)){this.special=1;this._state=6;this.sectionStart=this._index-sectionStartOffset;this._index--}else this._state=1};Tokenizer.prototype.parseFixedEntity=function(map){if(map===void 0){map=this.xmlMode?xml_json_1.default:entities_json_1.default}if(this.sectionStart+1<this._index){var entity=this.buffer.substring(this.sectionStart+1,this._index);if(Object.prototype.hasOwnProperty.call(map,entity)){this.emitPartial(map[entity]);this.sectionStart=this._index+1}}};Tokenizer.prototype.parseLegacyEntity=function(){var start=this.sectionStart+1;var limit=Math.min(this._index-start,6);while(limit>=2){var entity=this.buffer.substr(start,limit);if(Object.prototype.hasOwnProperty.call(legacy_json_1.default,entity)){this.emitPartial(legacy_json_1.default[entity]);this.sectionStart+=limit+1;return}limit--}};Tokenizer.prototype.stateInNamedEntity=function(c){if(c===";"){this.parseFixedEntity();if(this.baseState===1&&this.sectionStart+1<this._index&&!this.xmlMode){this.parseLegacyEntity()}this._state=this.baseState}else if((c<"0"||c>"9")&&!isASCIIAlpha(c)){if(this.xmlMode||this.sectionStart+1===this._index){}else if(this.baseState!==1){if(c!=="="){this.parseFixedEntity(legacy_json_1.default)}}else{this.parseLegacyEntity()}this._state=this.baseState;this._index--}};Tokenizer.prototype.decodeNumericEntity=function(offset,base,strict){var sectionStart=this.sectionStart+offset;if(sectionStart!==this._index){var entity=this.buffer.substring(sectionStart,this._index);var parsed=parseInt(entity,base);this.emitPartial(decode_codepoint_1.default(parsed));this.sectionStart=strict?this._index+1:this._index}this._state=this.baseState};Tokenizer.prototype.stateInNumericEntity=function(c){if(c===";"){this.decodeNumericEntity(2,10,true)}else if(c<"0"||c>"9"){if(!this.xmlMode){this.decodeNumericEntity(2,10,false)}else{this._state=this.baseState}this._index--}};Tokenizer.prototype.stateInHexEntity=function(c){if(c===";"){this.decodeNumericEntity(3,16,true)}else if((c<"a"||c>"f")&&(c<"A"||c>"F")&&(c<"0"||c>"9")){if(!this.xmlMode){this.decodeNumericEntity(3,16,false)}else{this._state=this.baseState}this._index--}};Tokenizer.prototype.cleanup=function(){if(this.sectionStart<0){this.buffer="";this.bufferOffset+=this._index;this._index=0}else if(this.running){if(this._state===1){if(this.sectionStart!==this._index){this.cbs.ontext(this.buffer.substr(this.sectionStart))}this.buffer="";this.bufferOffset+=this._index;this._index=0}else if(this.sectionStart===this._index){this.buffer="";this.bufferOffset+=this._index;this._index=0}else{this.buffer=this.buffer.substr(this.sectionStart);this._index-=this.sectionStart;this.bufferOffset+=this.sectionStart}this.sectionStart=0}};Tokenizer.prototype.parse=function(){while(this._index<this.buffer.length&&this.running){var c=this.buffer.charAt(this._index);if(this._state===1){this.stateText(c)}else if(this._state===12){this.stateInAttributeValueDoubleQuotes(c)}else if(this._state===9){this.stateInAttributeName(c)}else if(this._state===19){this.stateInComment(c)}else if(this._state===20){this.stateInSpecialComment(c)}else if(this._state===8){this.stateBeforeAttributeName(c)}else if(this._state===3){this.stateInTagName(c)}else if(this._state===6){this.stateInClosingTagName(c)}else if(this._state===2){this.stateBeforeTagName(c)}else if(this._state===10){this.stateAfterAttributeName(c)}else if(this._state===13){this.stateInAttributeValueSingleQuotes(c)}else if(this._state===11){this.stateBeforeAttributeValue(c)}else if(this._state===5){this.stateBeforeClosingTagName(c)}else if(this._state===7){this.stateAfterClosingTagName(c)}else if(this._state===32){this.stateBeforeSpecialS(c)}else if(this._state===21){this.stateAfterComment1(c)}else if(this._state===14){this.stateInAttributeValueNoQuotes(c)}else if(this._state===4){this.stateInSelfClosingTag(c)}else if(this._state===16){this.stateInDeclaration(c)}else if(this._state===15){this.stateBeforeDeclaration(c)}else if(this._state===22){this.stateAfterComment2(c)}else if(this._state===18){this.stateBeforeComment(c)}else if(this._state===33){this.stateBeforeSpecialSEnd(c)}else if(this._state===53){stateAfterSpecialTEnd(this,c)}else if(this._state===39){stateAfterScript1(this,c)}else if(this._state===40){stateAfterScript2(this,c)}else if(this._state===41){stateAfterScript3(this,c)}else if(this._state===34){stateBeforeScript1(this,c)}else if(this._state===35){stateBeforeScript2(this,c)}else if(this._state===36){stateBeforeScript3(this,c)}else if(this._state===37){stateBeforeScript4(this,c)}else if(this._state===38){this.stateBeforeSpecialLast(c,2)}else if(this._state===42){stateAfterScript4(this,c)}else if(this._state===43){this.stateAfterSpecialLast(c,6)}else if(this._state===44){stateBeforeStyle1(this,c)}else if(this._state===29){this.stateInCdata(c)}else if(this._state===45){stateBeforeStyle2(this,c)}else if(this._state===46){stateBeforeStyle3(this,c)}else if(this._state===47){this.stateBeforeSpecialLast(c,3)}else if(this._state===48){stateAfterStyle1(this,c)}else if(this._state===49){stateAfterStyle2(this,c)}else if(this._state===50){stateAfterStyle3(this,c)}else if(this._state===51){this.stateAfterSpecialLast(c,5)}else if(this._state===52){stateBeforeSpecialT(this,c)}else if(this._state===54){stateBeforeTitle1(this,c)}else if(this._state===55){stateBeforeTitle2(this,c)}else if(this._state===56){stateBeforeTitle3(this,c)}else if(this._state===57){this.stateBeforeSpecialLast(c,4)}else if(this._state===58){stateAfterTitle1(this,c)}else if(this._state===59){stateAfterTitle2(this,c)}else if(this._state===60){stateAfterTitle3(this,c)}else if(this._state===61){this.stateAfterSpecialLast(c,5)}else if(this._state===17){this.stateInProcessingInstruction(c)}else if(this._state===64){this.stateInNamedEntity(c)}else if(this._state===23){stateBeforeCdata1(this,c)}else if(this._state===62){stateBeforeEntity(this,c)}else if(this._state===24){stateBeforeCdata2(this,c)}else if(this._state===25){stateBeforeCdata3(this,c)}else if(this._state===30){this.stateAfterCdata1(c)}else if(this._state===31){this.stateAfterCdata2(c)}else if(this._state===26){stateBeforeCdata4(this,c)}else if(this._state===27){stateBeforeCdata5(this,c)}else if(this._state===28){this.stateBeforeCdata6(c)}else if(this._state===66){this.stateInHexEntity(c)}else if(this._state===65){this.stateInNumericEntity(c)}else if(this._state===63){stateBeforeNumericEntity(this,c)}else{this.cbs.onerror(Error("unknown _state"),this._state)}this._index++}this.cleanup()};Tokenizer.prototype.finish=function(){if(this.sectionStart<this._index){this.handleTrailingData()}this.cbs.onend()};Tokenizer.prototype.handleTrailingData=function(){var data=this.buffer.substr(this.sectionStart);if(this._state===29||this._state===30||this._state===31){this.cbs.oncdata(data)}else if(this._state===19||this._state===21||this._state===22){this.cbs.oncomment(data)}else if(this._state===64&&!this.xmlMode){this.parseLegacyEntity();if(this.sectionStart<this._index){this._state=this.baseState;this.handleTrailingData()}}else if(this._state===65&&!this.xmlMode){this.decodeNumericEntity(2,10,false);if(this.sectionStart<this._index){this._state=this.baseState;this.handleTrailingData()}}else if(this._state===66&&!this.xmlMode){this.decodeNumericEntity(3,16,false);if(this.sectionStart<this._index){this._state=this.baseState;this.handleTrailingData()}}else if(this._state!==3&&this._state!==8&&this._state!==11&&this._state!==10&&this._state!==9&&this._state!==13&&this._state!==12&&this._state!==14&&this._state!==6){this.cbs.ontext(data)}};Tokenizer.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)};Tokenizer.prototype.emitToken=function(name){this.cbs[name](this.getSection());this.sectionStart=-1};Tokenizer.prototype.emitPartial=function(value){if(this.baseState!==1){this.cbs.onattribdata(value)}else{this.cbs.ontext(value)}};return Tokenizer}();exports.default=Tokenizer},{"entities/lib/decode_codepoint":109,"entities/lib/maps/entities.json":113,"entities/lib/maps/legacy.json":114,"entities/lib/maps/xml.json":115}],120:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports,p))__createBinding(exports,m,p)};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.RssHandler=exports.DefaultHandler=exports.DomUtils=exports.ElementType=exports.Tokenizer=exports.createDomStream=exports.parseDOM=exports.parseDocument=exports.DomHandler=exports.Parser=void 0;var Parser_1=require("./Parser");Object.defineProperty(exports,"Parser",{enumerable:true,get:function(){return Parser_1.Parser}});var domhandler_1=require("domhandler");Object.defineProperty(exports,"DomHandler",{enumerable:true,get:function(){return domhandler_1.DomHandler}});Object.defineProperty(exports,"DefaultHandler",{enumerable:true,get:function(){return domhandler_1.DomHandler}});function parseDocument(data,options){var handler=new domhandler_1.DomHandler(undefined,options);new Parser_1.Parser(handler,options).end(data);return handler.root}exports.parseDocument=parseDocument;function parseDOM(data,options){return parseDocument(data,options).children}exports.parseDOM=parseDOM;function createDomStream(cb,options,elementCb){var handler=new domhandler_1.DomHandler(cb,options,elementCb);return new Parser_1.Parser(handler,options)}exports.createDomStream=createDomStream;var Tokenizer_1=require("./Tokenizer");Object.defineProperty(exports,"Tokenizer",{enumerable:true,get:function(){return __importDefault(Tokenizer_1).default}});var ElementType=__importStar(require("domelementtype"));exports.ElementType=ElementType;__exportStar(require("./FeedHandler"),exports);exports.DomUtils=__importStar(require("domutils"));var FeedHandler_1=require("./FeedHandler");Object.defineProperty(exports,"RssHandler",{enumerable:true,get:function(){return FeedHandler_1.FeedHandler}})},{"./FeedHandler":117,"./Parser":118,"./Tokenizer":119,domelementtype:98,domhandler:99,domutils:102}],121:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function isObject(o){return Object.prototype.toString.call(o)==="[object Object]"}function isPlainObject(o){var ctor,prot;if(isObject(o)===false)return false;ctor=o.constructor;if(ctor===undefined)return true;prot=ctor.prototype;if(isObject(prot)===false)return false;if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}exports.isPlainObject=isPlainObject},{}],123:[function(require,module,exports){function klona(x){if(typeof x!=="object")return x;var k,tmp,str=Object.prototype.toString.call(x);if(str==="[object Object]"){if(x.constructor!==Object&&typeof x.constructor==="function"){tmp=new x.constructor;for(k in x){if(tmp.hasOwnProperty(k)&&tmp[k]!==x[k]){tmp[k]=klona(x[k])}}}else{tmp={};for(k in x){if(k==="__proto__"){Object.defineProperty(tmp,k,{value:klona(x[k]),configurable:true,enumerable:true,writable:true})}else{tmp[k]=klona(x[k])}}}return tmp}if(str==="[object Array]"){k=x.length;for(tmp=Array(k);k--;){tmp[k]=klona(x[k])}return tmp}if(str==="[object Set]"){tmp=new Set;x.forEach(function(val){tmp.add(klona(val))});return tmp}if(str==="[object Map]"){tmp=new Map;x.forEach(function(val,key){tmp.set(klona(key),klona(val))});return tmp}if(str==="[object Date]"){return new Date(+x)}if(str==="[object RegExp]"){tmp=new RegExp(x.source,x.flags);tmp.lastIndex=x.lastIndex;return tmp}if(str==="[object DataView]"){return new x.constructor(klona(x.buffer))}if(str==="[object ArrayBuffer]"){return x.slice(0)}if(str.slice(-6)==="Array]"){return new x.constructor(x)}return x}exports.klona=klona},{}],124:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.marked=factory())})(this,function(){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}it=o[Symbol.iterator]();return it.next.bind(it)}function createCommonjsModule(fn){var module={exports:{}};return fn(module,module.exports),module.exports}var defaults$5=createCommonjsModule(function(module){function getDefaults(){return{baseUrl:null,breaks:false,gfm:true,headerIds:true,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:true,pedantic:false,renderer:null,sanitize:false,sanitizer:null,silent:false,smartLists:false,smartypants:false,tokenizer:null,walkTokens:null,xhtml:false}}function changeDefaults(newDefaults){module.exports.defaults=newDefaults}module.exports={defaults:getDefaults(),getDefaults:getDefaults,changeDefaults:changeDefaults}});var escapeTest=/[&<>"']/;var escapeReplace=/[&<>"']/g;var escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/;var escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var getEscapeReplacement=function getEscapeReplacement(ch){return escapeReplacements[ch]};function escape$2(html,encode){if(encode){if(escapeTest.test(html)){return html.replace(escapeReplace,getEscapeReplacement)}}else{if(escapeTestNoEncode.test(html)){return html.replace(escapeReplaceNoEncode,getEscapeReplacement)}}return html}var unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape$1(html){return html.replace(unescapeTest,function(_,n){n=n.toLowerCase();if(n==="colon")return":";if(n.charAt(0)==="#"){return n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1))}return""})}var caret=/(^|[^\[])\^/g;function edit$1(regex,opt){regex=regex.source||regex;opt=opt||"";var obj={replace:function replace(name,val){val=val.source||val;val=val.replace(caret,"$1");regex=regex.replace(name,val);return obj},getRegex:function getRegex(){return new RegExp(regex,opt)}};return obj}var nonWordAndColonTest=/[^\w:]/g;var originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl$1(sanitize,base,href){if(sanitize){var prot;try{prot=decodeURIComponent(unescape$1(href)).replace(nonWordAndColonTest,"").toLowerCase()}catch(e){return null}if(prot.indexOf("javascript:")===0||prot.indexOf("vbscript:")===0||prot.indexOf("data:")===0){return null}}if(base&&!originIndependentUrl.test(href)){href=resolveUrl(base,href)}try{href=encodeURI(href).replace(/%25/g,"%")}catch(e){return null}return href}var baseUrls={};var justDomain=/^[^:]+:\/*[^/]*$/;var protocol=/^([^:]+:)[\s\S]*$/;var domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(base,href){if(!baseUrls[" "+base]){if(justDomain.test(base)){baseUrls[" "+base]=base+"/"}else{baseUrls[" "+base]=rtrim$1(base,"/",true)}}base=baseUrls[" "+base];var relativeBase=base.indexOf(":")===-1;if(href.substring(0,2)==="//"){if(relativeBase){return href}return base.replace(protocol,"$1")+href}else if(href.charAt(0)==="/"){if(relativeBase){return href}return base.replace(domain,"$1")+href}else{return base+href}}var noopTest$1={exec:function noopTest(){}};function merge$2(obj){var i=1,target,key;for(;i<arguments.length;i++){target=arguments[i];for(key in target){if(Object.prototype.hasOwnProperty.call(target,key)){obj[key]=target[key]}}}return obj}function splitCells$1(tableRow,count){var row=tableRow.replace(/\|/g,function(match,offset,str){var escaped=false,curr=offset;while(--curr>=0&&str[curr]==="\\"){escaped=!escaped}if(escaped){return"|"}else{return" |"}}),cells=row.split(/ \|/);var i=0;if(cells.length>count){cells.splice(count)}else{while(cells.length<count){cells.push("")}}for(;i<cells.length;i++){cells[i]=cells[i].trim().replace(/\\\|/g,"|")}return cells}function rtrim$1(str,c,invert){var l=str.length;if(l===0){return""}var suffLen=0;while(suffLen<l){var currChar=str.charAt(l-suffLen-1);if(currChar===c&&!invert){suffLen++}else if(currChar!==c&&invert){suffLen++}else{break}}return str.substr(0,l-suffLen)}function findClosingBracket$1(str,b){if(str.indexOf(b[1])===-1){return-1}var l=str.length;var level=0,i=0;for(;i<l;i++){if(str[i]==="\\"){i++}else if(str[i]===b[0]){level++}else if(str[i]===b[1]){level--;if(level<0){return i}}}return-1}function checkSanitizeDeprecation$1(opt){if(opt&&opt.sanitize&&!opt.silent){console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}function repeatString$1(pattern,count){if(count<1){return""}var result="";while(count>1){if(count&1){result+=pattern}count>>=1;pattern+=pattern}return result+pattern}var helpers={escape:escape$2,unescape:unescape$1,edit:edit$1,cleanUrl:cleanUrl$1,resolveUrl:resolveUrl,noopTest:noopTest$1,merge:merge$2,splitCells:splitCells$1,rtrim:rtrim$1,findClosingBracket:findClosingBracket$1,checkSanitizeDeprecation:checkSanitizeDeprecation$1,repeatString:repeatString$1};var defaults$4=defaults$5.defaults;var rtrim=helpers.rtrim,splitCells=helpers.splitCells,_escape=helpers.escape,findClosingBracket=helpers.findClosingBracket;function outputLink(cap,link,raw){var href=link.href;var title=link.title?_escape(link.title):null;var text=cap[1].replace(/\\([\[\]])/g,"$1");if(cap[0].charAt(0)!=="!"){return{type:"link",raw:raw,href:href,title:title,text:text}}else{return{type:"image",raw:raw,href:href,title:title,text:_escape(text)}}}function indentCodeCompensation(raw,text){var matchIndentToCode=raw.match(/^(\s+)(?:```)/);if(matchIndentToCode===null){return text}var indentToCode=matchIndentToCode[1];return text.split("\n").map(function(node){var matchIndentInNode=node.match(/^\s+/);if(matchIndentInNode===null){return node}var indentInNode=matchIndentInNode[0];if(indentInNode.length>=indentToCode.length){return node.slice(indentToCode.length)}return node}).join("\n")}var Tokenizer_1=function(){function Tokenizer(options){this.options=options||defaults$4}var _proto=Tokenizer.prototype;_proto.space=function space(src){var cap=this.rules.block.newline.exec(src);if(cap){if(cap[0].length>1){return{type:"space",raw:cap[0]}}return{raw:"\n"}}};_proto.code=function code(src){var cap=this.rules.block.code.exec(src);if(cap){var text=cap[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:cap[0],codeBlockStyle:"indented",text:!this.options.pedantic?rtrim(text,"\n"):text}}};_proto.fences=function fences(src){var cap=this.rules.block.fences.exec(src);if(cap){var raw=cap[0];var text=indentCodeCompensation(raw,cap[3]||"");return{type:"code",raw:raw,lang:cap[2]?cap[2].trim():cap[2],text:text}}};_proto.heading=function heading(src){var cap=this.rules.block.heading.exec(src);if(cap){var text=cap[2].trim();if(/#$/.test(text)){var trimmed=rtrim(text,"#");if(this.options.pedantic){text=trimmed.trim()}else if(!trimmed||/ $/.test(trimmed)){text=trimmed.trim()}}return{type:"heading",raw:cap[0],depth:cap[1].length,text:text}}};_proto.nptable=function nptable(src){var cap=this.rules.block.nptable.exec(src);if(cap){var item={type:"table",header:splitCells(cap[1].replace(/^ *| *\| *$/g,"")),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3]?cap[3].replace(/\n$/,"").split("\n"):[],raw:cap[0]};if(item.header.length===item.align.length){var l=item.align.length;var i;for(i=0;i<l;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}l=item.cells.length;for(i=0;i<l;i++){item.cells[i]=splitCells(item.cells[i],item.header.length)}return item}}};_proto.hr=function hr(src){var cap=this.rules.block.hr.exec(src);if(cap){return{type:"hr",raw:cap[0]}}};_proto.blockquote=function blockquote(src){var cap=this.rules.block.blockquote.exec(src);if(cap){var text=cap[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:cap[0],text:text}}};_proto.list=function list(src){var cap=this.rules.block.list.exec(src);if(cap){var raw=cap[0];var bull=cap[2];var isordered=bull.length>1;var list={type:"list",raw:raw,ordered:isordered,start:isordered?+bull.slice(0,-1):"",loose:false,items:[]};var itemMatch=cap[0].match(this.rules.block.item);var next=false,item,space,bcurr,bnext,addBack,loose,istask,ischecked,endMatch;var l=itemMatch.length;bcurr=this.rules.block.listItemStart.exec(itemMatch[0]);for(var i=0;i<l;i++){item=itemMatch[i];raw=item;if(!this.options.pedantic){endMatch=item.match(new RegExp("\\n\\s*\\n {0,"+(bcurr[0].length-1)+"}\\S"));if(endMatch){addBack=item.length-endMatch.index+itemMatch.slice(i+1).join("\n").length;list.raw=list.raw.substring(0,list.raw.length-addBack);item=item.substring(0,endMatch.index);raw=item;l=i+1}}if(i!==l-1){bnext=this.rules.block.listItemStart.exec(itemMatch[i+1]);if(!this.options.pedantic?bnext[1].length>=bcurr[0].length||bnext[1].length>3:bnext[1].length>bcurr[1].length){itemMatch.splice(i,2,itemMatch[i]+(!this.options.pedantic&&bnext[1].length<bcurr[0].length&&!itemMatch[i].match(/\n$/)?"":"\n")+itemMatch[i+1]);i--;l--;continue}else if(!this.options.pedantic||this.options.smartLists?bnext[2][bnext[2].length-1]!==bull[bull.length-1]:isordered===(bnext[2].length===1)){addBack=itemMatch.slice(i+1).join("\n").length;list.raw=list.raw.substring(0,list.raw.length-addBack);i=l-1}bcurr=bnext}space=item.length;item=item.replace(/^ *([*+-]|\d+[.)]) ?/,"");if(~item.indexOf("\n ")){space-=item.length;item=!this.options.pedantic?item.replace(new RegExp("^ {1,"+space+"}","gm"),""):item.replace(/^ {1,4}/gm,"")}item=rtrim(item,"\n");if(i!==l-1){raw=raw+"\n"}loose=next||/\n\n(?!\s*$)/.test(raw);if(i!==l-1){next=raw.slice(-2)==="\n\n";if(!loose)loose=next}if(loose){list.loose=true}if(this.options.gfm){istask=/^\[[ xX]\] /.test(item);ischecked=undefined;if(istask){ischecked=item[1]!==" ";item=item.replace(/^\[[ xX]\] +/,"")}}list.items.push({type:"list_item",raw:raw,task:istask,checked:ischecked,loose:loose,text:item})}return list}};_proto.html=function html(src){var cap=this.rules.block.html.exec(src);if(cap){return{type:this.options.sanitize?"paragraph":"html",raw:cap[0],pre:!this.options.sanitizer&&(cap[1]==="pre"||cap[1]==="script"||cap[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):_escape(cap[0]):cap[0]}}};_proto.def=function def(src){var cap=this.rules.block.def.exec(src);if(cap){if(cap[3])cap[3]=cap[3].substring(1,cap[3].length-1);var tag=cap[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:tag,raw:cap[0],href:cap[2],title:cap[3]}}};_proto.table=function table(src){var cap=this.rules.block.table.exec(src);if(cap){var item={type:"table",header:splitCells(cap[1].replace(/^ *| *\| *$/g,"")),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3]?cap[3].replace(/\n$/,"").split("\n"):[]};if(item.header.length===item.align.length){item.raw=cap[0];var l=item.align.length;var i;for(i=0;i<l;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}l=item.cells.length;for(i=0;i<l;i++){item.cells[i]=splitCells(item.cells[i].replace(/^ *\| *| *\| *$/g,""),item.header.length)}return item}}};_proto.lheading=function lheading(src){var cap=this.rules.block.lheading.exec(src);if(cap){return{type:"heading",raw:cap[0],depth:cap[2].charAt(0)==="="?1:2,text:cap[1]}}};_proto.paragraph=function paragraph(src){var cap=this.rules.block.paragraph.exec(src);if(cap){return{type:"paragraph",raw:cap[0],text:cap[1].charAt(cap[1].length-1)==="\n"?cap[1].slice(0,-1):cap[1]}}};_proto.text=function text(src){var cap=this.rules.block.text.exec(src);if(cap){return{type:"text",raw:cap[0],text:cap[0]}}};_proto.escape=function escape(src){var cap=this.rules.inline.escape.exec(src);if(cap){return{type:"escape",raw:cap[0],text:_escape(cap[1])}}};_proto.tag=function tag(src,inLink,inRawBlock){var cap=this.rules.inline.tag.exec(src);if(cap){if(!inLink&&/^<a /i.test(cap[0])){inLink=true}else if(inLink&&/^<\/a>/i.test(cap[0])){inLink=false}if(!inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])){inRawBlock=true}else if(inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])){inRawBlock=false}return{type:this.options.sanitize?"text":"html",raw:cap[0],inLink:inLink,inRawBlock:inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):_escape(cap[0]):cap[0]}}};_proto.link=function link(src){var cap=this.rules.inline.link.exec(src);if(cap){var trimmedUrl=cap[2].trim();if(!this.options.pedantic&&/^</.test(trimmedUrl)){if(!/>$/.test(trimmedUrl)){return}var rtrimSlash=rtrim(trimmedUrl.slice(0,-1),"\\");if((trimmedUrl.length-rtrimSlash.length)%2===0){return}}else{var lastParenIndex=findClosingBracket(cap[2],"()");if(lastParenIndex>-1){var start=cap[0].indexOf("!")===0?5:4;var linkLen=start+cap[1].length+lastParenIndex;cap[2]=cap[2].substring(0,lastParenIndex);cap[0]=cap[0].substring(0,linkLen).trim();cap[3]=""}}var href=cap[2];var title="";if(this.options.pedantic){var link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);if(link){href=link[1];title=link[3]}}else{title=cap[3]?cap[3].slice(1,-1):""}href=href.trim();if(/^</.test(href)){if(this.options.pedantic&&!/>$/.test(trimmedUrl)){href=href.slice(1)}else{href=href.slice(1,-1)}}return outputLink(cap,{href:href?href.replace(this.rules.inline._escapes,"$1"):href,title:title?title.replace(this.rules.inline._escapes,"$1"):title},cap[0])}};_proto.reflink=function reflink(src,links){var cap;if((cap=this.rules.inline.reflink.exec(src))||(cap=this.rules.inline.nolink.exec(src))){var link=(cap[2]||cap[1]).replace(/\s+/g," ");link=links[link.toLowerCase()];if(!link||!link.href){var text=cap[0].charAt(0);return{type:"text",raw:text,text:text}}return outputLink(cap,link,cap[0])}};_proto.emStrong=function emStrong(src,maskedSrc,prevChar){if(prevChar===void 0){prevChar=""}var match=this.rules.inline.emStrong.lDelim.exec(src);if(!match)return;if(match[3]&&prevChar.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))return;var nextChar=match[1]||match[2]||"";if(!nextChar||nextChar&&(prevChar===""||this.rules.inline.punctuation.exec(prevChar))){var lLength=match[0].length-1;var rDelim,rLength,delimTotal=lLength,midDelimTotal=0;var endReg=match[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;endReg.lastIndex=0;maskedSrc=maskedSrc.slice(-1*src.length+lLength);while((match=endReg.exec(maskedSrc))!=null){rDelim=match[1]||match[2]||match[3]||match[4]||match[5]||match[6];if(!rDelim)continue;rLength=rDelim.length;if(match[3]||match[4]){delimTotal+=rLength;continue}else if(match[5]||match[6]){if(lLength%3&&!((lLength+rLength)%3)){midDelimTotal+=rLength;continue}}delimTotal-=rLength;if(delimTotal>0)continue;if(delimTotal+midDelimTotal-rLength<=0&&!maskedSrc.slice(endReg.lastIndex).match(endReg)){rLength=Math.min(rLength,rLength+delimTotal+midDelimTotal)}if(Math.min(lLength,rLength)%2){return{type:"em",raw:src.slice(0,lLength+match.index+rLength+1),text:src.slice(1,lLength+match.index+rLength)}}if(Math.min(lLength,rLength)%2===0){return{type:"strong",raw:src.slice(0,lLength+match.index+rLength+1),text:src.slice(2,lLength+match.index+rLength-1)}}}}};_proto.codespan=function codespan(src){var cap=this.rules.inline.code.exec(src);if(cap){var text=cap[2].replace(/\n/g," ");var hasNonSpaceChars=/[^ ]/.test(text);var hasSpaceCharsOnBothEnds=/^ /.test(text)&&/ $/.test(text);if(hasNonSpaceChars&&hasSpaceCharsOnBothEnds){text=text.substring(1,text.length-1)}text=_escape(text,true);return{type:"codespan",raw:cap[0],text:text}}};_proto.br=function br(src){var cap=this.rules.inline.br.exec(src);if(cap){return{type:"br",raw:cap[0]}}};_proto.del=function del(src){var cap=this.rules.inline.del.exec(src);if(cap){return{type:"del",raw:cap[0],text:cap[2]}}};_proto.autolink=function autolink(src,mangle){var cap=this.rules.inline.autolink.exec(src);if(cap){var text,href;if(cap[2]==="@"){text=_escape(this.options.mangle?mangle(cap[1]):cap[1]);href="mailto:"+text}else{text=_escape(cap[1]);href=text}return{type:"link",raw:cap[0],text:text,href:href,tokens:[{type:"text",raw:text,text:text}]}}};_proto.url=function url(src,mangle){var cap;if(cap=this.rules.inline.url.exec(src)){var text,href;if(cap[2]==="@"){text=_escape(this.options.mangle?mangle(cap[0]):cap[0]);href="mailto:"+text}else{var prevCapZero;do{prevCapZero=cap[0];cap[0]=this.rules.inline._backpedal.exec(cap[0])[0]}while(prevCapZero!==cap[0]);text=_escape(cap[0]);if(cap[1]==="www."){href="http://"+text}else{href=text}}return{type:"link",raw:cap[0],text:text,href:href,tokens:[{type:"text",raw:text,text:text}]}}};_proto.inlineText=function inlineText(src,inRawBlock,smartypants){var cap=this.rules.inline.text.exec(src);if(cap){var text;if(inRawBlock){text=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):_escape(cap[0]):cap[0]}else{text=_escape(this.options.smartypants?smartypants(cap[0]):cap[0])}return{type:"text",raw:cap[0],text:text}}};return Tokenizer}();var noopTest=helpers.noopTest,edit=helpers.edit,merge$1=helpers.merge;var block$1={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:"+"<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)"+"|comment[^\\n]*(\\n+|$)"+"|<\\?[\\s\\S]*?(?:\\?>\\n*|$)"+"|<![A-Z][\\s\\S]*?(?:>\\n*|$)"+"|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)"+"|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)"+"|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)"+"|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)"+")",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:noopTest,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};block$1._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/;block$1._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block$1.def=edit(block$1.def).replace("label",block$1._label).replace("title",block$1._title).getRegex();block$1.bullet=/(?:[*+-]|\d{1,9}[.)])/;block$1.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/;block$1.item=edit(block$1.item,"gm").replace(/bull/g,block$1.bullet).getRegex();block$1.listItemStart=edit(/^( *)(bull) */).replace("bull",block$1.bullet).getRegex();block$1.list=edit(block$1.list).replace(/bull/g,block$1.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block$1.def.source+")").getRegex();block$1._tag="address|article|aside|base|basefont|blockquote|body|caption"+"|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption"+"|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe"+"|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option"+"|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr"+"|track|ul";block$1._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block$1.html=edit(block$1.html,"i").replace("comment",block$1._comment).replace("tag",block$1._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block$1.paragraph=edit(block$1._paragraph).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block$1._tag).getRegex();block$1.blockquote=edit(block$1.blockquote).replace("paragraph",block$1.paragraph).getRegex();block$1.normal=merge$1({},block$1);block$1.gfm=merge$1({},block$1.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n"+" {0,3}([-:]+ *\\|[-| :]*)"+"(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n"+" {0,3}\\|?( *[-:]+[-| :]*)"+"(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block$1.gfm.nptable=edit(block$1.gfm.nptable).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block$1._tag).getRegex();block$1.gfm.table=edit(block$1.gfm.table).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block$1._tag).getRegex();block$1.pedantic=merge$1({},block$1.normal,{html:edit("^ *(?:comment *(?:\\n|\\s*$)"+"|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)"+"|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",block$1._comment).replace(/tag/g,"(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub"+"|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)"+"\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block$1.normal._paragraph).replace("hr",block$1.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",block$1.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var inline$1={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment"+"|^</[a-zA-Z][\\w:-]*\\s*>"+"|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>"+"|^<\\?[\\s\\S]*?\\?>"+"|^<![a-zA-Z]+\\s[\\s\\S]*?>"+"|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_]*?\*[^_]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^*]*?\_[^*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline$1._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline$1.punctuation=edit(inline$1.punctuation).replace(/punctuation/g,inline$1._punctuation).getRegex();inline$1.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline$1.escapedEmSt=/\\\*|\\_/g;inline$1._comment=edit(block$1._comment).replace("(?:--\x3e|$)","--\x3e").getRegex();inline$1.emStrong.lDelim=edit(inline$1.emStrong.lDelim).replace(/punct/g,inline$1._punctuation).getRegex();inline$1.emStrong.rDelimAst=edit(inline$1.emStrong.rDelimAst,"g").replace(/punct/g,inline$1._punctuation).getRegex();inline$1.emStrong.rDelimUnd=edit(inline$1.emStrong.rDelimUnd,"g").replace(/punct/g,inline$1._punctuation).getRegex();inline$1._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline$1._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline$1._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline$1.autolink=edit(inline$1.autolink).replace("scheme",inline$1._scheme).replace("email",inline$1._email).getRegex();inline$1._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline$1.tag=edit(inline$1.tag).replace("comment",inline$1._comment).replace("attribute",inline$1._attribute).getRegex();inline$1._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline$1._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline$1._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline$1.link=edit(inline$1.link).replace("label",inline$1._label).replace("href",inline$1._href).replace("title",inline$1._title).getRegex();inline$1.reflink=edit(inline$1.reflink).replace("label",inline$1._label).getRegex();inline$1.reflinkSearch=edit(inline$1.reflinkSearch,"g").replace("reflink",inline$1.reflink).replace("nolink",inline$1.nolink).getRegex();inline$1.normal=merge$1({},inline$1);inline$1.pedantic=merge$1({},inline$1.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline$1._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline$1._label).getRegex()});inline$1.gfm=merge$1({},inline$1.normal,{escape:edit(inline$1.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/});inline$1.gfm.url=edit(inline$1.gfm.url,"i").replace("email",inline$1.gfm._extended_email).getRegex();inline$1.breaks=merge$1({},inline$1.gfm,{br:edit(inline$1.br).replace("{2,}","*").getRegex(),text:edit(inline$1.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var rules={block:block$1,inline:inline$1};var defaults$3=defaults$5.defaults;var block=rules.block,inline=rules.inline;var repeatString=helpers.repeatString;function smartypants(text){return text.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mangle(text){var out="",i,ch;var l=text.length;for(i=0;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>.5){ch="x"+ch.toString(16)}out+="&#"+ch+";"}return out}var Lexer_1=function(){function Lexer(options){this.tokens=[];this.tokens.links=Object.create(null);this.options=options||defaults$3;this.options.tokenizer=this.options.tokenizer||new Tokenizer_1;this.tokenizer=this.options.tokenizer;this.tokenizer.options=this.options;var rules={block:block.normal,inline:inline.normal};if(this.options.pedantic){rules.block=block.pedantic;rules.inline=inline.pedantic}else if(this.options.gfm){rules.block=block.gfm;if(this.options.breaks){rules.inline=inline.breaks}else{rules.inline=inline.gfm}}this.tokenizer.rules=rules}Lexer.lex=function lex(src,options){var lexer=new Lexer(options);return lexer.lex(src)};Lexer.lexInline=function lexInline(src,options){var lexer=new Lexer(options);return lexer.inlineTokens(src)};var _proto=Lexer.prototype;_proto.lex=function lex(src){src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");this.blockTokens(src,this.tokens,true);this.inline(this.tokens);return this.tokens};_proto.blockTokens=function blockTokens(src,tokens,top){if(tokens===void 0){tokens=[]}if(top===void 0){top=true}if(this.options.pedantic){src=src.replace(/^ +$/gm,"")}var token,i,l,lastToken;while(src){if(token=this.tokenizer.space(src)){src=src.substring(token.raw.length);if(token.type){tokens.push(token)}continue}if(token=this.tokenizer.code(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&lastToken.type==="paragraph"){lastToken.raw+="\n"+token.raw;lastToken.text+="\n"+token.text}else{tokens.push(token)}continue}if(token=this.tokenizer.fences(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.heading(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.nptable(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.hr(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.blockquote(src)){src=src.substring(token.raw.length);token.tokens=this.blockTokens(token.text,[],top);tokens.push(token);continue}if(token=this.tokenizer.list(src)){src=src.substring(token.raw.length);l=token.items.length;for(i=0;i<l;i++){token.items[i].tokens=this.blockTokens(token.items[i].text,[],false)}tokens.push(token);continue}if(token=this.tokenizer.html(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(top&&(token=this.tokenizer.def(src))){src=src.substring(token.raw.length);if(!this.tokens.links[token.tag]){this.tokens.links[token.tag]={href:token.href,title:token.title}}continue}if(token=this.tokenizer.table(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.lheading(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(top&&(token=this.tokenizer.paragraph(src))){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.text(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&lastToken.type==="text"){lastToken.raw+="\n"+token.raw;lastToken.text+="\n"+token.text}else{tokens.push(token)}continue}if(src){var errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}else{throw new Error(errMsg)}}}return tokens};_proto.inline=function inline(tokens){var i,j,k,l2,row,token;var l=tokens.length;for(i=0;i<l;i++){token=tokens[i];switch(token.type){case"paragraph":case"text":case"heading":{token.tokens=[];this.inlineTokens(token.text,token.tokens);break}case"table":{token.tokens={header:[],cells:[]};l2=token.header.length;for(j=0;j<l2;j++){token.tokens.header[j]=[];this.inlineTokens(token.header[j],token.tokens.header[j])}l2=token.cells.length;for(j=0;j<l2;j++){row=token.cells[j];token.tokens.cells[j]=[];for(k=0;k<row.length;k++){token.tokens.cells[j][k]=[];this.inlineTokens(row[k],token.tokens.cells[j][k])}}break}case"blockquote":{this.inline(token.tokens);break}case"list":{l2=token.items.length;for(j=0;j<l2;j++){this.inline(token.items[j].tokens)}break}}}return tokens};_proto.inlineTokens=function inlineTokens(src,tokens,inLink,inRawBlock){if(tokens===void 0){tokens=[]}if(inLink===void 0){inLink=false}if(inRawBlock===void 0){inRawBlock=false}var token,lastToken;var maskedSrc=src;var match;var keepPrevChar,prevChar;if(this.tokens.links){var links=Object.keys(this.tokens.links);if(links.length>0){while((match=this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc))!=null){if(links.includes(match[0].slice(match[0].lastIndexOf("[")+1,-1))){maskedSrc=maskedSrc.slice(0,match.index)+"["+repeatString("a",match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}}}while((match=this.tokenizer.rules.inline.blockSkip.exec(maskedSrc))!=null){maskedSrc=maskedSrc.slice(0,match.index)+"["+repeatString("a",match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex)}while((match=this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc))!=null){maskedSrc=maskedSrc.slice(0,match.index)+"++"+maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex)}while(src){if(!keepPrevChar){prevChar=""}keepPrevChar=false;if(token=this.tokenizer.escape(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.tag(src,inLink,inRawBlock)){src=src.substring(token.raw.length);inLink=token.inLink;inRawBlock=token.inRawBlock;var _lastToken=tokens[tokens.length-1];if(_lastToken&&token.type==="text"&&_lastToken.type==="text"){_lastToken.raw+=token.raw;_lastToken.text+=token.text}else{tokens.push(token)}continue}if(token=this.tokenizer.link(src)){src=src.substring(token.raw.length);if(token.type==="link"){token.tokens=this.inlineTokens(token.text,[],true,inRawBlock)}tokens.push(token);continue}if(token=this.tokenizer.reflink(src,this.tokens.links)){src=src.substring(token.raw.length);var _lastToken2=tokens[tokens.length-1];if(token.type==="link"){token.tokens=this.inlineTokens(token.text,[],true,inRawBlock);tokens.push(token)}else if(_lastToken2&&token.type==="text"&&_lastToken2.type==="text"){_lastToken2.raw+=token.raw;_lastToken2.text+=token.text}else{tokens.push(token)}continue}if(token=this.tokenizer.emStrong(src,maskedSrc,prevChar)){src=src.substring(token.raw.length);token.tokens=this.inlineTokens(token.text,[],inLink,inRawBlock);tokens.push(token);continue}if(token=this.tokenizer.codespan(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.br(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.del(src)){src=src.substring(token.raw.length);token.tokens=this.inlineTokens(token.text,[],inLink,inRawBlock);tokens.push(token);continue}if(token=this.tokenizer.autolink(src,mangle)){src=src.substring(token.raw.length);tokens.push(token);continue}if(!inLink&&(token=this.tokenizer.url(src,mangle))){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.inlineText(src,inRawBlock,smartypants)){src=src.substring(token.raw.length);if(token.raw.slice(-1)!=="_"){prevChar=token.raw.slice(-1)}keepPrevChar=true;lastToken=tokens[tokens.length-1];if(lastToken&&lastToken.type==="text"){lastToken.raw+=token.raw;lastToken.text+=token.text}else{tokens.push(token)}continue}if(src){var errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}else{throw new Error(errMsg)}}}return tokens};_createClass(Lexer,null,[{key:"rules",get:function get(){return{block:block,inline:inline}}}]);return Lexer}();var defaults$2=defaults$5.defaults;var cleanUrl=helpers.cleanUrl,escape$1=helpers.escape;var Renderer_1=function(){function Renderer(options){this.options=options||defaults$2}var _proto=Renderer.prototype;_proto.code=function code(_code,infostring,escaped){var lang=(infostring||"").match(/\S*/)[0];if(this.options.highlight){var out=this.options.highlight(_code,lang);if(out!=null&&out!==_code){escaped=true;_code=out}}_code=_code.replace(/\n$/,"")+"\n";if(!lang){return"<pre><code>"+(escaped?_code:escape$1(_code,true))+"</code></pre>\n"}return'<pre><code class="'+this.options.langPrefix+escape$1(lang,true)+'">'+(escaped?_code:escape$1(_code,true))+"</code></pre>\n"};_proto.blockquote=function blockquote(quote){return"<blockquote>\n"+quote+"</blockquote>\n"};_proto.html=function html(_html){return _html};_proto.heading=function heading(text,level,raw,slugger){if(this.options.headerIds){return"<h"+level+' id="'+this.options.headerPrefix+slugger.slug(raw)+'">'+text+"</h"+level+">\n"}return"<h"+level+">"+text+"</h"+level+">\n"};_proto.hr=function hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};_proto.list=function list(body,ordered,start){var type=ordered?"ol":"ul",startatt=ordered&&start!==1?' start="'+start+'"':"";return"<"+type+startatt+">\n"+body+"</"+type+">\n"};_proto.listitem=function listitem(text){return"<li>"+text+"</li>\n"};_proto.checkbox=function checkbox(checked){return"<input "+(checked?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "};_proto.paragraph=function paragraph(text){return"<p>"+text+"</p>\n"};_proto.table=function table(header,body){if(body)body="<tbody>"+body+"</tbody>";return"<table>\n"+"<thead>\n"+header+"</thead>\n"+body+"</table>\n"};_proto.tablerow=function tablerow(content){return"<tr>\n"+content+"</tr>\n"};_proto.tablecell=function tablecell(content,flags){var type=flags.header?"th":"td";var tag=flags.align?"<"+type+' align="'+flags.align+'">':"<"+type+">";return tag+content+"</"+type+">\n"};_proto.strong=function strong(text){return"<strong>"+text+"</strong>"};_proto.em=function em(text){return"<em>"+text+"</em>"};_proto.codespan=function codespan(text){return"<code>"+text+"</code>"};_proto.br=function br(){return this.options.xhtml?"<br/>":"<br>"};_proto.del=function del(text){return"<del>"+text+"</del>"};_proto.link=function link(href,title,text){href=cleanUrl(this.options.sanitize,this.options.baseUrl,href);if(href===null){return text}var out='<a href="'+escape$1(href)+'"';if(title){out+=' title="'+title+'"'}out+=">"+text+"</a>";return out};_proto.image=function image(href,title,text){href=cleanUrl(this.options.sanitize,this.options.baseUrl,href);if(href===null){return text}var out='<img src="'+href+'" alt="'+text+'"';if(title){out+=' title="'+title+'"'}out+=this.options.xhtml?"/>":">";return out};_proto.text=function text(_text){return _text};return Renderer}();var TextRenderer_1=function(){function TextRenderer(){}var _proto=TextRenderer.prototype;_proto.strong=function strong(text){return text};_proto.em=function em(text){return text};_proto.codespan=function codespan(text){return text};_proto.del=function del(text){return text};_proto.html=function html(text){return text};_proto.text=function text(_text){return _text};_proto.link=function link(href,title,text){return""+text};_proto.image=function image(href,title,text){return""+text};_proto.br=function br(){return""};return TextRenderer}();var Slugger_1=function(){function Slugger(){this.seen={}}var _proto=Slugger.prototype;_proto.serialize=function serialize(value){return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")};_proto.getNextSafeSlug=function getNextSafeSlug(originalSlug,isDryRun){var slug=originalSlug;var occurenceAccumulator=0;if(this.seen.hasOwnProperty(slug)){occurenceAccumulator=this.seen[originalSlug];do{occurenceAccumulator++;slug=originalSlug+"-"+occurenceAccumulator}while(this.seen.hasOwnProperty(slug))}if(!isDryRun){this.seen[originalSlug]=occurenceAccumulator;this.seen[slug]=0}return slug};_proto.slug=function slug(value,options){if(options===void 0){options={}}var slug=this.serialize(value);return this.getNextSafeSlug(slug,options.dryrun)};return Slugger}();var defaults$1=defaults$5.defaults;var unescape=helpers.unescape;var Parser_1=function(){function Parser(options){this.options=options||defaults$1;this.options.renderer=this.options.renderer||new Renderer_1;this.renderer=this.options.renderer;this.renderer.options=this.options;this.textRenderer=new TextRenderer_1;this.slugger=new Slugger_1}Parser.parse=function parse(tokens,options){var parser=new Parser(options);return parser.parse(tokens)};Parser.parseInline=function parseInline(tokens,options){var parser=new Parser(options);return parser.parseInline(tokens)};var _proto=Parser.prototype;_proto.parse=function parse(tokens,top){if(top===void 0){top=true}var out="",i,j,k,l2,l3,row,cell,header,body,token,ordered,start,loose,itemBody,item,checked,task,checkbox;var l=tokens.length;for(i=0;i<l;i++){token=tokens[i];switch(token.type){case"space":{continue}case"hr":{out+=this.renderer.hr();continue}case"heading":{out+=this.renderer.heading(this.parseInline(token.tokens),token.depth,unescape(this.parseInline(token.tokens,this.textRenderer)),this.slugger);continue}case"code":{out+=this.renderer.code(token.text,token.lang,token.escaped);continue}case"table":{header="";cell="";l2=token.header.length;for(j=0;j<l2;j++){cell+=this.renderer.tablecell(this.parseInline(token.tokens.header[j]),{header:true,align:token.align[j]})}header+=this.renderer.tablerow(cell);body="";l2=token.cells.length;for(j=0;j<l2;j++){row=token.tokens.cells[j];cell="";l3=row.length;for(k=0;k<l3;k++){cell+=this.renderer.tablecell(this.parseInline(row[k]),{header:false,align:token.align[k]})}body+=this.renderer.tablerow(cell)}out+=this.renderer.table(header,body);continue}case"blockquote":{body=this.parse(token.tokens);out+=this.renderer.blockquote(body);continue}case"list":{ordered=token.ordered;start=token.start;loose=token.loose;l2=token.items.length;body="";for(j=0;j<l2;j++){item=token.items[j];checked=item.checked;task=item.task;itemBody="";if(item.task){checkbox=this.renderer.checkbox(checked);if(loose){if(item.tokens.length>0&&item.tokens[0].type==="text"){item.tokens[0].text=checkbox+" "+item.tokens[0].text;if(item.tokens[0].tokens&&item.tokens[0].tokens.length>0&&item.tokens[0].tokens[0].type==="text"){item.tokens[0].tokens[0].text=checkbox+" "+item.tokens[0].tokens[0].text}}else{item.tokens.unshift({type:"text",text:checkbox})}}else{itemBody+=checkbox}}itemBody+=this.parse(item.tokens,loose);body+=this.renderer.listitem(itemBody,task,checked)}out+=this.renderer.list(body,ordered,start);continue}case"html":{out+=this.renderer.html(token.text);continue}case"paragraph":{out+=this.renderer.paragraph(this.parseInline(token.tokens));continue}case"text":{body=token.tokens?this.parseInline(token.tokens):token.text;while(i+1<l&&tokens[i+1].type==="text"){token=tokens[++i];body+="\n"+(token.tokens?this.parseInline(token.tokens):token.text)}out+=top?this.renderer.paragraph(body):body;continue}default:{var errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent){console.error(errMsg);return}else{throw new Error(errMsg)}}}}return out};_proto.parseInline=function parseInline(tokens,renderer){renderer=renderer||this.renderer;var out="",i,token;var l=tokens.length;for(i=0;i<l;i++){token=tokens[i];switch(token.type){case"escape":{out+=renderer.text(token.text);break}case"html":{out+=renderer.html(token.text);break}case"link":{out+=renderer.link(token.href,token.title,this.parseInline(token.tokens,renderer));break}case"image":{out+=renderer.image(token.href,token.title,token.text);break}case"strong":{out+=renderer.strong(this.parseInline(token.tokens,renderer));break}case"em":{out+=renderer.em(this.parseInline(token.tokens,renderer));break}case"codespan":{out+=renderer.codespan(token.text);break}case"br":{out+=renderer.br();break}case"del":{out+=renderer.del(this.parseInline(token.tokens,renderer));break}case"text":{out+=renderer.text(token.text);break}default:{var errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent){console.error(errMsg);return}else{throw new Error(errMsg)}}}}return out};return Parser}();var merge=helpers.merge,checkSanitizeDeprecation=helpers.checkSanitizeDeprecation,escape=helpers.escape;var getDefaults=defaults$5.getDefaults,changeDefaults=defaults$5.changeDefaults,defaults=defaults$5.defaults;function marked(src,opt,callback){if(typeof src==="undefined"||src===null){throw new Error("marked(): input parameter is undefined or null")}if(typeof src!=="string"){throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(src)+", string expected")}if(typeof opt==="function"){callback=opt;opt=null}opt=merge({},marked.defaults,opt||{});checkSanitizeDeprecation(opt);if(callback){var highlight=opt.highlight;var tokens;try{tokens=Lexer_1.lex(src,opt)}catch(e){return callback(e)}var done=function done(err){var out;if(!err){try{out=Parser_1.parse(tokens,opt)}catch(e){err=e}}opt.highlight=highlight;return err?callback(err):callback(null,out)};if(!highlight||highlight.length<3){return done()}delete opt.highlight;if(!tokens.length)return done();var pending=0;marked.walkTokens(tokens,function(token){if(token.type==="code"){pending++;setTimeout(function(){highlight(token.text,token.lang,function(err,code){if(err){return done(err)}if(code!=null&&code!==token.text){token.text=code;token.escaped=true}pending--;if(pending===0){done()}})},0)}});if(pending===0){done()}return}try{var _tokens=Lexer_1.lex(src,opt);if(opt.walkTokens){marked.walkTokens(_tokens,opt.walkTokens)}return Parser_1.parse(_tokens,opt)}catch(e){e.message+="\nPlease report this to https://github.com/markedjs/marked.";if(opt.silent){return"<p>An error occurred:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}}marked.options=marked.setOptions=function(opt){merge(marked.defaults,opt);changeDefaults(marked.defaults);return marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(extension){var opts=merge({},extension);if(extension.renderer){(function(){var renderer=marked.defaults.renderer||new Renderer_1;var _loop=function _loop(prop){var prevRenderer=renderer[prop];renderer[prop]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var ret=extension.renderer[prop].apply(renderer,args);if(ret===false){ret=prevRenderer.apply(renderer,args)}return ret}};for(var prop in extension.renderer){_loop(prop)}opts.renderer=renderer})()}if(extension.tokenizer){(function(){var tokenizer=marked.defaults.tokenizer||new Tokenizer_1;var _loop2=function _loop2(prop){var prevTokenizer=tokenizer[prop];tokenizer[prop]=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var ret=extension.tokenizer[prop].apply(tokenizer,args);if(ret===false){ret=prevTokenizer.apply(tokenizer,args)}return ret}};for(var prop in extension.tokenizer){_loop2(prop)}opts.tokenizer=tokenizer})()}if(extension.walkTokens){var walkTokens=marked.defaults.walkTokens;opts.walkTokens=function(token){extension.walkTokens(token);if(walkTokens){walkTokens(token)}}}marked.setOptions(opts)};marked.walkTokens=function(tokens,callback){for(var _iterator=_createForOfIteratorHelperLoose(tokens),_step;!(_step=_iterator()).done;){var token=_step.value;callback(token);switch(token.type){case"table":{for(var _iterator2=_createForOfIteratorHelperLoose(token.tokens.header),_step2;!(_step2=_iterator2()).done;){var cell=_step2.value;marked.walkTokens(cell,callback)}for(var _iterator3=_createForOfIteratorHelperLoose(token.tokens.cells),_step3;!(_step3=_iterator3()).done;){var row=_step3.value;for(var _iterator4=_createForOfIteratorHelperLoose(row),_step4;!(_step4=_iterator4()).done;){var _cell=_step4.value;marked.walkTokens(_cell,callback)}}break}case"list":{marked.walkTokens(token.items,callback);break}default:{if(token.tokens){marked.walkTokens(token.tokens,callback)}}}}};marked.parseInline=function(src,opt){if(typeof src==="undefined"||src===null){throw new Error("marked.parseInline(): input parameter is undefined or null")}if(typeof src!=="string"){throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(src)+", string expected")}opt=merge({},marked.defaults,opt||{});checkSanitizeDeprecation(opt);try{var tokens=Lexer_1.lexInline(src,opt);if(opt.walkTokens){marked.walkTokens(tokens,opt.walkTokens)}return Parser_1.parseInline(tokens,opt)}catch(e){e.message+="\nPlease report this to https://github.com/markedjs/marked.";if(opt.silent){return"<p>An error occurred:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}};marked.Parser=Parser_1;marked.parser=Parser_1.parse;marked.Renderer=Renderer_1;marked.TextRenderer=TextRenderer_1;marked.Lexer=Lexer_1;marked.lexer=Lexer_1.lex;marked.Tokenizer=Tokenizer_1;marked.Slugger=Slugger_1;marked.parse=marked;var marked_1=marked;return marked_1})},{}],125:[function(require,module,exports){let urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";let customAlphabet=(alphabet,size)=>{return()=>{let id="";let i=size;while(i--){id+=alphabet[Math.random()*alphabet.length|0]}return id}};let nanoid=(size=21)=>{let id="";let i=size;while(i--){id+=urlAlphabet[Math.random()*64|0]}return id};module.exports={nanoid:nanoid,customAlphabet:customAlphabet}},{}],126:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root.parseSrcset=factory()}})(this,function(){return function(input){function isSpace(c){return c===" "||c==="\t"||c==="\n"||c==="\f"||c==="\r"}function collectCharacters(regEx){var chars,match=regEx.exec(input.substring(pos));if(match){chars=match[0];pos+=chars.length;return chars}}var inputLength=input.length,regexLeadingSpaces=/^[ \t\n\r\u000c]+/,regexLeadingCommasOrSpaces=/^[, \t\n\r\u000c]+/,regexLeadingNotSpaces=/^[^ \t\n\r\u000c]+/,regexTrailingCommas=/[,]+$/,regexNonNegativeInteger=/^\d+$/,regexFloatingPoint=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,url,descriptors,currentDescriptor,state,c,pos=0,candidates=[];while(true){collectCharacters(regexLeadingCommasOrSpaces);if(pos>=inputLength){return candidates}url=collectCharacters(regexLeadingNotSpaces);descriptors=[];if(url.slice(-1)===","){url=url.replace(regexTrailingCommas,"");parseDescriptors()}else{tokenize()}}function tokenize(){collectCharacters(regexLeadingSpaces);currentDescriptor="";state="in descriptor";while(true){c=input.charAt(pos);if(state==="in descriptor"){if(isSpace(c)){if(currentDescriptor){descriptors.push(currentDescriptor);currentDescriptor="";state="after descriptor"}}else if(c===","){pos+=1;if(currentDescriptor){descriptors.push(currentDescriptor)}parseDescriptors();return}else if(c==="("){currentDescriptor=currentDescriptor+c;state="in parens"}else if(c===""){if(currentDescriptor){descriptors.push(currentDescriptor)}parseDescriptors();return}else{currentDescriptor=currentDescriptor+c}}else if(state==="in parens"){if(c===")"){currentDescriptor=currentDescriptor+c;state="in descriptor"}else if(c===""){descriptors.push(currentDescriptor);parseDescriptors();return}else{currentDescriptor=currentDescriptor+c}}else if(state==="after descriptor"){if(isSpace(c)){}else if(c===""){parseDescriptors();return}else{state="in descriptor";pos-=1}}pos+=1}}function parseDescriptors(){var pError=false,w,d,h,i,candidate={},desc,lastChar,value,intVal,floatVal;for(i=0;i<descriptors.length;i++){desc=descriptors[i];lastChar=desc[desc.length-1];value=desc.substring(0,desc.length-1);intVal=parseInt(value,10);floatVal=parseFloat(value);if(regexNonNegativeInteger.test(value)&&lastChar==="w"){if(w||d){pError=true}if(intVal===0){pError=true}else{w=intVal}}else if(regexFloatingPoint.test(value)&&lastChar==="x"){if(w||d||h){pError=true}if(floatVal<0){pError=true}else{d=floatVal}}else if(regexNonNegativeInteger.test(value)&&lastChar==="h"){if(h||d){pError=true}if(intVal===0){pError=true}else{h=intVal}}else{pError=true}}if(!pError){candidate.url=url;if(w){candidate.w=w}if(d){candidate.d=d}if(h){candidate.h=h}candidates.push(candidate)}else if(console&&console.log){console.log("Invalid srcset descriptor found in '"+input+"' at '"+desc+"'.")}}}})},{}],127:[function(require,module,exports){"use strict";let Container=require("./container");class AtRule extends Container{constructor(defaults){super(defaults);this.type="atrule"}append(...children){if(!this.proxyOf.nodes)this.nodes=[];return super.append(...children)}prepend(...children){if(!this.proxyOf.nodes)this.nodes=[];return super.prepend(...children)}}module.exports=AtRule;AtRule.default=AtRule;Container.registerAtRule(AtRule)},{"./container":129}],128:[function(require,module,exports){"use strict";let Node=require("./node");class Comment extends Node{constructor(defaults){super(defaults);this.type="comment"}}module.exports=Comment;Comment.default=Comment},{"./node":137}],129:[function(require,module,exports){"use strict";let Declaration=require("./declaration");let{isClean:isClean}=require("./symbols");let Comment=require("./comment");let Node=require("./node");let parse,Rule,AtRule;function cleanSource(nodes){return nodes.map(i=>{if(i.nodes)i.nodes=cleanSource(i.nodes);delete i.source;return i})}function markDirtyUp(node){node[isClean]=false;if(node.proxyOf.nodes){for(let i of node.proxyOf.nodes){markDirtyUp(i)}}}function rebuild(node){if(node.type==="atrule"){Object.setPrototypeOf(node,AtRule.prototype)}else if(node.type==="rule"){Object.setPrototypeOf(node,Rule.prototype)}else if(node.type==="decl"){Object.setPrototypeOf(node,Declaration.prototype)}else if(node.type==="comment"){Object.setPrototypeOf(node,Comment.prototype)}if(node.nodes){node.nodes.forEach(child=>{rebuild(child)})}}class Container extends Node{push(child){child.parent=this;this.proxyOf.nodes.push(child);return this}each(callback){if(!this.proxyOf.nodes)return undefined;let iterator=this.getIterator();let index,result;while(this.indexes[iterator]<this.proxyOf.nodes.length){index=this.indexes[iterator];result=callback(this.proxyOf.nodes[index],index);if(result===false)break;this.indexes[iterator]+=1}delete this.indexes[iterator];return result}walk(callback){return this.each((child,i)=>{let result;try{result=callback(child,i)}catch(e){throw child.addToError(e)}if(result!==false&&child.walk){result=child.walk(callback)}return result})}walkDecls(prop,callback){if(!callback){callback=prop;return this.walk((child,i)=>{if(child.type==="decl"){return callback(child,i)}})}if(prop instanceof RegExp){return this.walk((child,i)=>{if(child.type==="decl"&&prop.test(child.prop)){return callback(child,i)}})}return this.walk((child,i)=>{if(child.type==="decl"&&child.prop===prop){return callback(child,i)}})}walkRules(selector,callback){if(!callback){callback=selector;return this.walk((child,i)=>{if(child.type==="rule"){return callback(child,i)}})}if(selector instanceof RegExp){return this.walk((child,i)=>{if(child.type==="rule"&&selector.test(child.selector)){return callback(child,i)}})}return this.walk((child,i)=>{if(child.type==="rule"&&child.selector===selector){return callback(child,i)}})}walkAtRules(name,callback){if(!callback){callback=name;return this.walk((child,i)=>{if(child.type==="atrule"){return callback(child,i)}})}if(name instanceof RegExp){return this.walk((child,i)=>{if(child.type==="atrule"&&name.test(child.name)){return callback(child,i)}})}return this.walk((child,i)=>{if(child.type==="atrule"&&child.name===name){return callback(child,i)}})}walkComments(callback){return this.walk((child,i)=>{if(child.type==="comment"){return callback(child,i)}})}append(...children){for(let child of children){let nodes=this.normalize(child,this.last);for(let node of nodes)this.proxyOf.nodes.push(node)}this.markDirty();return this}prepend(...children){children=children.reverse();for(let child of children){let nodes=this.normalize(child,this.first,"prepend").reverse();for(let node of nodes)this.proxyOf.nodes.unshift(node);for(let id in this.indexes){this.indexes[id]=this.indexes[id]+nodes.length}}this.markDirty();return this}cleanRaws(keepBetween){super.cleanRaws(keepBetween);if(this.nodes){for(let node of this.nodes)node.cleanRaws(keepBetween)}}insertBefore(exist,add){exist=this.index(exist);let type=exist===0?"prepend":false;let nodes=this.normalize(add,this.proxyOf.nodes[exist],type).reverse();for(let node of nodes)this.proxyOf.nodes.splice(exist,0,node);let index;for(let id in this.indexes){index=this.indexes[id];if(exist<=index){this.indexes[id]=index+nodes.length}}this.markDirty();return this}insertAfter(exist,add){exist=this.index(exist);let nodes=this.normalize(add,this.proxyOf.nodes[exist]).reverse();for(let node of nodes)this.proxyOf.nodes.splice(exist+1,0,node);let index;for(let id in this.indexes){index=this.indexes[id];if(exist<index){this.indexes[id]=index+nodes.length}}this.markDirty();return this}removeChild(child){child=this.index(child);this.proxyOf.nodes[child].parent=undefined;this.proxyOf.nodes.splice(child,1);let index;for(let id in this.indexes){index=this.indexes[id];if(index>=child){this.indexes[id]=index-1}}this.markDirty();return this}removeAll(){for(let node of this.proxyOf.nodes)node.parent=undefined;this.proxyOf.nodes=[];this.markDirty();return this}replaceValues(pattern,opts,callback){if(!callback){callback=opts;opts={}}this.walkDecls(decl=>{if(opts.props&&!opts.props.includes(decl.prop))return;if(opts.fast&&!decl.value.includes(opts.fast))return;decl.value=decl.value.replace(pattern,callback)});this.markDirty();return this}every(condition){return this.nodes.every(condition)}some(condition){return this.nodes.some(condition)}index(child){if(typeof child==="number")return child;if(child.proxyOf)child=child.proxyOf;return this.proxyOf.nodes.indexOf(child)}get first(){if(!this.proxyOf.nodes)return undefined;return this.proxyOf.nodes[0]}get last(){if(!this.proxyOf.nodes)return undefined;return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(nodes,sample){if(typeof nodes==="string"){nodes=cleanSource(parse(nodes).nodes)}else if(Array.isArray(nodes)){nodes=nodes.slice(0);for(let i of nodes){if(i.parent)i.parent.removeChild(i,"ignore")}}else if(nodes.type==="root"){nodes=nodes.nodes.slice(0);for(let i of nodes){if(i.parent)i.parent.removeChild(i,"ignore")}}else if(nodes.type){nodes=[nodes]}else if(nodes.prop){if(typeof nodes.value==="undefined"){throw new Error("Value field is missed in node creation")}else if(typeof nodes.value!=="string"){nodes.value=String(nodes.value)}nodes=[new Declaration(nodes)]}else if(nodes.selector){nodes=[new Rule(nodes)]}else if(nodes.name){nodes=[new AtRule(nodes)]}else if(nodes.text){nodes=[new Comment(nodes)]}else{throw new Error("Unknown node type in node creation")}let processed=nodes.map(i=>{if(typeof i.markDirty!=="function")rebuild(i);i=i.proxyOf;if(i.parent)i.parent.removeChild(i);if(i[isClean])markDirtyUp(i);if(typeof i.raws.before==="undefined"){if(sample&&typeof sample.raws.before!=="undefined"){i.raws.before=sample.raws.before.replace(/\S/g,"")}}i.parent=this;return i});return processed}getProxyProcessor(){return{set(node,prop,value){if(node[prop]===value)return true;node[prop]=value;if(prop==="name"||prop==="params"||prop==="selector"){node.markDirty()}return true},get(node,prop){if(prop==="proxyOf"){return node}else if(!node[prop]){return node[prop]}else if(prop==="each"||typeof prop==="string"&&prop.startsWith("walk")){return(...args)=>{return node[prop](...args.map(i=>{if(typeof i==="function"){return(child,index)=>i(child.toProxy(),index)}else{return i}}))}}else if(prop==="every"||prop==="some"){return cb=>{return node[prop]((child,...other)=>cb(child.toProxy(),...other))}}else if(prop==="root"){return()=>node.root().toProxy()}else if(prop==="nodes"){return node.nodes.map(i=>i.toProxy())}else if(prop==="first"||prop==="last"){return node[prop].toProxy()}else{return node[prop]}}}}getIterator(){if(!this.lastEach)this.lastEach=0;if(!this.indexes)this.indexes={};this.lastEach+=1;let iterator=this.lastEach;this.indexes[iterator]=0;return iterator}}Container.registerParse=(dependant=>{parse=dependant});Container.registerRule=(dependant=>{Rule=dependant});Container.registerAtRule=(dependant=>{AtRule=dependant});module.exports=Container;Container.default=Container},{"./comment":128,"./declaration":131,"./node":137,"./symbols":148}],130:[function(require,module,exports){"use strict";let{red:red,bold:bold,gray:gray,options:colorette}=require("colorette");let terminalHighlight=require("./terminal-highlight");class CssSyntaxError extends Error{constructor(message,line,column,source,file,plugin){super(message);this.name="CssSyntaxError";this.reason=message;if(file){this.file=file}if(source){this.source=source}if(plugin){this.plugin=plugin}if(typeof line!=="undefined"&&typeof column!=="undefined"){this.line=line;this.column=column}this.setMessage();if(Error.captureStackTrace){Error.captureStackTrace(this,CssSyntaxError)}}setMessage(){this.message=this.plugin?this.plugin+": ":"";this.message+=this.file?this.file:"<css input>";if(typeof this.line!=="undefined"){this.message+=":"+this.line+":"+this.column}this.message+=": "+this.reason}showSourceCode(color){if(!this.source)return"";let css=this.source;if(color==null)color=colorette.enabled;if(terminalHighlight){if(color)css=terminalHighlight(css)}let lines=css.split(/\r?\n/);let start=Math.max(this.line-3,0);let end=Math.min(this.line+2,lines.length);let maxWidth=String(end).length;let mark,aside;if(color){mark=(text=>bold(red(text)));aside=(text=>gray(text))}else{mark=aside=(str=>str)}return lines.slice(start,end).map((line,index)=>{let number=start+1+index;let gutter=" "+(" "+number).slice(-maxWidth)+" | ";if(number===this.line){let spacing=aside(gutter.replace(/\d/g," "))+line.slice(0,this.column-1).replace(/[^\t]/g," ");return mark(">")+aside(gutter)+line+"\n "+spacing+mark("^")}return" "+aside(gutter)+line}).join("\n")}toString(){let code=this.showSourceCode();if(code){code="\n\n"+code+"\n"}return this.name+": "+this.message+code}}module.exports=CssSyntaxError;CssSyntaxError.default=CssSyntaxError},{"./terminal-highlight":93,colorette:93}],131:[function(require,module,exports){"use strict";let Node=require("./node");class Declaration extends Node{constructor(defaults){if(defaults&&typeof defaults.value!=="undefined"&&typeof defaults.value!=="string"){defaults={...defaults,value:String(defaults.value)}}super(defaults);this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}module.exports=Declaration;Declaration.default=Declaration},{"./node":137}],132:[function(require,module,exports){"use strict";let Declaration=require("./declaration");let PreviousMap=require("./previous-map");let Comment=require("./comment");let AtRule=require("./at-rule");let Input=require("./input");let Root=require("./root");let Rule=require("./rule");function fromJSON(json,inputs){if(Array.isArray(json))return json.map(n=>fromJSON(n));let{inputs:ownInputs,...defaults}=json;if(ownInputs){inputs=[];for(let input of ownInputs){let inputHydrated={...input,__proto__:Input.prototype};if(inputHydrated.map){inputHydrated.map={...inputHydrated.map,__proto__:PreviousMap.prototype}}inputs.push(inputHydrated)}}if(defaults.nodes){defaults.nodes=json.nodes.map(n=>fromJSON(n,inputs))}if(defaults.source){let{inputId:inputId,...source}=defaults.source;defaults.source=source;if(inputId!=null){defaults.source.input=inputs[inputId]}}if(defaults.type==="root"){return new Root(defaults)}else if(defaults.type==="decl"){return new Declaration(defaults)}else if(defaults.type==="rule"){return new Rule(defaults)}else if(defaults.type==="comment"){return new Comment(defaults)}else if(defaults.type==="atrule"){return new AtRule(defaults)}else{throw new Error("Unknown node type: "+json.type)}}module.exports=fromJSON;fromJSON.default=fromJSON},{"./at-rule":127,"./comment":128,"./declaration":131,"./input":133,"./previous-map":141,"./root":144,"./rule":145}],133:[function(require,module,exports){"use strict";let{fileURLToPath:fileURLToPath,pathToFileURL:pathToFileURL}=require("url");let{resolve:resolve,isAbsolute:isAbsolute}=require("path");let{nanoid:nanoid}=require("nanoid/non-secure");let terminalHighlight=require("./terminal-highlight");let CssSyntaxError=require("./css-syntax-error");let PreviousMap=require("./previous-map");let fromOffsetCache=Symbol("fromOffset cache");let pathAvailable=Boolean(resolve&&isAbsolute);class Input{constructor(css,opts={}){if(css===null||typeof css==="undefined"||typeof css==="object"&&!css.toString){throw new Error(`PostCSS received ${css} instead of CSS string`)}this.css=css.toString();if(this.css[0]==="\ufeff"||this.css[0]===""){this.hasBOM=true;this.css=this.css.slice(1)}else{this.hasBOM=false}if(opts.from){if(!pathAvailable||/^\w+:\/\//.test(opts.from)||isAbsolute(opts.from)){this.file=opts.from}else{this.file=resolve(opts.from)}}if(pathAvailable){let map=new PreviousMap(this.css,opts);if(map.text){this.map=map;let file=map.consumer().file;if(!this.file&&file)this.file=this.mapResolve(file)}}if(!this.file){this.id="<input css "+nanoid(6)+">"}if(this.map)this.map.file=this.from}fromOffset(offset){let lastLine,lineToIndex;if(!this[fromOffsetCache]){let lines=this.css.split("\n");lineToIndex=new Array(lines.length);let prevIndex=0;for(let i=0,l=lines.length;i<l;i++){lineToIndex[i]=prevIndex;prevIndex+=lines[i].length+1}this[fromOffsetCache]=lineToIndex}else{lineToIndex=this[fromOffsetCache]}lastLine=lineToIndex[lineToIndex.length-1];let min=0;if(offset>=lastLine){min=lineToIndex.length-1}else{let max=lineToIndex.length-2;let mid;while(min<max){mid=min+(max-min>>1);if(offset<lineToIndex[mid]){max=mid-1}else if(offset>=lineToIndex[mid+1]){min=mid+1}else{min=mid;break}}}return{line:min+1,col:offset-lineToIndex[min]+1}}error(message,line,column,opts={}){let result;if(!column){let pos=this.fromOffset(line);line=pos.line;column=pos.col}let origin=this.origin(line,column);if(origin){result=new CssSyntaxError(message,origin.line,origin.column,origin.source,origin.file,opts.plugin)}else{result=new CssSyntaxError(message,line,column,this.css,this.file,opts.plugin)}result.input={line:line,column:column,source:this.css};if(this.file){if(pathToFileURL){result.input.url=pathToFileURL(this.file).toString()}result.input.file=this.file}return result}origin(line,column){if(!this.map)return false;let consumer=this.map.consumer();let from=consumer.originalPositionFor({line:line,column:column});if(!from.source)return false;let fromUrl;if(isAbsolute(from.source)){fromUrl=pathToFileURL(from.source)}else{fromUrl=new URL(from.source,this.map.consumer().sourceRoot||pathToFileURL(this.map.mapFile))}let result={url:fromUrl.toString(),line:from.line,column:from.column};if(fromUrl.protocol==="file:"){if(fileURLToPath){result.file=fileURLToPath(fromUrl)}else{throw new Error(`file: protocol is not available in this PostCSS build`)}}let source=consumer.sourceContentFor(from.source);if(source)result.source=source;return result}mapResolve(file){if(/^\w+:\/\//.test(file)){return file}return resolve(this.map.consumer().sourceRoot||this.map.root||".",file)}get from(){return this.file||this.id}toJSON(){let json={};for(let name of["hasBOM","css","file","id"]){if(this[name]!=null){json[name]=this[name]}}if(this.map){json.map={...this.map};if(json.map.consumerCache){json.map.consumerCache=undefined}}return json}}module.exports=Input;Input.default=Input;if(terminalHighlight&&terminalHighlight.registerInput){terminalHighlight.registerInput(Input)}},{"./css-syntax-error":130,"./previous-map":141,"./terminal-highlight":93,"nanoid/non-secure":125,path:93,url:93}],134:[function(require,module,exports){(function(process){(function(){"use strict";let MapGenerator=require("./map-generator");let{isClean:isClean}=require("./symbols");let stringify=require("./stringify");let warnOnce=require("./warn-once");let Result=require("./result");let parse=require("./parse");let Root=require("./root");const TYPE_TO_CLASS_NAME={root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"};const PLUGIN_PROPS={postcssPlugin:true,prepare:true,Once:true,Root:true,Declaration:true,Rule:true,AtRule:true,Comment:true,DeclarationExit:true,RuleExit:true,AtRuleExit:true,CommentExit:true,RootExit:true,OnceExit:true};const NOT_VISITORS={postcssPlugin:true,prepare:true,Once:true};const CHILDREN=0;function isPromise(obj){return typeof obj==="object"&&typeof obj.then==="function"}function getEvents(node){let key=false;let type=TYPE_TO_CLASS_NAME[node.type];if(node.type==="decl"){key=node.prop.toLowerCase()}else if(node.type==="atrule"){key=node.name.toLowerCase()}if(key&&node.append){return[type,type+"-"+key,CHILDREN,type+"Exit",type+"Exit-"+key]}else if(key){return[type,type+"-"+key,type+"Exit",type+"Exit-"+key]}else if(node.append){return[type,CHILDREN,type+"Exit"]}else{return[type,type+"Exit"]}}function toStack(node){let events;if(node.type==="root"){events=["Root",CHILDREN,"RootExit"]}else{events=getEvents(node)}return{node:node,events:events,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function cleanMarks(node){node[isClean]=false;if(node.nodes)node.nodes.forEach(i=>cleanMarks(i));return node}let postcss={};class LazyResult{constructor(processor,css,opts){this.stringified=false;this.processed=false;let root;if(typeof css==="object"&&css!==null&&css.type==="root"){root=cleanMarks(css)}else if(css instanceof LazyResult||css instanceof Result){root=cleanMarks(css.root);if(css.map){if(typeof opts.map==="undefined")opts.map={};if(!opts.map.inline)opts.map.inline=false;opts.map.prev=css.map}}else{let parser=parse;if(opts.syntax)parser=opts.syntax.parse;if(opts.parser)parser=opts.parser;if(parser.parse)parser=parser.parse;try{root=parser(css,opts)}catch(error){this.processed=true;this.error=error}}this.result=new Result(processor,root,opts);this.helpers={...postcss,result:this.result,postcss:postcss};this.plugins=this.processor.plugins.map(plugin=>{if(typeof plugin==="object"&&plugin.prepare){return{...plugin,...plugin.prepare(this.result)}}else{return plugin}})}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(onFulfilled,onRejected){if(process.env.NODE_ENV!=="production"){if(!("from"in this.opts)){warnOnce("Without `from` option PostCSS could generate wrong source map "+"and will not find Browserslist config. Set it to CSS file path "+"or to `undefined` to prevent this warning.")}}return this.async().then(onFulfilled,onRejected)}catch(onRejected){return this.async().catch(onRejected)}finally(onFinally){return this.async().then(onFinally,onFinally)}async(){if(this.error)return Promise.reject(this.error);if(this.processed)return Promise.resolve(this.result);if(!this.processing){this.processing=this.runAsync()}return this.processing}sync(){if(this.error)throw this.error;if(this.processed)return this.result;this.processed=true;if(this.processing){throw this.getAsyncError()}for(let plugin of this.plugins){let promise=this.runOnRoot(plugin);if(isPromise(promise)){throw this.getAsyncError()}}this.prepareVisitors();if(this.hasListener){let root=this.result.root;while(!root[isClean]){root[isClean]=true;this.walkSync(root)}if(this.listeners.OnceExit){this.visitSync(this.listeners.OnceExit,root)}}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=true;this.sync();let opts=this.result.opts;let str=stringify;if(opts.syntax)str=opts.syntax.stringify;if(opts.stringifier)str=opts.stringifier;if(str.stringify)str=str.stringify;let map=new MapGenerator(str,this.result.root,this.result.opts);let data=map.generate();this.result.css=data[0];this.result.map=data[1];return this.result}walkSync(node){node[isClean]=true;let events=getEvents(node);for(let event of events){if(event===CHILDREN){if(node.nodes){node.each(child=>{if(!child[isClean])this.walkSync(child)})}}else{let visitors=this.listeners[event];if(visitors){if(this.visitSync(visitors,node.toProxy()))return}}}}visitSync(visitors,node){for(let[plugin,visitor]of visitors){this.result.lastPlugin=plugin;let promise;try{promise=visitor(node,this.helpers)}catch(e){throw this.handleError(e,node.proxyOf)}if(node.type!=="root"&&!node.parent)return true;if(isPromise(promise)){throw this.getAsyncError()}}}runOnRoot(plugin){this.result.lastPlugin=plugin;try{if(typeof plugin==="object"&&plugin.Once){return plugin.Once(this.result.root,this.helpers)}else if(typeof plugin==="function"){return plugin(this.result.root,this.result)}}catch(error){throw this.handleError(error)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(error,node){let plugin=this.result.lastPlugin;try{if(node)node.addToError(error);this.error=error;if(error.name==="CssSyntaxError"&&!error.plugin){error.plugin=plugin.postcssPlugin;error.setMessage()}else if(plugin.postcssVersion){if(process.env.NODE_ENV!=="production"){let pluginName=plugin.postcssPlugin;let pluginVer=plugin.postcssVersion;let runtimeVer=this.result.processor.version;let a=pluginVer.split(".");let b=runtimeVer.split(".");if(a[0]!==b[0]||parseInt(a[1])>parseInt(b[1])){console.error("Unknown error from PostCSS plugin. Your current PostCSS "+"version is "+runtimeVer+", but "+pluginName+" uses "+pluginVer+". Perhaps this is the source of the error below.")}}}}catch(err){if(console&&console.error)console.error(err)}return error}async runAsync(){this.plugin=0;for(let i=0;i<this.plugins.length;i++){let plugin=this.plugins[i];let promise=this.runOnRoot(plugin);if(isPromise(promise)){try{await promise}catch(error){throw this.handleError(error)}}}this.prepareVisitors();if(this.hasListener){let root=this.result.root;while(!root[isClean]){root[isClean]=true;let stack=[toStack(root)];while(stack.length>0){let promise=this.visitTick(stack);if(isPromise(promise)){try{await promise}catch(e){let node=stack[stack.length-1].node;throw this.handleError(e,node)}}}}if(this.listeners.OnceExit){for(let[plugin,visitor]of this.listeners.OnceExit){this.result.lastPlugin=plugin;try{await visitor(root,this.helpers)}catch(e){throw this.handleError(e)}}}}this.processed=true;return this.stringify()}prepareVisitors(){this.listeners={};let add=(plugin,type,cb)=>{if(!this.listeners[type])this.listeners[type]=[];this.listeners[type].push([plugin,cb])};for(let plugin of this.plugins){if(typeof plugin==="object"){for(let event in plugin){if(!PLUGIN_PROPS[event]&&/^[A-Z]/.test(event)){throw new Error(`Unknown event ${event} in ${plugin.postcssPlugin}. `+`Try to update PostCSS (${this.processor.version} now).`)}if(!NOT_VISITORS[event]){if(typeof plugin[event]==="object"){for(let filter in plugin[event]){if(filter==="*"){add(plugin,event,plugin[event][filter])}else{add(plugin,event+"-"+filter.toLowerCase(),plugin[event][filter])}}}else if(typeof plugin[event]==="function"){add(plugin,event,plugin[event])}}}}}this.hasListener=Object.keys(this.listeners).length>0}visitTick(stack){let visit=stack[stack.length-1];let{node:node,visitors:visitors}=visit;if(node.type!=="root"&&!node.parent){stack.pop();return}if(visitors.length>0&&visit.visitorIndex<visitors.length){let[plugin,visitor]=visitors[visit.visitorIndex];visit.visitorIndex+=1;if(visit.visitorIndex===visitors.length){visit.visitors=[];visit.visitorIndex=0}this.result.lastPlugin=plugin;try{return visitor(node.toProxy(),this.helpers)}catch(e){throw this.handleError(e,node)}}if(visit.iterator!==0){let iterator=visit.iterator;let child;while(child=node.nodes[node.indexes[iterator]]){node.indexes[iterator]+=1;if(!child[isClean]){child[isClean]=true;stack.push(toStack(child));return}}visit.iterator=0;delete node.indexes[iterator]}let events=visit.events;while(visit.eventIndex<events.length){let event=events[visit.eventIndex];visit.eventIndex+=1;if(event===CHILDREN){if(node.nodes&&node.nodes.length){node[isClean]=true;visit.iterator=node.getIterator()}return}else if(this.listeners[event]){visit.visitors=this.listeners[event];return}}stack.pop()}}LazyResult.registerPostcss=(dependant=>{postcss=dependant});module.exports=LazyResult;LazyResult.default=LazyResult;Root.registerLazyResult(LazyResult)}).call(this)}).call(this,require("_process"))},{"./map-generator":136,"./parse":138,"./result":143,"./root":144,"./stringify":147,"./symbols":148,"./warn-once":150,_process:152}],135:[function(require,module,exports){"use strict";let list={split(string,separators,last){let array=[];let current="";let split=false;let func=0;let quote=false;let escape=false;for(let letter of string){if(escape){escape=false}else if(letter==="\\"){escape=true}else if(quote){if(letter===quote){quote=false}}else if(letter==='"'||letter==="'"){quote=letter}else if(letter==="("){func+=1}else if(letter===")"){if(func>0)func-=1}else if(func===0){if(separators.includes(letter))split=true}if(split){if(current!=="")array.push(current.trim());current="";split=false}else{current+=letter}}if(last||current!=="")array.push(current.trim());return array},space(string){let spaces=[" ","\n","\t"];return list.split(string,spaces)},comma(string){return list.split(string,[","],true)}};module.exports=list;list.default=list},{}],136:[function(require,module,exports){(function(Buffer){(function(){"use strict";let{dirname:dirname,resolve:resolve,relative:relative,sep:sep}=require("path");let{pathToFileURL:pathToFileURL}=require("url");let mozilla=require("source-map");let pathAvailable=Boolean(dirname&&resolve&&relative&&sep);class MapGenerator{constructor(stringify,root,opts){this.stringify=stringify;this.mapOpts=opts.map||{};this.root=root;this.opts=opts}isMap(){if(typeof this.opts.map!=="undefined"){return!!this.opts.map}return this.previous().length>0}previous(){if(!this.previousMaps){this.previousMaps=[];this.root.walk(node=>{if(node.source&&node.source.input.map){let map=node.source.input.map;if(!this.previousMaps.includes(map)){this.previousMaps.push(map)}}})}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline!=="undefined"){return this.mapOpts.inline}let annotation=this.mapOpts.annotation;if(typeof annotation!=="undefined"&&annotation!==true){return false}if(this.previous().length){return this.previous().some(i=>i.inline)}return true}isSourcesContent(){if(typeof this.mapOpts.sourcesContent!=="undefined"){return this.mapOpts.sourcesContent}if(this.previous().length){return this.previous().some(i=>i.withContent())}return true}clearAnnotation(){if(this.mapOpts.annotation===false)return;let node;for(let i=this.root.nodes.length-1;i>=0;i--){node=this.root.nodes[i];if(node.type!=="comment")continue;if(node.text.indexOf("# sourceMappingURL=")===0){this.root.removeChild(i)}}}setSourcesContent(){let already={};this.root.walk(node=>{if(node.source){let from=node.source.input.from;if(from&&!already[from]){already[from]=true;this.map.setSourceContent(this.toUrl(this.path(from)),node.source.input.css)}}})}applyPrevMaps(){for(let prev of this.previous()){let from=this.toUrl(this.path(prev.file));let root=prev.root||dirname(prev.file);let map;if(this.mapOpts.sourcesContent===false){map=new mozilla.SourceMapConsumer(prev.text);if(map.sourcesContent){map.sourcesContent=map.sourcesContent.map(()=>null)}}else{map=prev.consumer()}this.map.applySourceMap(map,from,this.toUrl(this.path(root)))}}isAnnotation(){if(this.isInline()){return true}if(typeof this.mapOpts.annotation!=="undefined"){return this.mapOpts.annotation}if(this.previous().length){return this.previous().some(i=>i.annotation)}return true}toBase64(str){if(Buffer){return Buffer.from(str).toString("base64")}else{return window.btoa(unescape(encodeURIComponent(str)))}}addAnnotation(){let content;if(this.isInline()){content="data:application/json;base64,"+this.toBase64(this.map.toString())}else if(typeof this.mapOpts.annotation==="string"){content=this.mapOpts.annotation}else if(typeof this.mapOpts.annotation==="function"){content=this.mapOpts.annotation(this.opts.to,this.root)}else{content=this.outputFile()+".map"}let eol="\n";if(this.css.includes("\r\n"))eol="\r\n";this.css+=eol+"/*# sourceMappingURL="+content+" */"}outputFile(){if(this.opts.to){return this.path(this.opts.to)}if(this.opts.from){return this.path(this.opts.from)}return"to.css"}generateMap(){this.generateString();if(this.isSourcesContent())this.setSourcesContent();if(this.previous().length>0)this.applyPrevMaps();if(this.isAnnotation())this.addAnnotation();if(this.isInline()){return[this.css]}return[this.css,this.map]}path(file){if(file.indexOf("<")===0)return file;if(/^\w+:\/\//.test(file))return file;if(this.mapOpts.absolute)return file;let from=this.opts.to?dirname(this.opts.to):".";if(typeof this.mapOpts.annotation==="string"){from=dirname(resolve(from,this.mapOpts.annotation))}file=relative(from,file);return file}toUrl(path){if(sep==="\\"){path=path.replace(/\\/g,"/")}return encodeURI(path).replace(/[#?]/g,encodeURIComponent)}sourcePath(node){if(this.mapOpts.from){return this.toUrl(this.mapOpts.from)}else if(this.mapOpts.absolute){if(pathToFileURL){return pathToFileURL(node.source.input.from).toString()}else{throw new Error("`map.absolute` option is not available in this PostCSS build")}}else{return this.toUrl(this.path(node.source.input.from))}}generateString(){this.css="";this.map=new mozilla.SourceMapGenerator({file:this.outputFile()});let line=1;let column=1;let noSource="<no source>";let mapping={source:"",generated:{line:0,column:0},original:{line:0,column:0}};let lines,last;this.stringify(this.root,(str,node,type)=>{this.css+=str;if(node&&type!=="end"){mapping.generated.line=line;mapping.generated.column=column-1;if(node.source&&node.source.start){mapping.source=this.sourcePath(node);mapping.original.line=node.source.start.line;mapping.original.column=node.source.start.column-1;this.map.addMapping(mapping)}else{mapping.source=noSource;mapping.original.line=1;mapping.original.column=0;this.map.addMapping(mapping)}}lines=str.match(/\n/g);if(lines){line+=lines.length;last=str.lastIndexOf("\n");column=str.length-last}else{column+=str.length}if(node&&type!=="start"){let p=node.parent||{raws:{}};if(node.type!=="decl"||node!==p.last||p.raws.semicolon){if(node.source&&node.source.end){mapping.source=this.sourcePath(node);mapping.original.line=node.source.end.line;mapping.original.column=node.source.end.column-1;mapping.generated.line=line;mapping.generated.column=column-2;this.map.addMapping(mapping)}else{mapping.source=noSource;mapping.original.line=1;mapping.original.column=0;mapping.generated.line=line;mapping.generated.column=column-1;this.map.addMapping(mapping)}}}})}generate(){this.clearAnnotation();if(pathAvailable&&this.isMap()){return this.generateMap()}let result="";this.stringify(this.root,i=>{result+=i});return[result]}}module.exports=MapGenerator}).call(this)}).call(this,require("buffer").Buffer)},{buffer:94,path:93,"source-map":165,url:93}],137:[function(require,module,exports){"use strict";let CssSyntaxError=require("./css-syntax-error");let Stringifier=require("./stringifier");let{isClean:isClean}=require("./symbols");let stringify=require("./stringify");function cloneNode(obj,parent){let cloned=new obj.constructor;for(let i in obj){if(!Object.prototype.hasOwnProperty.call(obj,i)){continue}if(i==="proxyCache")continue;let value=obj[i];let type=typeof value;if(i==="parent"&&type==="object"){if(parent)cloned[i]=parent}else if(i==="source"){cloned[i]=value}else if(Array.isArray(value)){cloned[i]=value.map(j=>cloneNode(j,cloned))}else{if(type==="object"&&value!==null)value=cloneNode(value);cloned[i]=value}}return cloned}class Node{constructor(defaults={}){this.raws={};this[isClean]=false;for(let name in defaults){if(name==="nodes"){this.nodes=[];for(let node of defaults[name]){if(typeof node.clone==="function"){this.append(node.clone())}else{this.append(node)}}}else{this[name]=defaults[name]}}}error(message,opts={}){if(this.source){let pos=this.positionBy(opts);return this.source.input.error(message,pos.line,pos.column,opts)}return new CssSyntaxError(message)}warn(result,text,opts){let data={node:this};for(let i in opts)data[i]=opts[i];return result.warn(text,data)}remove(){if(this.parent){this.parent.removeChild(this)}this.parent=undefined;return this}toString(stringifier=stringify){if(stringifier.stringify)stringifier=stringifier.stringify;let result="";stringifier(this,i=>{result+=i});return result}clone(overrides={}){let cloned=cloneNode(this);for(let name in overrides){cloned[name]=overrides[name]}return cloned}cloneBefore(overrides={}){let cloned=this.clone(overrides);this.parent.insertBefore(this,cloned);return cloned}cloneAfter(overrides={}){let cloned=this.clone(overrides);this.parent.insertAfter(this,cloned);return cloned}replaceWith(...nodes){if(this.parent){let bookmark=this;let foundSelf=false;for(let node of nodes){if(node===this){foundSelf=true}else if(foundSelf){this.parent.insertAfter(bookmark,node);bookmark=node}else{this.parent.insertBefore(bookmark,node)}}if(!foundSelf){this.remove()}}return this}next(){if(!this.parent)return undefined;let index=this.parent.index(this);return this.parent.nodes[index+1]}prev(){if(!this.parent)return undefined;let index=this.parent.index(this);return this.parent.nodes[index-1]}before(add){this.parent.insertBefore(this,add);return this}after(add){this.parent.insertAfter(this,add);return this}root(){let result=this;while(result.parent)result=result.parent;return result}raw(prop,defaultType){let str=new Stringifier;return str.raw(this,prop,defaultType)}cleanRaws(keepBetween){delete this.raws.before;delete this.raws.after;if(!keepBetween)delete this.raws.between}toJSON(_,inputs){let fixed={};let emitInputs=inputs==null;inputs=inputs||new Map;let inputsNextIndex=0;for(let name in this){if(!Object.prototype.hasOwnProperty.call(this,name)){continue}if(name==="parent"||name==="proxyCache")continue;let value=this[name];if(Array.isArray(value)){fixed[name]=value.map(i=>{if(typeof i==="object"&&i.toJSON){return i.toJSON(null,inputs)}else{return i}})}else if(typeof value==="object"&&value.toJSON){fixed[name]=value.toJSON(null,inputs)}else if(name==="source"){let inputId=inputs.get(value.input);if(inputId==null){inputId=inputsNextIndex;inputs.set(value.input,inputsNextIndex);inputsNextIndex++}fixed[name]={inputId:inputId,start:value.start,end:value.end}}else{fixed[name]=value}}if(emitInputs){fixed.inputs=[...inputs.keys()].map(input=>input.toJSON())}return fixed}positionInside(index){let string=this.toString();let column=this.source.start.column;let line=this.source.start.line;for(let i=0;i<index;i++){if(string[i]==="\n"){column=1;line+=1}else{column+=1}}return{line:line,column:column}}positionBy(opts){let pos=this.source.start;if(opts.index){pos=this.positionInside(opts.index)}else if(opts.word){let index=this.toString().indexOf(opts.word);if(index!==-1)pos=this.positionInside(index)}return pos}getProxyProcessor(){return{set(node,prop,value){if(node[prop]===value)return true;node[prop]=value;if(prop==="prop"||prop==="value"||prop==="name"||prop==="params"||prop==="important"||prop==="text"){node.markDirty()}return true},get(node,prop){if(prop==="proxyOf"){return node}else if(prop==="root"){return()=>node.root().toProxy()}else{return node[prop]}}}}toProxy(){if(!this.proxyCache){this.proxyCache=new Proxy(this,this.getProxyProcessor())}return this.proxyCache}addToError(error){error.postcssNode=this;if(error.stack&&this.source&&/\n\s{4}at /.test(error.stack)){let s=this.source;error.stack=error.stack.replace(/\n\s{4}at /,`$&${s.input.from}:${s.start.line}:${s.start.column}$&`)}return error}markDirty(){if(this[isClean]){this[isClean]=false;let next=this;while(next=next.parent){next[isClean]=false}}}get proxyOf(){return this}}module.exports=Node;Node.default=Node},{"./css-syntax-error":130,"./stringifier":146,"./stringify":147,"./symbols":148}],138:[function(require,module,exports){(function(process){(function(){"use strict";let Container=require("./container");let Parser=require("./parser");let Input=require("./input");function parse(css,opts){let input=new Input(css,opts);let parser=new Parser(input);try{parser.parse()}catch(e){if(process.env.NODE_ENV!=="production"){if(e.name==="CssSyntaxError"&&opts&&opts.from){if(/\.scss$/i.test(opts.from)){e.message+="\nYou tried to parse SCSS with "+"the standard CSS parser; "+"try again with the postcss-scss parser"}else if(/\.sass/i.test(opts.from)){e.message+="\nYou tried to parse Sass with "+"the standard CSS parser; "+"try again with the postcss-sass parser"}else if(/\.less$/i.test(opts.from)){e.message+="\nYou tried to parse Less with "+"the standard CSS parser; "+"try again with the postcss-less parser"}}}throw e}return parser.root}module.exports=parse;parse.default=parse;Container.registerParse(parse)}).call(this)}).call(this,require("_process"))},{"./container":129,"./input":133,"./parser":139,_process:152}],139:[function(require,module,exports){"use strict";let Declaration=require("./declaration");let tokenizer=require("./tokenize");let Comment=require("./comment");let AtRule=require("./at-rule");let Root=require("./root");let Rule=require("./rule");class Parser{constructor(input){this.input=input;this.root=new Root;this.current=this.root;this.spaces="";this.semicolon=false;this.customProperty=false;this.createTokenizer();this.root.source={input:input,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=tokenizer(this.input)}parse(){let token;while(!this.tokenizer.endOfFile()){token=this.tokenizer.nextToken();switch(token[0]){case"space":this.spaces+=token[1];break;case";":this.freeSemicolon(token);break;case"}":this.end(token);break;case"comment":this.comment(token);break;case"at-word":this.atrule(token);break;case"{":this.emptyRule(token);break;default:this.other(token);break}}this.endFile()}comment(token){let node=new Comment;this.init(node,token[2]);node.source.end=this.getPosition(token[3]||token[2]);let text=token[1].slice(2,-2);if(/^\s*$/.test(text)){node.text="";node.raws.left=text;node.raws.right=""}else{let match=text.match(/^(\s*)([^]*\S)(\s*)$/);node.text=match[2];node.raws.left=match[1];node.raws.right=match[3]}}emptyRule(token){let node=new Rule;this.init(node,token[2]);node.selector="";node.raws.between="";this.current=node}other(start){let end=false;let type=null;let colon=false;let bracket=null;let brackets=[];let customProperty=start[1].startsWith("--");let tokens=[];let token=start;while(token){type=token[0];tokens.push(token);if(type==="("||type==="["){if(!bracket)bracket=token;brackets.push(type==="("?")":"]")}else if(customProperty&&colon&&type==="{"){if(!bracket)bracket=token;brackets.push("}")}else if(brackets.length===0){if(type===";"){if(colon){this.decl(tokens,customProperty);return}else{break}}else if(type==="{"){this.rule(tokens);return}else if(type==="}"){this.tokenizer.back(tokens.pop());end=true;break}else if(type===":"){colon=true}}else if(type===brackets[brackets.length-1]){brackets.pop();if(brackets.length===0)bracket=null}token=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile())end=true;if(brackets.length>0)this.unclosedBracket(bracket);if(end&&colon){while(tokens.length){token=tokens[tokens.length-1][0];if(token!=="space"&&token!=="comment")break;this.tokenizer.back(tokens.pop())}this.decl(tokens,customProperty)}else{this.unknownWord(tokens)}}rule(tokens){tokens.pop();let node=new Rule;this.init(node,tokens[0][2]);node.raws.between=this.spacesAndCommentsFromEnd(tokens);this.raw(node,"selector",tokens);this.current=node}decl(tokens,customProperty){let node=new Declaration;this.init(node,tokens[0][2]);let last=tokens[tokens.length-1];if(last[0]===";"){this.semicolon=true;tokens.pop()}node.source.end=this.getPosition(last[3]||last[2]);while(tokens[0][0]!=="word"){if(tokens.length===1)this.unknownWord(tokens);node.raws.before+=tokens.shift()[1]}node.source.start=this.getPosition(tokens[0][2]);node.prop="";while(tokens.length){let type=tokens[0][0];if(type===":"||type==="space"||type==="comment"){break}node.prop+=tokens.shift()[1]}node.raws.between="";let token;while(tokens.length){token=tokens.shift();if(token[0]===":"){node.raws.between+=token[1];break}else{if(token[0]==="word"&&/\w/.test(token[1])){this.unknownWord([token])}node.raws.between+=token[1]}}if(node.prop[0]==="_"||node.prop[0]==="*"){node.raws.before+=node.prop[0];node.prop=node.prop.slice(1)}let firstSpaces=this.spacesAndCommentsFromStart(tokens);this.precheckMissedSemicolon(tokens);for(let i=tokens.length-1;i>=0;i--){token=tokens[i];if(token[1].toLowerCase()==="!important"){node.important=true;let string=this.stringFrom(tokens,i);string=this.spacesFromEnd(tokens)+string;if(string!==" !important")node.raws.important=string;break}else if(token[1].toLowerCase()==="important"){let cache=tokens.slice(0);let str="";for(let j=i;j>0;j--){let type=cache[j][0];if(str.trim().indexOf("!")===0&&type!=="space"){break}str=cache.pop()[1]+str}if(str.trim().indexOf("!")===0){node.important=true;node.raws.important=str;tokens=cache}}if(token[0]!=="space"&&token[0]!=="comment"){break}}let hasWord=tokens.some(i=>i[0]!=="space"&&i[0]!=="comment");this.raw(node,"value",tokens);if(hasWord){node.raws.between+=firstSpaces}else{node.value=firstSpaces+node.value}if(node.value.includes(":")&&!customProperty){this.checkMissedSemicolon(tokens)}}atrule(token){let node=new AtRule;node.name=token[1].slice(1);if(node.name===""){this.unnamedAtrule(node,token)}this.init(node,token[2]);let type;let prev;let shift;let last=false;let open=false;let params=[];let brackets=[];while(!this.tokenizer.endOfFile()){token=this.tokenizer.nextToken();type=token[0];if(type==="("||type==="["){brackets.push(type==="("?")":"]")}else if(type==="{"&&brackets.length>0){brackets.push("}")}else if(type===brackets[brackets.length-1]){brackets.pop()}if(brackets.length===0){if(type===";"){node.source.end=this.getPosition(token[2]);this.semicolon=true;break}else if(type==="{"){open=true;break}else if(type==="}"){if(params.length>0){shift=params.length-1;prev=params[shift];while(prev&&prev[0]==="space"){prev=params[--shift]}if(prev){node.source.end=this.getPosition(prev[3]||prev[2])}}this.end(token);break}else{params.push(token)}}else{params.push(token)}if(this.tokenizer.endOfFile()){last=true;break}}node.raws.between=this.spacesAndCommentsFromEnd(params);if(params.length){node.raws.afterName=this.spacesAndCommentsFromStart(params);this.raw(node,"params",params);if(last){token=params[params.length-1];node.source.end=this.getPosition(token[3]||token[2]);this.spaces=node.raws.between;node.raws.between=""}}else{node.raws.afterName="";node.params=""}if(open){node.nodes=[];this.current=node}}end(token){if(this.current.nodes&&this.current.nodes.length){this.current.raws.semicolon=this.semicolon}this.semicolon=false;this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.spaces="";if(this.current.parent){this.current.source.end=this.getPosition(token[2]);this.current=this.current.parent}else{this.unexpectedClose(token)}}endFile(){if(this.current.parent)this.unclosedBlock();if(this.current.nodes&&this.current.nodes.length){this.current.raws.semicolon=this.semicolon}this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(token){this.spaces+=token[1];if(this.current.nodes){let prev=this.current.nodes[this.current.nodes.length-1];if(prev&&prev.type==="rule"&&!prev.raws.ownSemicolon){prev.raws.ownSemicolon=this.spaces;this.spaces=""}}}getPosition(offset){let pos=this.input.fromOffset(offset);return{offset:offset,line:pos.line,column:pos.col}}init(node,offset){this.current.push(node);node.source={start:this.getPosition(offset),input:this.input};node.raws.before=this.spaces;this.spaces="";if(node.type!=="comment")this.semicolon=false}raw(node,prop,tokens){let token,type;let length=tokens.length;let value="";let clean=true;let next,prev;let pattern=/^([#.|])?(\w)+/i;for(let i=0;i<length;i+=1){token=tokens[i];type=token[0];if(type==="comment"&&node.type==="rule"){prev=tokens[i-1];next=tokens[i+1];if(prev[0]!=="space"&&next[0]!=="space"&&pattern.test(prev[1])&&pattern.test(next[1])){value+=token[1]}else{clean=false}continue}if(type==="comment"||type==="space"&&i===length-1){clean=false}else{value+=token[1]}}if(!clean){let raw=tokens.reduce((all,i)=>all+i[1],"");node.raws[prop]={value:value,raw:raw}}node[prop]=value}spacesAndCommentsFromEnd(tokens){let lastTokenType;let spaces="";while(tokens.length){lastTokenType=tokens[tokens.length-1][0];if(lastTokenType!=="space"&&lastTokenType!=="comment")break;spaces=tokens.pop()[1]+spaces}return spaces}spacesAndCommentsFromStart(tokens){let next;let spaces="";while(tokens.length){next=tokens[0][0];if(next!=="space"&&next!=="comment")break;spaces+=tokens.shift()[1]}return spaces}spacesFromEnd(tokens){let lastTokenType;let spaces="";while(tokens.length){lastTokenType=tokens[tokens.length-1][0];if(lastTokenType!=="space")break;spaces=tokens.pop()[1]+spaces}return spaces}stringFrom(tokens,from){let result="";for(let i=from;i<tokens.length;i++){result+=tokens[i][1]}tokens.splice(from,tokens.length-from);return result}colon(tokens){let brackets=0;let token,type,prev;for(let[i,element]of tokens.entries()){token=element;type=token[0];if(type==="("){brackets+=1}if(type===")"){brackets-=1}if(brackets===0&&type===":"){if(!prev){this.doubleColon(token)}else if(prev[0]==="word"&&prev[1]==="progid"){continue}else{return i}}prev=token}return false}unclosedBracket(bracket){throw this.input.error("Unclosed bracket",bracket[2])}unknownWord(tokens){throw this.input.error("Unknown word",tokens[0][2])}unexpectedClose(token){throw this.input.error("Unexpected }",token[2])}unclosedBlock(){let pos=this.current.source.start;throw this.input.error("Unclosed block",pos.line,pos.column)}doubleColon(token){throw this.input.error("Double colon",token[2])}unnamedAtrule(node,token){throw this.input.error("At-rule without name",token[2])}precheckMissedSemicolon(){}checkMissedSemicolon(tokens){let colon=this.colon(tokens);if(colon===false)return;let founded=0;let token;for(let j=colon-1;j>=0;j--){token=tokens[j];if(token[0]!=="space"){founded+=1;if(founded===2)break}}throw this.input.error("Missed semicolon",token[2])}}module.exports=Parser},{"./at-rule":127,"./comment":128,"./declaration":131,"./root":144,"./rule":145,"./tokenize":149}],140:[function(require,module,exports){(function(process){(function(){"use strict";let CssSyntaxError=require("./css-syntax-error");let Declaration=require("./declaration");let LazyResult=require("./lazy-result");let Container=require("./container");let Processor=require("./processor");let stringify=require("./stringify");let fromJSON=require("./fromJSON");let Warning=require("./warning");let Comment=require("./comment");let AtRule=require("./at-rule");let Result=require("./result.js");let Input=require("./input");let parse=require("./parse");let list=require("./list");let Rule=require("./rule");let Root=require("./root");let Node=require("./node");function postcss(...plugins){if(plugins.length===1&&Array.isArray(plugins[0])){plugins=plugins[0]}return new Processor(plugins)}postcss.plugin=function plugin(name,initializer){if(console&&console.warn){console.warn(name+": postcss.plugin was deprecated. Migration guide:\n"+"https://evilmartians.com/chronicles/postcss-8-plugin-migration");if(process.env.LANG&&process.env.LANG.startsWith("cn")){console.warn(name+":  postcss.plugin . :\n"+"https://www.w3ctech.com/topic/2226")}}function creator(...args){let transformer=initializer(...args);transformer.postcssPlugin=name;transformer.postcssVersion=(new Processor).version;return transformer}let cache;Object.defineProperty(creator,"postcss",{get(){if(!cache)cache=creator();return cache}});creator.process=function(css,processOpts,pluginOpts){return postcss([creator(pluginOpts)]).process(css,processOpts)};return creator};postcss.stringify=stringify;postcss.parse=parse;postcss.fromJSON=fromJSON;postcss.list=list;postcss.comment=(defaults=>new Comment(defaults));postcss.atRule=(defaults=>new AtRule(defaults));postcss.decl=(defaults=>new Declaration(defaults));postcss.rule=(defaults=>new Rule(defaults));postcss.root=(defaults=>new Root(defaults));postcss.CssSyntaxError=CssSyntaxError;postcss.Declaration=Declaration;postcss.Container=Container;postcss.Comment=Comment;postcss.Warning=Warning;postcss.AtRule=AtRule;postcss.Result=Result;postcss.Input=Input;postcss.Rule=Rule;postcss.Root=Root;postcss.Node=Node;LazyResult.registerPostcss(postcss);module.exports=postcss;postcss.default=postcss}).call(this)}).call(this,require("_process"))},{"./at-rule":127,"./comment":128,"./container":129,"./css-syntax-error":130,"./declaration":131,"./fromJSON":132,"./input":133,"./lazy-result":134,"./list":135,"./node":137,"./parse":138,"./processor":142,"./result.js":143,"./root":144,"./rule":145,"./stringify":147,"./warning":151,_process:152}],141:[function(require,module,exports){(function(Buffer){(function(){"use strict";let{existsSync:existsSync,readFileSync:readFileSync}=require("fs");let{dirname:dirname,join:join}=require("path");let mozilla=require("source-map");function fromBase64(str){if(Buffer){return Buffer.from(str,"base64").toString()}else{return window.atob(str)}}class PreviousMap{constructor(css,opts){if(opts.map===false)return;this.loadAnnotation(css);this.inline=this.startWith(this.annotation,"data:");let prev=opts.map?opts.map.prev:undefined;let text=this.loadMap(opts.from,prev);if(!this.mapFile&&opts.from){this.mapFile=opts.from}if(this.mapFile)this.root=dirname(this.mapFile);if(text)this.text=text}consumer(){if(!this.consumerCache){this.consumerCache=new mozilla.SourceMapConsumer(this.text)}return this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(string,start){if(!string)return false;return string.substr(0,start.length)===start}getAnnotationURL(sourceMapString){return sourceMapString.match(/\/\*\s*# sourceMappingURL=((?:(?!sourceMappingURL=).)*)\*\//)[1].trim()}loadAnnotation(css){let annotations=css.match(/\/\*\s*# sourceMappingURL=(?:(?!sourceMappingURL=).)*\*\//gm);if(annotations&&annotations.length>0){let lastAnnotation=annotations[annotations.length-1];if(lastAnnotation){this.annotation=this.getAnnotationURL(lastAnnotation)}}}decodeInline(text){let baseCharsetUri=/^data:application\/json;charset=utf-?8;base64,/;let baseUri=/^data:application\/json;base64,/;let charsetUri=/^data:application\/json;charset=utf-?8,/;let uri=/^data:application\/json,/;if(charsetUri.test(text)||uri.test(text)){return decodeURIComponent(text.substr(RegExp.lastMatch.length))}if(baseCharsetUri.test(text)||baseUri.test(text)){return fromBase64(text.substr(RegExp.lastMatch.length))}let encoding=text.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+encoding)}loadFile(path){this.root=dirname(path);if(existsSync(path)){this.mapFile=path;return readFileSync(path,"utf-8").toString().trim()}}loadMap(file,prev){if(prev===false)return false;if(prev){if(typeof prev==="string"){return prev}else if(typeof prev==="function"){let prevPath=prev(file);if(prevPath){let map=this.loadFile(prevPath);if(!map){throw new Error("Unable to load previous source map: "+prevPath.toString())}return map}}else if(prev instanceof mozilla.SourceMapConsumer){return mozilla.SourceMapGenerator.fromSourceMap(prev).toString()}else if(prev instanceof mozilla.SourceMapGenerator){return prev.toString()}else if(this.isMap(prev)){return JSON.stringify(prev)}else{throw new Error("Unsupported previous source map format: "+prev.toString())}}else if(this.inline){return this.decodeInline(this.annotation)}else if(this.annotation){let map=this.annotation;if(file)map=join(dirname(file),map);return this.loadFile(map)}}isMap(map){if(typeof map!=="object")return false;return typeof map.mappings==="string"||typeof map._mappings==="string"||Array.isArray(map.sections)}}module.exports=PreviousMap;PreviousMap.default=PreviousMap}).call(this)}).call(this,require("buffer").Buffer)},{buffer:94,fs:93,path:93,"source-map":165}],142:[function(require,module,exports){(function(process){(function(){"use strict";let LazyResult=require("./lazy-result");let Root=require("./root");class Processor{constructor(plugins=[]){this.version="8.2.13";this.plugins=this.normalize(plugins)}use(plugin){this.plugins=this.plugins.concat(this.normalize([plugin]));return this}process(css,opts={}){if(this.plugins.length===0&&opts.parser===opts.stringifier&&!opts.hideNothingWarning){if(process.env.NODE_ENV!=="production"){if(typeof console!=="undefined"&&console.warn){console.warn("You did not set any plugins, parser, or stringifier. "+"Right now, PostCSS does nothing. Pick plugins for your case "+"on https://www.postcss.parts/ and use them in postcss.config.js.")}}}return new LazyResult(this,css,opts)}normalize(plugins){let normalized=[];for(let i of plugins){if(i.postcss===true){i=i()}else if(i.postcss){i=i.postcss}if(typeof i==="object"&&Array.isArray(i.plugins)){normalized=normalized.concat(i.plugins)}else if(typeof i==="object"&&i.postcssPlugin){normalized.push(i)}else if(typeof i==="function"){normalized.push(i)}else if(typeof i==="object"&&(i.parse||i.stringify)){if(process.env.NODE_ENV!=="production"){throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use "+"one of the syntax/parser/stringifier options as outlined "+"in your PostCSS runner documentation.")}}else{throw new Error(i+" is not a PostCSS plugin")}}return normalized}}module.exports=Processor;Processor.default=Processor;Root.registerProcessor(Processor)}).call(this)}).call(this,require("_process"))},{"./lazy-result":134,"./root":144,_process:152}],143:[function(require,module,exports){"use strict";let Warning=require("./warning");class Result{constructor(processor,root,opts){this.processor=processor;this.messages=[];this.root=root;this.opts=opts;this.css=undefined;this.map=undefined}toString(){return this.css}warn(text,opts={}){if(!opts.plugin){if(this.lastPlugin&&this.lastPlugin.postcssPlugin){opts.plugin=this.lastPlugin.postcssPlugin}}let warning=new Warning(text,opts);this.messages.push(warning);return warning}warnings(){return this.messages.filter(i=>i.type==="warning")}get content(){return this.css}}module.exports=Result;Result.default=Result},{"./warning":151}],144:[function(require,module,exports){"use strict";let Container=require("./container");let LazyResult,Processor;class Root extends Container{constructor(defaults){super(defaults);this.type="root";if(!this.nodes)this.nodes=[]}removeChild(child,ignore){let index=this.index(child);if(!ignore&&index===0&&this.nodes.length>1){this.nodes[1].raws.before=this.nodes[index].raws.before}return super.removeChild(child)}normalize(child,sample,type){let nodes=super.normalize(child);if(sample){if(type==="prepend"){if(this.nodes.length>1){sample.raws.before=this.nodes[1].raws.before}else{delete sample.raws.before}}else if(this.first!==sample){for(let node of nodes){node.raws.before=sample.raws.before}}}return nodes}toResult(opts={}){let lazy=new LazyResult(new Processor,this,opts);return lazy.stringify()}}Root.registerLazyResult=(dependant=>{LazyResult=dependant});Root.registerProcessor=(dependant=>{Processor=dependant});module.exports=Root;Root.default=Root},{"./container":129}],145:[function(require,module,exports){"use strict";let Container=require("./container");let list=require("./list");class Rule extends Container{constructor(defaults){super(defaults);this.type="rule";if(!this.nodes)this.nodes=[]}get selectors(){return list.comma(this.selector)}set selectors(values){let match=this.selector?this.selector.match(/,\s*/):null;let sep=match?match[0]:","+this.raw("between","beforeOpen");this.selector=values.join(sep)}}module.exports=Rule;Rule.default=Rule;Container.registerRule(Rule)},{"./container":129,"./list":135}],146:[function(require,module,exports){"use strict";const DEFAULT_RAW={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:false};function capitalize(str){return str[0].toUpperCase()+str.slice(1)}class Stringifier{constructor(builder){this.builder=builder}stringify(node,semicolon){if(!this[node.type]){throw new Error("Unknown AST node type "+node.type+". "+"Maybe you need to change PostCSS stringifier.")}this[node.type](node,semicolon)}root(node){this.body(node);if(node.raws.after)this.builder(node.raws.after)}comment(node){let left=this.raw(node,"left","commentLeft");let right=this.raw(node,"right","commentRight");this.builder("/*"+left+node.text+right+"*/",node)}decl(node,semicolon){let between=this.raw(node,"between","colon");let string=node.prop+between+this.rawValue(node,"value");if(node.important){string+=node.raws.important||" !important"}if(semicolon)string+=";";this.builder(string,node)}rule(node){this.block(node,this.rawValue(node,"selector"));if(node.raws.ownSemicolon){this.builder(node.raws.ownSemicolon,node,"end")}}atrule(node,semicolon){let name="@"+node.name;let params=node.params?this.rawValue(node,"params"):"";if(typeof node.raws.afterName!=="undefined"){name+=node.raws.afterName}else if(params){name+=" "}if(node.nodes){this.block(node,name+params)}else{let end=(node.raws.between||"")+(semicolon?";":"");this.builder(name+params+end,node)}}body(node){let last=node.nodes.length-1;while(last>0){if(node.nodes[last].type!=="comment")break;last-=1}let semicolon=this.raw(node,"semicolon");for(let i=0;i<node.nodes.length;i++){let child=node.nodes[i];let before=this.raw(child,"before");if(before)this.builder(before);this.stringify(child,last!==i||semicolon)}}block(node,start){let between=this.raw(node,"between","beforeOpen");this.builder(start+between+"{",node,"start");let after;if(node.nodes&&node.nodes.length){this.body(node);after=this.raw(node,"after")}else{after=this.raw(node,"after","emptyBody")}if(after)this.builder(after);this.builder("}",node,"end")}raw(node,own,detect){let value;if(!detect)detect=own;if(own){value=node.raws[own];if(typeof value!=="undefined")return value}let parent=node.parent;if(detect==="before"){if(!parent||parent.type==="root"&&parent.first===node){return""}}if(!parent)return DEFAULT_RAW[detect];let root=node.root();if(!root.rawCache)root.rawCache={};if(typeof root.rawCache[detect]!=="undefined"){return root.rawCache[detect]}if(detect==="before"||detect==="after"){return this.beforeAfter(node,detect)}else{let method="raw"+capitalize(detect);if(this[method]){value=this[method](root,node)}else{root.walk(i=>{value=i.raws[own];if(typeof value!=="undefined")return false})}}if(typeof value==="undefined")value=DEFAULT_RAW[detect];root.rawCache[detect]=value;return value}rawSemicolon(root){let value;root.walk(i=>{if(i.nodes&&i.nodes.length&&i.last.type==="decl"){value=i.raws.semicolon;if(typeof value!=="undefined")return false}});return value}rawEmptyBody(root){let value;root.walk(i=>{if(i.nodes&&i.nodes.length===0){value=i.raws.after;if(typeof value!=="undefined")return false}});return value}rawIndent(root){if(root.raws.indent)return root.raws.indent;let value;root.walk(i=>{let p=i.parent;if(p&&p!==root&&p.parent&&p.parent===root){if(typeof i.raws.before!=="undefined"){let parts=i.raws.before.split("\n");value=parts[parts.length-1];value=value.replace(/\S/g,"");return false}}});return value}rawBeforeComment(root,node){let value;root.walkComments(i=>{if(typeof i.raws.before!=="undefined"){value=i.raws.before;if(value.includes("\n")){value=value.replace(/[^\n]+$/,"")}return false}});if(typeof value==="undefined"){value=this.raw(node,null,"beforeDecl")}else if(value){value=value.replace(/\S/g,"")}return value}rawBeforeDecl(root,node){let value;root.walkDecls(i=>{if(typeof i.raws.before!=="undefined"){value=i.raws.before;if(value.includes("\n")){value=value.replace(/[^\n]+$/,"")}return false}});if(typeof value==="undefined"){value=this.raw(node,null,"beforeRule")}else if(value){value=value.replace(/\S/g,"")}return value}rawBeforeRule(root){let value;root.walk(i=>{if(i.nodes&&(i.parent!==root||root.first!==i)){if(typeof i.raws.before!=="undefined"){value=i.raws.before;if(value.includes("\n")){value=value.replace(/[^\n]+$/,"")}return false}}});if(value)value=value.replace(/\S/g,"");return value}rawBeforeClose(root){let value;root.walk(i=>{if(i.nodes&&i.nodes.length>0){if(typeof i.raws.after!=="undefined"){value=i.raws.after;if(value.includes("\n")){value=value.replace(/[^\n]+$/,"")}return false}}});if(value)value=value.replace(/\S/g,"");return value}rawBeforeOpen(root){let value;root.walk(i=>{if(i.type!=="decl"){value=i.raws.between;if(typeof value!=="undefined")return false}});return value}rawColon(root){let value;root.walkDecls(i=>{if(typeof i.raws.between!=="undefined"){value=i.raws.between.replace(/[^\s:]/g,"");return false}});return value}beforeAfter(node,detect){let value;if(node.type==="decl"){value=this.raw(node,null,"beforeDecl")}else if(node.type==="comment"){value=this.raw(node,null,"beforeComment")}else if(detect==="before"){value=this.raw(node,null,"beforeRule")}else{value=this.raw(node,null,"beforeClose")}let buf=node.parent;let depth=0;while(buf&&buf.type!=="root"){depth+=1;buf=buf.parent}if(value.includes("\n")){let indent=this.raw(node,null,"indent");if(indent.length){for(let step=0;step<depth;step++)value+=indent}}return value}rawValue(node,prop){let value=node[prop];let raw=node.raws[prop];if(raw&&raw.value===value){return raw.raw}return value}}module.exports=Stringifier},{}],147:[function(require,module,exports){"use strict";let Stringifier=require("./stringifier");function stringify(node,builder){let str=new Stringifier(builder);str.stringify(node)}module.exports=stringify;stringify.default=stringify},{"./stringifier":146}],148:[function(require,module,exports){"use strict";module.exports.isClean=Symbol("isClean")},{}],149:[function(require,module,exports){"use strict";const SINGLE_QUOTE="'".charCodeAt(0);const DOUBLE_QUOTE='"'.charCodeAt(0);const BACKSLASH="\\".charCodeAt(0);const SLASH="/".charCodeAt(0);const NEWLINE="\n".charCodeAt(0);const SPACE=" ".charCodeAt(0);const FEED="\f".charCodeAt(0);const TAB="\t".charCodeAt(0);const CR="\r".charCodeAt(0);const OPEN_SQUARE="[".charCodeAt(0);const CLOSE_SQUARE="]".charCodeAt(0);const OPEN_PARENTHESES="(".charCodeAt(0);const CLOSE_PARENTHESES=")".charCodeAt(0);const OPEN_CURLY="{".charCodeAt(0);const CLOSE_CURLY="}".charCodeAt(0);const SEMICOLON=";".charCodeAt(0);const ASTERISK="*".charCodeAt(0);const COLON=":".charCodeAt(0);const AT="@".charCodeAt(0);const RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g;const RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g;const RE_BAD_BRACKET=/.[\n"'(/\\]/;const RE_HEX_ESCAPE=/[\da-f]/i;module.exports=function tokenizer(input,options={}){let css=input.css.valueOf();let ignore=options.ignoreErrors;let code,next,quote,content,escape;let escaped,escapePos,prev,n,currentToken;let length=css.length;let pos=0;let buffer=[];let returned=[];function position(){return pos}function unclosed(what){throw input.error("Unclosed "+what,pos)}function endOfFile(){return returned.length===0&&pos>=length}function nextToken(opts){if(returned.length)return returned.pop();if(pos>=length)return;let ignoreUnclosed=opts?opts.ignoreUnclosed:false;code=css.charCodeAt(pos);switch(code){case NEWLINE:case SPACE:case TAB:case CR:case FEED:{next=pos;do{next+=1;code=css.charCodeAt(next)}while(code===SPACE||code===NEWLINE||code===TAB||code===CR||code===FEED);currentToken=["space",css.slice(pos,next)];pos=next-1;break}case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let controlChar=String.fromCharCode(code);currentToken=[controlChar,controlChar,pos];break}case OPEN_PARENTHESES:{prev=buffer.length?buffer.pop()[1]:"";n=css.charCodeAt(pos+1);if(prev==="url"&&n!==SINGLE_QUOTE&&n!==DOUBLE_QUOTE&&n!==SPACE&&n!==NEWLINE&&n!==TAB&&n!==FEED&&n!==CR){next=pos;do{escaped=false;next=css.indexOf(")",next+1);if(next===-1){if(ignore||ignoreUnclosed){next=pos;break}else{unclosed("bracket")}}escapePos=next;while(css.charCodeAt(escapePos-1)===BACKSLASH){escapePos-=1;escaped=!escaped}}while(escaped);currentToken=["brackets",css.slice(pos,next+1),pos,next];pos=next}else{next=css.indexOf(")",pos+1);content=css.slice(pos,next+1);if(next===-1||RE_BAD_BRACKET.test(content)){currentToken=["(","(",pos]}else{currentToken=["brackets",content,pos,next];pos=next}}break}case SINGLE_QUOTE:case DOUBLE_QUOTE:{quote=code===SINGLE_QUOTE?"'":'"';next=pos;do{escaped=false;next=css.indexOf(quote,next+1);if(next===-1){if(ignore||ignoreUnclosed){next=pos+1;break}else{unclosed("string")}}escapePos=next;while(css.charCodeAt(escapePos-1)===BACKSLASH){escapePos-=1;escaped=!escaped}}while(escaped);currentToken=["string",css.slice(pos,next+1),pos,next];pos=next;break}case AT:{RE_AT_END.lastIndex=pos+1;RE_AT_END.test(css);if(RE_AT_END.lastIndex===0){next=css.length-1}else{next=RE_AT_END.lastIndex-2}currentToken=["at-word",css.slice(pos,next+1),pos,next];pos=next;break}case BACKSLASH:{next=pos;escape=true;while(css.charCodeAt(next+1)===BACKSLASH){next+=1;escape=!escape}code=css.charCodeAt(next+1);if(escape&&code!==SLASH&&code!==SPACE&&code!==NEWLINE&&code!==TAB&&code!==CR&&code!==FEED){next+=1;if(RE_HEX_ESCAPE.test(css.charAt(next))){while(RE_HEX_ESCAPE.test(css.charAt(next+1))){next+=1}if(css.charCodeAt(next+1)===SPACE){next+=1}}}currentToken=["word",css.slice(pos,next+1),pos,next];pos=next;break}default:{if(code===SLASH&&css.charCodeAt(pos+1)===ASTERISK){next=css.indexOf("*/",pos+2)+1;if(next===0){if(ignore||ignoreUnclosed){next=css.length}else{unclosed("comment")}}currentToken=["comment",css.slice(pos,next+1),pos,next];pos=next}else{RE_WORD_END.lastIndex=pos+1;RE_WORD_END.test(css);if(RE_WORD_END.lastIndex===0){next=css.length-1}else{next=RE_WORD_END.lastIndex-2}currentToken=["word",css.slice(pos,next+1),pos,next];buffer.push(currentToken);pos=next}break}}pos++;return currentToken}function back(token){returned.push(token)}return{back:back,nextToken:nextToken,endOfFile:endOfFile,position:position}}},{}],150:[function(require,module,exports){"use strict";let printed={};module.exports=function warnOnce(message){if(printed[message])return;printed[message]=true;if(typeof console!=="undefined"&&console.warn){console.warn(message)}}},{}],151:[function(require,module,exports){"use strict";class Warning{constructor(text,opts={}){this.type="warning";this.text=text;if(opts.node&&opts.node.source){let pos=opts.node.positionBy(opts);this.line=pos.line;this.column=pos.column}for(let opt in opts)this[opt]=opts[opt]}toString(){if(this.node){return this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message}if(this.plugin){return this.plugin+": "+this.text}return this.text}}module.exports=Warning;Warning.default=Warning},{}],152:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],153:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ESCAPED_SUBS="@xR25$e!#fda8f623";function preserve_escaped(value){return value.split("..").join(ESCAPED_SUBS)}function unpreserve_escaped(value){return value.split(ESCAPED_SUBS).join(".")}function boundary_to_dot(value){return value.split("][").join(".").split("[").join(".")}function strip_braces(value){return value.split("[").join(".").split("]").join("")}function escape_dots(value){var val=value.split("'");return val.length<3?val.join("'"):val.map(function(seg){if(seg.length<3)return seg;if(seg[0]==="."||seg[seg.length-1]===".")return seg;return seg.split(".").join("&&")}).join("")}function unescape_dots(value){return unpreserve_escaped(value.split("&&").join("."))}function partify(value){if(!value)return;return escape_dots(strip_braces(boundary_to_dot(preserve_escaped(""+value)))).split(".")}function canClone(o){return typeof o.__CLONE__==="function"}function clone(o){if(typeof o!=="object"||o===null)return o;if(Array.isArray(o))return o.map(clone);return canClone(o)?o.__CLONE__(clone):o.constructor!==Object?o:Object.keys(o).reduce(function(pre,k){pre[k]=typeof o[k]==="object"?clone(o[k]):o[k];return pre},{})}function get(path,o){var parts=partify(path);var first;if(typeof o==="object"){if(parts.length===1)return o[unescape_dots(parts[0])];if(parts.length===0)return;first=o[parts.shift()];return typeof o==="object"&&o!==null?parts.reduce(function(target,prop){if(target==null)return target;return target[unescape_dots(prop)]},first):null}else{throw new TypeError("get(): expects an object got "+typeof o)}}exports.get=get;function set(path,value,obj){var parts=partify(path);if(typeof obj!=="object"||obj==null){return clone(obj)}else{return _set(obj,value,parts)}}exports.set=set;function _set(obj,value,parts){var o;var k;if(parts.length===0)return value;o=typeof obj!=="object"||obj===null?{}:clone(obj);k=unescape_dots(parts[0]);o[k]=_set(o[k],value,parts.slice(1));return o}function default_1(k,v,o){if(o==null)return get(k,v);else return set(k,v,o)}exports.default=default_1},{}],154:[function(require,module,exports){const htmlparser=require("htmlparser2");const escapeStringRegexp=require("escape-string-regexp");const{klona:klona}=require("klona");const{isPlainObject:isPlainObject}=require("is-plain-object");const deepmerge=require("deepmerge");const parseSrcset=require("parse-srcset");const{parse:postcssParse}=require("postcss");const mediaTags=["img","audio","video","picture","svg","object","map","iframe","embed"];const vulnerableTags=["script","style"];function each(obj,cb){if(obj){Object.keys(obj).forEach(function(key){cb(obj[key],key)})}}function has(obj,key){return{}.hasOwnProperty.call(obj,key)}function filter(a,cb){const n=[];each(a,function(v){if(cb(v)){n.push(v)}});return n}function isEmptyObject(obj){for(const key in obj){if(has(obj,key)){return false}}return true}function stringifySrcset(parsedSrcset){return parsedSrcset.map(function(part){if(!part.url){throw new Error("URL missing")}return part.url+(part.w?` ${part.w}w`:"")+(part.h?` ${part.h}h`:"")+(part.d?` ${part.d}x`:"")}).join(", ")}module.exports=sanitizeHtml;const VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(html,options,_recursing){let result="";let tempResult="";function Frame(tag,attribs){const that=this;this.tag=tag;this.attribs=attribs||{};this.tagPosition=result.length;this.text="";this.mediaChildren=[];this.updateParentNodeText=function(){if(stack.length){const parentFrame=stack[stack.length-1];parentFrame.text+=that.text}};this.updateParentNodeMediaChildren=function(){if(stack.length&&mediaTags.includes(this.tag)){const parentFrame=stack[stack.length-1];parentFrame.mediaChildren.push(this.tag)}}}options=Object.assign({},sanitizeHtml.defaults,options);options.parser=Object.assign({},htmlParserDefaults,options.parser);vulnerableTags.forEach(function(tag){if(options.allowedTags&&options.allowedTags.indexOf(tag)>-1&&!options.allowVulnerableTags){console.warn(`\n\n Your \`allowedTags\` option includes, \`${tag}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}});const nonTextTagsArray=options.nonTextTags||["script","style","textarea","option"];let allowedAttributesMap;let allowedAttributesGlobMap;if(options.allowedAttributes){allowedAttributesMap={};allowedAttributesGlobMap={};each(options.allowedAttributes,function(attributes,tag){allowedAttributesMap[tag]=[];const globRegex=[];attributes.forEach(function(obj){if(typeof obj==="string"&&obj.indexOf("*")>=0){globRegex.push(escapeStringRegexp(obj).replace(/\\\*/g,".*"))}else{allowedAttributesMap[tag].push(obj)}});allowedAttributesGlobMap[tag]=new RegExp("^("+globRegex.join("|")+")$")})}const allowedClassesMap={};each(options.allowedClasses,function(classes,tag){if(allowedAttributesMap){if(!has(allowedAttributesMap,tag)){allowedAttributesMap[tag]=[]}allowedAttributesMap[tag].push("class")}allowedClassesMap[tag]=classes});const transformTagsMap={};let transformTagsAll;each(options.transformTags,function(transform,tag){let transFun;if(typeof transform==="function"){transFun=transform}else if(typeof transform==="string"){transFun=sanitizeHtml.simpleTransform(transform)}if(tag==="*"){transformTagsAll=transFun}else{transformTagsMap[tag]=transFun}});let depth;let stack;let skipMap;let transformMap;let skipText;let skipTextDepth;let addedText=false;initializeState();const parser=new htmlparser.Parser({onopentag:function(name,attribs){if(options.enforceHtmlBoundary&&name==="html"){initializeState()}if(skipText){skipTextDepth++;return}const frame=new Frame(name,attribs);stack.push(frame);let skip=false;const hasText=!!frame.text;let transformedTag;if(has(transformTagsMap,name)){transformedTag=transformTagsMap[name](name,attribs);frame.attribs=attribs=transformedTag.attribs;if(transformedTag.text!==undefined){frame.innerText=transformedTag.text}if(name!==transformedTag.tagName){frame.name=name=transformedTag.tagName;transformMap[depth]=transformedTag.tagName}}if(transformTagsAll){transformedTag=transformTagsAll(name,attribs);frame.attribs=attribs=transformedTag.attribs;if(name!==transformedTag.tagName){frame.name=name=transformedTag.tagName;transformMap[depth]=transformedTag.tagName}}if(options.allowedTags&&options.allowedTags.indexOf(name)===-1||options.disallowedTagsMode==="recursiveEscape"&&!isEmptyObject(skipMap)||options.nestingLimit!=null&&depth>=options.nestingLimit){skip=true;skipMap[depth]=true;if(options.disallowedTagsMode==="discard"){if(nonTextTagsArray.indexOf(name)!==-1){skipText=true;skipTextDepth=1}}skipMap[depth]=true}depth++;if(skip){if(options.disallowedTagsMode==="discard"){return}tempResult=result;result=""}result+="<"+name;if(!allowedAttributesMap||has(allowedAttributesMap,name)||allowedAttributesMap["*"]){each(attribs,function(value,a){if(!VALID_HTML_ATTRIBUTE_NAME.test(a)){delete frame.attribs[a];return}let parsed;let passedAllowedAttributesMapCheck=false;if(!allowedAttributesMap||has(allowedAttributesMap,name)&&allowedAttributesMap[name].indexOf(a)!==-1||allowedAttributesMap["*"]&&allowedAttributesMap["*"].indexOf(a)!==-1||has(allowedAttributesGlobMap,name)&&allowedAttributesGlobMap[name].test(a)||allowedAttributesGlobMap["*"]&&allowedAttributesGlobMap["*"].test(a)){passedAllowedAttributesMapCheck=true}else if(allowedAttributesMap&&allowedAttributesMap[name]){for(const o of allowedAttributesMap[name]){if(isPlainObject(o)&&o.name&&o.name===a){passedAllowedAttributesMapCheck=true;let newValue="";if(o.multiple===true){const splitStrArray=value.split(" ");for(const s of splitStrArray){if(o.values.indexOf(s)!==-1){if(newValue===""){newValue=s}else{newValue+=" "+s}}}}else if(o.values.indexOf(value)>=0){newValue=value}value=newValue}}}if(passedAllowedAttributesMapCheck){if(options.allowedSchemesAppliedToAttributes.indexOf(a)!==-1){if(naughtyHref(name,value)){delete frame.attribs[a];return}}if(name==="iframe"&&a==="src"){let allowed=true;try{value=value.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//");if(value.startsWith("relative:")){throw new Error("relative: exploit attempt")}let base="relative://relative-site";for(let i=0;i<100;i++){base+=`/${i}`}const parsed=new URL(value,base);const isRelativeUrl=parsed&&parsed.hostname==="relative-site"&&parsed.protocol==="relative:";if(isRelativeUrl){allowed=has(options,"allowIframeRelativeUrls")?options.allowIframeRelativeUrls:!options.allowedIframeHostnames&&!options.allowedIframeDomains}else if(options.allowedIframeHostnames||options.allowedIframeDomains){const allowedHostname=(options.allowedIframeHostnames||[]).find(function(hostname){return hostname===parsed.hostname});const allowedDomain=(options.allowedIframeDomains||[]).find(function(domain){return parsed.hostname===domain||parsed.hostname.endsWith(`.${domain}`)});allowed=allowedHostname||allowedDomain}}catch(e){allowed=false}if(!allowed){delete frame.attribs[a];return}}if(a==="srcset"){try{parsed=parseSrcset(value);parsed.forEach(function(value){if(naughtyHref("srcset",value.url)){value.evil=true}});parsed=filter(parsed,function(v){return!v.evil});if(!parsed.length){delete frame.attribs[a];return}else{value=stringifySrcset(filter(parsed,function(v){return!v.evil}));frame.attribs[a]=value}}catch(e){delete frame.attribs[a];return}}if(a==="class"){const allowedSpecificClasses=allowedClassesMap[name];const allowedWildcardClasses=allowedClassesMap["*"];if(allowedSpecificClasses&&allowedWildcardClasses){value=filterClasses(value,deepmerge(allowedSpecificClasses,allowedWildcardClasses))}else{value=filterClasses(value,allowedSpecificClasses||allowedWildcardClasses)}if(!value.length){delete frame.attribs[a];return}}if(a==="style"){try{const abstractSyntaxTree=postcssParse(name+" {"+value+"}");const filteredAST=filterCss(abstractSyntaxTree,options.allowedStyles);value=stringifyStyleAttributes(filteredAST);if(value.length===0){delete frame.attribs[a];return}}catch(e){delete frame.attribs[a];return}}result+=" "+a;if(value&&value.length){result+='="'+escapeHtml(value,true)+'"'}}else{delete frame.attribs[a]}})}if(options.selfClosing.indexOf(name)!==-1){result+=" />"}else{result+=">";if(frame.innerText&&!hasText&&!options.textFilter){result+=escapeHtml(frame.innerText);addedText=true}}if(skip){result=tempResult+escapeHtml(result);tempResult=""}},ontext:function(text){if(skipText){return}const lastFrame=stack[stack.length-1];let tag;if(lastFrame){tag=lastFrame.tag;text=lastFrame.innerText!==undefined?lastFrame.innerText:text}if(options.disallowedTagsMode==="discard"&&(tag==="script"||tag==="style")){result+=text}else{const escaped=escapeHtml(text,false);if(options.textFilter&&!addedText){result+=options.textFilter(escaped,tag)}else if(!addedText){result+=escaped}}if(stack.length){const frame=stack[stack.length-1];frame.text+=text}},onclosetag:function(name){if(skipText){skipTextDepth--;if(!skipTextDepth){skipText=false}else{return}}const frame=stack.pop();if(!frame){return}skipText=options.enforceHtmlBoundary?name==="html":false;depth--;const skip=skipMap[depth];if(skip){delete skipMap[depth];if(options.disallowedTagsMode==="discard"){frame.updateParentNodeText();return}tempResult=result;result=""}if(transformMap[depth]){name=transformMap[depth];delete transformMap[depth]}if(options.exclusiveFilter&&options.exclusiveFilter(frame)){result=result.substr(0,frame.tagPosition);return}frame.updateParentNodeMediaChildren();frame.updateParentNodeText();if(options.selfClosing.indexOf(name)!==-1){if(skip){result=tempResult;tempResult=""}return}result+="</"+name+">";if(skip){result=tempResult+escapeHtml(result);tempResult=""}}},options.parser);parser.write(html);parser.end();return result;function initializeState(){result="";depth=0;stack=[];skipMap={};transformMap={};skipText=false;skipTextDepth=0}function escapeHtml(s,quote){if(typeof s!=="string"){s=s+""}if(options.parser.decodeEntities){s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(quote){s=s.replace(/"/g,"&quot;")}}s=s.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(quote){s=s.replace(/"/g,"&quot;")}return s}function naughtyHref(name,href){href=href.replace(/[\x00-\x20]+/g,"");href=href.replace(/<!--.*?-->/g,"");const matches=href.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!matches){if(href.match(/^[/\\]{2}/)){return!options.allowProtocolRelative}return false}const scheme=matches[1].toLowerCase();if(has(options.allowedSchemesByTag,name)){return options.allowedSchemesByTag[name].indexOf(scheme)===-1}return!options.allowedSchemes||options.allowedSchemes.indexOf(scheme)===-1}function filterCss(abstractSyntaxTree,allowedStyles){if(!allowedStyles){return abstractSyntaxTree}const filteredAST=klona(abstractSyntaxTree);const astRules=abstractSyntaxTree.nodes[0];let selectedRule;if(allowedStyles[astRules.selector]&&allowedStyles["*"]){selectedRule=deepmerge(allowedStyles[astRules.selector],allowedStyles["*"])}else{selectedRule=allowedStyles[astRules.selector]||allowedStyles["*"]}if(selectedRule){filteredAST.nodes[0].nodes=astRules.nodes.reduce(filterDeclarations(selectedRule),[])}return filteredAST}function stringifyStyleAttributes(filteredAST){return filteredAST.nodes[0].nodes.reduce(function(extractedAttributes,attributeObject){extractedAttributes.push(attributeObject.prop+":"+attributeObject.value);return extractedAttributes},[]).join(";")}function filterDeclarations(selectedRule){return function(allowedDeclarationsList,attributeObject){if(has(selectedRule,attributeObject.prop)){const matchesRegex=selectedRule[attributeObject.prop].some(function(regularExpression){return regularExpression.test(attributeObject.value)});if(matchesRegex){allowedDeclarationsList.push(attributeObject)}}return allowedDeclarationsList}}function filterClasses(classes,allowed){if(!allowed){return classes}classes=classes.split(/\s+/);return classes.filter(function(clss){return allowed.indexOf(clss)!==-1}).join(" ")}}const htmlParserDefaults={decodeEntities:true};sanitizeHtml.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:true,enforceHtmlBoundary:false};sanitizeHtml.simpleTransform=function(newTagName,newAttribs,merge){merge=merge===undefined?true:merge;newAttribs=newAttribs||{};return function(tagName,attribs){let attrib;if(merge){for(attrib in newAttribs){attribs[attrib]=newAttribs[attrib]}}else{attribs=newAttribs}return{tagName:newTagName,attribs:attribs}}}},{deepmerge:95,"escape-string-regexp":116,htmlparser2:120,"is-plain-object":122,klona:123,"parse-srcset":126,postcss:140}],155:[function(require,module,exports){var util=require("./util");var has=Object.prototype.hasOwnProperty;var hasNativeMap=typeof Map!=="undefined";function ArraySet(){this._array=[];this._set=hasNativeMap?new Map:Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.size=function ArraySet_size(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var sStr=hasNativeMap?aStr:util.toSetString(aStr);var isDuplicate=hasNativeMap?this.has(aStr):has.call(this._set,sStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){if(hasNativeMap){this._set.set(aStr,idx)}else{this._set[sStr]=idx}}};ArraySet.prototype.has=function ArraySet_has(aStr){if(hasNativeMap){return this._set.has(aStr)}else{var sStr=util.toSetString(aStr);return has.call(this._set,sStr)}};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(hasNativeMap){var idx=this._set.get(aStr);if(idx>=0){return idx}}else{var sStr=util.toSetString(aStr);if(has.call(this._set,sStr)){return this._set[sStr]}}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet},{"./util":164}],156:[function(require,module,exports){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aIndex,aOutParam){var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(aIndex>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charCodeAt(aIndex++));if(digit===-1){throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1))}continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aIndex}},{"./base64":157}],157:[function(require,module,exports){var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length){return intToCharMap[number]}throw new TypeError("Must be between 0 and 63: "+number)};exports.decode=function(charCode){var bigA=65;var bigZ=90;var littleA=97;var littleZ=122;var zero=48;var nine=57;var plus=43;var slash=47;var littleOffset=26;var numberOffset=52;if(bigA<=charCode&&charCode<=bigZ){return charCode-bigA}if(littleA<=charCode&&charCode<=littleZ){return charCode-littleA+littleOffset}if(zero<=charCode&&charCode<=nine){return charCode-zero+numberOffset}if(charCode==plus){return 62}if(charCode==slash){return 63}return-1}},{}],158:[function(require,module,exports){exports.GREATEST_LOWER_BOUND=1;exports.LEAST_UPPER_BOUND=2;function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return aHigh<aHaystack.length?aHigh:-1}else{return mid}}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return mid}else{return aLow<0?-1:aLow}}}exports.search=function search(aNeedle,aHaystack,aCompare,aBias){if(aHaystack.length===0){return-1}var index=recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0){return-1}while(index-1>=0){if(aCompare(aHaystack[index],aHaystack[index-1],true)!==0){break}--index}return index}},{}],159:[function(require,module,exports){var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositionsInflated);this._sorted=true}return this._array};exports.MappingList=MappingList},{"./util":164}],160:[function(require,module,exports){function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y];ary[y]=temp}function randomIntInRange(low,high){return Math.round(low+Math.random()*(high-low))}function doQuickSort(ary,comparator,p,r){if(p<r){var pivotIndex=randomIntInRange(p,r);var i=p-1;swap(ary,pivotIndex,r);var pivot=ary[r];for(var j=p;j<r;j++){if(comparator(ary[j],pivot)<=0){i+=1;swap(ary,i,j)}}swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1);doQuickSort(ary,comparator,q+1,r)}}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}},{}],161:[function(require,module,exports){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");var quickSort=require("./quick-sort").quickSort;function SourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}return sourceMap.sections!=null?new IndexedSourceMapConsumer(sourceMap,aSourceMapURL):new BasicSourceMapConsumer(sourceMap,aSourceMapURL)}SourceMapConsumer.fromSourceMap=function(aSourceMap,aSourceMapURL){return BasicSourceMapConsumer.fromSourceMap(aSourceMap,aSourceMapURL)};SourceMapConsumer.prototype._version=3;SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:true,enumerable:true,get:function(){if(!this.__generatedMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:true,enumerable:true,get:function(){if(!this.__originalMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(aStr,index){var c=aStr.charAt(index);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.GREATEST_LOWER_BOUND=1;SourceMapConsumer.LEAST_UPPER_BOUND=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source===null?null:this._sources.at(mapping.source);source=util.computeSourceURL(sourceRoot,source,this._sourceMapURL);return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name===null?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var line=util.getArg(aArgs,"line");var needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};needle.source=this._findSourceIndex(needle.source);if(needle.source<0){return[]}var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(index>=0){var mapping=this._originalMappings[index];if(aArgs.column===undefined){var originalLine=mapping.originalLine;while(mapping&&mapping.originalLine===originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}else{var originalColumn=mapping.originalColumn;while(mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}}return mappings};exports.SourceMapConsumer=SourceMapConsumer;function BasicSourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}if(sourceRoot){sourceRoot=util.normalize(sourceRoot)}sources=sources.map(String).map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source});this._names=ArraySet.fromArray(names.map(String),true);this._sources=ArraySet.fromArray(sources,true);this._absoluteSources=this._sources.toArray().map(function(s){return util.computeSourceURL(sourceRoot,s,aSourceMapURL)});this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this._sourceMapURL=aSourceMapURL;this.file=file}BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;BasicSourceMapConsumer.prototype._findSourceIndex=function(aSource){var relativeSource=aSource;if(this.sourceRoot!=null){relativeSource=util.relative(this.sourceRoot,relativeSource)}if(this._sources.has(relativeSource)){return this._sources.indexOf(relativeSource)}var i;for(i=0;i<this._absoluteSources.length;++i){if(this._absoluteSources[i]==aSource){return i}}return-1};BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap,aSourceMapURL){var smc=Object.create(BasicSourceMapConsumer.prototype);var names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);var sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;smc._sourceMapURL=aSourceMapURL;smc._absoluteSources=smc._sources.toArray().map(function(s){return util.computeSourceURL(smc.sourceRoot,s,aSourceMapURL)});var generatedMappings=aSourceMap._mappings.toArray().slice();var destGeneratedMappings=smc.__generatedMappings=[];var destOriginalMappings=smc.__originalMappings=[];for(var i=0,length=generatedMappings.length;i<length;i++){var srcMapping=generatedMappings[i];var destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine;destMapping.generatedColumn=srcMapping.generatedColumn;if(srcMapping.source){destMapping.source=sources.indexOf(srcMapping.source);destMapping.originalLine=srcMapping.originalLine;destMapping.originalColumn=srcMapping.originalColumn;if(srcMapping.name){destMapping.name=names.indexOf(srcMapping.name)}destOriginalMappings.push(destMapping)}destGeneratedMappings.push(destMapping)}quickSort(smc.__originalMappings,util.compareByOriginalPositions);return smc};BasicSourceMapConsumer.prototype._version=3;Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Mapping(){this.generatedLine=0;this.generatedColumn=0;this.source=null;this.originalLine=null;this.originalColumn=null;this.name=null}BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var length=aStr.length;var index=0;var cachedSegments={};var temp={};var originalMappings=[];var generatedMappings=[];var mapping,str,segment,end,value;while(index<length){if(aStr.charAt(index)===";"){generatedLine++;index++;previousGeneratedColumn=0}else if(aStr.charAt(index)===","){index++}else{mapping=new Mapping;mapping.generatedLine=generatedLine;for(end=index;end<length;end++){if(this._charIsMappingSeparator(aStr,end)){break}}str=aStr.slice(index,end);segment=cachedSegments[str];if(segment){index+=str.length}else{segment=[];while(index<end){base64VLQ.decode(aStr,index,temp);value=temp.value;index=temp.rest;segment.push(value)}if(segment.length===2){throw new Error("Found a source, but no line and column")}if(segment.length===3){throw new Error("Found a source and line, but no column")}cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0];previousGeneratedColumn=mapping.generatedColumn;if(segment.length>1){mapping.source=previousSource+segment[1];previousSource+=segment[1];mapping.originalLine=previousOriginalLine+segment[2];previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;mapping.originalColumn=previousOriginalColumn+segment[3];previousOriginalColumn=mapping.originalColumn;if(segment.length>4){mapping.name=previousName+segment[4];previousName+=segment[4]}}generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){originalMappings.push(mapping)}}}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated);this.__generatedMappings=generatedMappings;quickSort(originalMappings,util.compareByOriginalPositions);this.__originalMappings=originalMappings};BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator,aBias)};BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!==null){source=this._sources.at(source);source=util.computeSourceURL(this.sourceRoot,source,this._sourceMapURL)}var name=util.getArg(mapping,"name",null);if(name!==null){name=this._names.at(name)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}};BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){if(!this.sourcesContent){return false}return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return sc==null})};BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource,nullOnMissing){if(!this.sourcesContent){return null}var index=this._findSourceIndex(aSource);if(index>=0){return this.sourcesContent[index]}var relativeSource=aSource;if(this.sourceRoot!=null){relativeSource=util.relative(this.sourceRoot,relativeSource)}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=relativeSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+relativeSource)){return this.sourcesContent[this._sources.indexOf("/"+relativeSource)]}}if(nullOnMissing){return null}else{throw new Error('"'+relativeSource+'" is not in the SourceMap.')}};BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var source=util.getArg(aArgs,"source");source=this._findSourceIndex(source);if(source<0){return{line:null,column:null,lastColumn:null}}var needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._originalMappings[index];if(mapping.source===needle.source){return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}};exports.BasicSourceMapConsumer=BasicSourceMapConsumer;function IndexedSourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}var version=util.getArg(sourceMap,"version");var sections=util.getArg(sourceMap,"sections");if(version!=this._version){throw new Error("Unsupported version: "+version)}this._sources=new ArraySet;this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url){throw new Error("Support for url field in sections not implemented.")}var offset=util.getArg(s,"offset");var offsetLine=util.getArg(offset,"line");var offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column){throw new Error("Section offsets must be ordered and non-overlapping.")}lastOffset=offset;return{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"),aSourceMapURL)}})}IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer;IndexedSourceMapConsumer.prototype._version=3;Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){var sources=[];for(var i=0;i<this._sections.length;i++){for(var j=0;j<this._sections[i].consumer.sources.length;j++){sources.push(this._sections[i].consumer.sources[j])}}return sources}});IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;if(cmp){return cmp}return needle.generatedColumn-section.generatedOffset.generatedColumn});var section=this._sections[sectionIndex];if(!section){return{source:null,line:null,column:null,name:null}}return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias})};IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})};IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var content=section.consumer.sourceContentFor(aSource,true);if(content){return content}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(section.consumer._findSourceIndex(util.getArg(aArgs,"source"))===-1){continue}var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){var ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}};IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(aStr,aSourceRoot){this.__generatedMappings=[];this.__originalMappings=[];for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var sectionMappings=section.consumer._generatedMappings;for(var j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j];var source=section.consumer._sources.at(mapping.source);source=util.computeSourceURL(section.consumer.sourceRoot,source,this._sourceMapURL);this._sources.add(source);source=this._sources.indexOf(source);var name=null;if(mapping.name){name=section.consumer._names.at(mapping.name);this._names.add(name);name=this._names.indexOf(name)}var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping);if(typeof adjustedMapping.originalLine==="number"){this.__originalMappings.push(adjustedMapping)}}}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated);quickSort(this.__originalMappings,util.compareByOriginalPositions)};exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer},{"./array-set":155,"./base64-vlq":156,"./binary-search":158,"./quick-sort":160,"./util":164}],162:[function(require,module,exports){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var sourceRelative=sourceFile;if(sourceRoot!==null){sourceRelative=util.relative(sourceRoot,sourceFile)}if(!generator._sources.has(sourceRelative)){generator._sources.add(sourceRelative)}var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null){source=String(source);if(!this._sources.has(source)){this._sources.add(source)}}if(name!=null){name=String(name);if(!this._names.has(name)){this._names.add(name)}}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents=Object.create(null)}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aOriginal&&typeof aOriginal.line!=="number"&&typeof aOriginal.column!=="number"){throw new Error("original.line and original.column are not numbers -- you probably meant to omit "+"the original mapping entirely and only map the generated position. If so, pass "+"null for the original mapping instead of an object with empty or null values.")}if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var next;var mapping;var nameIdx;var sourceIdx;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];next="";if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){next+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1])){continue}next+=","}}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){sourceIdx=this._sources.indexOf(mapping.source);next+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){nameIdx=this._names.indexOf(mapping.name);next+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}result+=next}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())};exports.SourceMapGenerator=SourceMapGenerator},{"./array-set":155,"./base64-vlq":156,"./mapping-list":159,"./util":164}],163:[function(require,module,exports){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var remainingLinesIndex=0;var shiftNextLine=function(){var lineContents=getNextLine();var newLine=getNextLine()||"";return lineContents+newLine;function getNextLine(){return remainingLinesIndex<remainingLines.length?remainingLines[remainingLinesIndex++]:undefined}};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[remainingLinesIndex]||"";var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[remainingLinesIndex]||"";node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLinesIndex<remainingLines.length){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.splice(remainingLinesIndex).join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode},{"./source-map-generator":162,"./util":164}],164:[function(require,module,exports){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=exports.isAbsolute(path);var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;exports.isAbsolute=function(aPath){return aPath.charAt(0)==="/"||urlRegexp.test(aPath)};function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var level=0;while(aPath.indexOf(aRoot+"/")!==0){var index=aRoot.lastIndexOf("/");if(index<0){return aPath}aRoot=aRoot.slice(0,index);if(aRoot.match(/^([^\/]+:\/)?\/*$/)){return aPath}++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)}exports.relative=relative;var supportsNullProto=function(){var obj=Object.create(null);return!("__proto__"in obj)}();function identity(s){return s}function toSetString(aStr){if(isProtoString(aStr)){return"$"+aStr}return aStr}exports.toSetString=supportsNullProto?identity:toSetString;function fromSetString(aStr){if(isProtoString(aStr)){return aStr.slice(1)}return aStr}exports.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString(s){if(!s){return false}var length=s.length;if(length<9){return false}if(s.charCodeAt(length-1)!==95||s.charCodeAt(length-2)!==95||s.charCodeAt(length-3)!==111||s.charCodeAt(length-4)!==116||s.charCodeAt(length-5)!==111||s.charCodeAt(length-6)!==114||s.charCodeAt(length-7)!==112||s.charCodeAt(length-8)!==95||s.charCodeAt(length-9)!==95){return false}for(var i=length-10;i>=0;i--){if(s.charCodeAt(i)!==36){return false}}return true}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0||onlyCompareOriginal){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositionsDeflated(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsDeflated=compareByGeneratedPositionsDeflated;function strcmp(aStr1,aStr2){if(aStr1===aStr2){return 0}if(aStr1===null){return 1}if(aStr2===null){return-1}if(aStr1>aStr2){return 1}return-1}function compareByGeneratedPositionsInflated(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated;function parseSourceMapInput(str){return JSON.parse(str.replace(/^\)]}'[^\n]*\n/,""))}exports.parseSourceMapInput=parseSourceMapInput;function computeSourceURL(sourceRoot,sourceURL,sourceMapURL){sourceURL=sourceURL||"";if(sourceRoot){if(sourceRoot[sourceRoot.length-1]!=="/"&&sourceURL[0]!=="/"){sourceRoot+="/"}sourceURL=sourceRoot+sourceURL}if(sourceMapURL){var parsed=urlParse(sourceMapURL);if(!parsed){throw new Error("sourceMapURL could not be parsed")}if(parsed.path){var index=parsed.path.lastIndexOf("/");if(index>=0){parsed.path=parsed.path.substring(0,index+1)}}sourceURL=join(urlGenerate(parsed),sourceURL)}return normalize(sourceURL)}exports.computeSourceURL=computeSourceURL},{}],165:[function(require,module,exports){exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./lib/source-node").SourceNode},{"./lib/source-map-consumer":161,"./lib/source-map-generator":162,"./lib/source-node":163}],166:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.escape=exports.PostFormApp=void 0;var commonMark=require("@board/common/lib/common-mark");var timer_1=require("@quenk/noni/lib/control/timer");var future_1=require("@quenk/noni/lib/control/monad/future");var util_1=require("@quenk/wml-widgets/lib/util");var feedback_1=require("@quenk/wml-widgets/lib/control/feedback");var browser_1=require("@quenk/jhr/lib/browser");var post_1=require("@board/validators/lib/post");var salary_range_1=require("@board/common/lib/data/post/salary-range");var app_1=require("./views/app");var preview_1=require("./views/preview");var finish_1=require("./views/finish");var CHANGE_EVENT_DURATION=250;var messages={notNull:"{name} is required.",minLength:"{name} must be at least {target} characters.",maxLength:"{name} must not be more than {target} characters.",isString:"{name} is invalid.",isNumber:"{name} is invalid."};var escapeMap={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"};var agent=browser_1.createAgent();var PostFormApp=function(){function PostFormApp(node){var _this=this;this.node=node;this.view=new app_1.PostFormAppView(this);this.previewView=new preview_1.PreviewView(this);this.finishView=new finish_1.FinishView(this);this.values={post:{data:{},errors:{},type:{options:[{label:"Full-Time",value:"Full-Time"},{label:"Part-Time",value:"Part-Time"},{label:"Contractor",value:"Contractor"},{label:"Co-Founder",value:"Co-Founder"},{label:"Contributor",value:"Contributor"},{label:"Volunteer",value:"Volunteer"}]},salary_range:{options:salary_range_1.ranges.map(function(value){return{label:value,value:value}})},onChange:timer_1.debounce(function(e){var name=e.name,value=e.value;if(post_1.validators.hasOwnProperty(name)){_this.values.post.data[name]=value;var eResult=post_1.validators[name](value);if(eResult.isLeft()){var msg=eResult.takeLeft().explain(messages,{name:name});_this.setControlErrorMessage(name,msg)}else{_this.values.post.data[name]=eResult.takeRight();_this.setControlOk(name)}_this.validatePost()}else{console.warn('Ignoring unknown field: "'+name+'"')}},CHANGE_EVENT_DURATION),onSelect:function(e){_this.values.post.data[e.name]=e.value;_this.validatePost()}},preview:{csp:"default-src:'none'; style-src 'self'",sandbox:"",srcdoc:""},buttons:{preview:{id:"preview-button",click:function(){return _this.showPreview()}},post:{click:function(){return _this.showPost()}},send:{id:"send",click:function(){return _this.send()}}}}}PostFormApp.create=function(node){return new PostFormApp(node)};PostFormApp.prototype.setControlErrorMessage=function(id,msg){var mCtl=util_1.getById(this.view,id);if(mCtl.isJust()){var ctl=mCtl.get();ctl.setMessage(msg);ctl.setValidationState(feedback_1.ValidationState.Error)}};PostFormApp.prototype.setControlOk=function(id){var mCtl=util_1.getById(this.view,id);if(mCtl.isJust()){var ctl=mCtl.get();ctl.setMessage("");ctl.setValidationState(feedback_1.ValidationState.Success)}};PostFormApp.prototype.validatePost=function(){var btn=util_1.getById(this.view,this.values.buttons.preview.id).get();var eresult=post_1.validate(this.values.post.data);if(eresult.isRight())btn.enable();else btn.disable()};PostFormApp.prototype.showPreview=function(){this.values.preview.srcdoc=previewTemplate(commonMark.parse(this.values.post.data.description));this.render(this.previewView)};PostFormApp.prototype.showPost=function(){this.render(this.view);this.validatePost()};PostFormApp.prototype.showFinished=function(){this.render(this.finishView)};PostFormApp.prototype.send=function(){var _this=this;var mButton=util_1.getById(this.previewView,this.values.buttons.send.id);if(mButton.isJust())mButton.get().disable();agent.post("/post",this.values.post.data).chain(function(r){if(r.code===401){_this.values.post.errors=r.body.errors;_this.view.invalidate()}else if(r.code===201){_this.showFinished()}else{return future_1.raise(new Error("Status: "+r.code))}return future_1.pure(undefined)}).catch(function(e){alert("An error occured please go back and try again!");return future_1.raise(e)}).fork(console.error,function(){})};PostFormApp.prototype.run=function(){this.render(this.view)};PostFormApp.prototype.render=function(view){while(this.node.firstChild!=null)this.node.removeChild(this.node.firstChild);this.node.appendChild(view.render());window.scroll(0,0)};return PostFormApp}();exports.PostFormApp=PostFormApp;var escape=function(str){return str.replace(/[&"'<>]/g,function(t){return escapeMap[t]})};exports.escape=escape;var previewTemplate=function(html){return'\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta name="author" content="Caribbean Developers">\n    <link rel="stylesheet" href="/assets/css/site.css">\n    <title>Job Preview</title>\n</head>\n\n<body>\n '+html+"\n</body>\n\n</html>\n"};PostFormApp.create(document.getElementById("main")).run()},{"./views/app":167,"./views/finish":168,"./views/preview":171,"@board/common/lib/common-mark":172,"@board/common/lib/data/post/salary-range":173,"@board/validators/lib/post":174,"@quenk/jhr/lib/browser":6,"@quenk/noni/lib/control/monad/future":18,"@quenk/noni/lib/control/timer":20,"@quenk/wml-widgets/lib/control/feedback":60,"@quenk/wml-widgets/lib/util":89}],167:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PostFormAppView=void 0;var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var grid_1=require("@quenk/wml-widgets/lib/layout/grid");var button_1=require("@quenk/wml-widgets/lib/control/button");var link_1=require("@quenk/wml-widgets/lib/content/link");var post_1=require("./form/post");var company_1=require("./form/company");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var PostFormAppView=function(){function PostFormAppView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.widget(new grid_1.GridLayout({},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({ww:{span:6,offset:3}},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("div",{class:"back-link-container"},[__this.widget(new link_1.Link({ww:{className:"back-link",text:" Back to Listings",href:"/"}},[]),{ww:{className:"back-link",text:" Back to Listings",href:"/"}})])]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("h3",{class:"board-post-form-heading"},[__document.createTextNode("Tell us about the job.")]),__this.registerView(new post_1.PostFormView(__context)).render()]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("h3",{class:"board-post-form-heading"},[__document.createTextNode("Tell us a little bit about the company hiring.")]),__this.registerView(new company_1.CompanyFormView(__context)).render()]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("div",{class:"preview-button-container"},[__this.widget(new button_1.Button({wml:{id:__context.values.buttons.preview.id},ww:{disabled:true,className:"preview-button -primary -large",text:"Preview",onClick:__context.values.buttons.preview.click}},[]),{wml:{id:__context.values.buttons.preview.id},ww:{disabled:true,className:"preview-button -primary -large",text:"Preview",onClick:__context.values.buttons.preview.click}})]),__this.node("p",{class:"required-note"},[__this.node("b",{},[__document.createTextNode("* indicates a field is required.")])])]),{})]),{})]),{ww:{span:6,offset:3}})]),{})]),{})}}PostFormAppView.prototype.registerView=function(v){this.views.push(v);return v};PostFormAppView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PostFormAppView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PostFormAppView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PostFormAppView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PostFormAppView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PostFormAppView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PostFormAppView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PostFormAppView}();exports.PostFormAppView=PostFormAppView},{"./form/company":169,"./form/post":170,"@quenk/noni/lib/data/maybe":24,"@quenk/wml-widgets/lib/content/link":44,"@quenk/wml-widgets/lib/control/button":52,"@quenk/wml-widgets/lib/layout/grid":79,"@quenk/wml/lib/dom":90}],168:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FinishView=void 0;var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var link_1=require("@quenk/wml-widgets/lib/content/link");var grid_1=require("@quenk/wml-widgets/lib/layout/grid");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var FinishView=function(){function FinishView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.widget(new grid_1.GridLayout({},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({ww:{span:8,offset:2}},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("h1",{class:"post-title"},[__document.createTextNode("Success !")])]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("p",{},[__document.createTextNode("\n            Your job posting has been saved and is waiting approval.\n            Approval usually takes up to 48 hours so check back later to see\n            it in the listings.\n\n            If we need any more information we will contact you via the email\n            you supplied.\n          ")]),__this.node("p",{},[__document.createTextNode("Thanks for choosing Caribbean Developers!")])]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("div",{class:"action-container"},[__this.widget(new link_1.Link({ww:{text:"See Current Listings",className:"current-listings-link",href:"/"}},[]),{ww:{text:"See Current Listings",className:"current-listings-link",href:"/"}})])]),{})]),{})]),{ww:{span:8,offset:2}})]),{})]),{})}}FinishView.prototype.registerView=function(v){this.views.push(v);return v};FinishView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};FinishView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};FinishView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};FinishView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};FinishView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};FinishView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};FinishView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return FinishView}();exports.FinishView=FinishView},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml-widgets/lib/content/link":44,"@quenk/wml-widgets/lib/layout/grid":79,"@quenk/wml/lib/dom":90}],169:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CompanyFormView=void 0;var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var grid_1=require("@quenk/wml-widgets/lib/layout/grid");var panel_1=require("@quenk/wml-widgets/lib/layout/panel");var text_field_1=require("@quenk/wml-widgets/lib/control/text-field");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var CompanyFormView=function(){function CompanyFormView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("form",{name:"company-form",onsubmit:function(e){return e.preventDefault()},autocomplete:"off"},[__this.widget(new panel_1.Panel({},[__this.widget(new panel_1.PanelBody({},[__this.widget(new grid_1.GridLayout({},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"company"},ww:{name:"company",label:"Company Name*",value:__context.values.post.data.company,onChange:__context.values.post.onChange}},[]),{wml:{id:"company"},ww:{name:"company",label:"Company Name*",value:__context.values.post.data.company,onChange:__context.values.post.onChange}})]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"company_logo"},ww:{name:"company_logo",label:"Logo",placeholder:"Please provide a url to a png image with resolution 400 x 400",value:__context.values.post.data.company_logo,onChange:__context.values.post.onChange}},[]),{wml:{id:"company_logo"},ww:{name:"company_logo",label:"Logo",placeholder:"Please provide a url to a png image with resolution 400 x 400",value:__context.values.post.data.company_logo,onChange:__context.values.post.onChange}})]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"company_email"},ww:{name:"company_email",label:"Email*",value:__context.values.post.data.company_email,onChange:__context.values.post.onChange}},[]),{wml:{id:"company_email"},ww:{name:"company_email",label:"Email*",value:__context.values.post.data.company_email,onChange:__context.values.post.onChange}})]),{})]),{})]),{})]),{})]),{})])}}CompanyFormView.prototype.registerView=function(v){this.views.push(v);return v};CompanyFormView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};CompanyFormView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};CompanyFormView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};CompanyFormView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};CompanyFormView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};CompanyFormView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};CompanyFormView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return CompanyFormView}();exports.CompanyFormView=CompanyFormView},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml-widgets/lib/control/text-field":72,"@quenk/wml-widgets/lib/layout/grid":79,"@quenk/wml-widgets/lib/layout/panel":82,"@quenk/wml/lib/dom":90}],170:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PostFormView=void 0;var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var grid_1=require("@quenk/wml-widgets/lib/layout/grid");var panel_1=require("@quenk/wml-widgets/lib/layout/panel");var text_field_1=require("@quenk/wml-widgets/lib/control/text-field");var drop_list_1=require("@quenk/wml-widgets/lib/control/drop-list");var checkbox_1=require("@quenk/wml-widgets/lib/control/checkbox");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var PostFormView=function(){function PostFormView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.node("form",{name:"post-form",onsubmit:function(e){return e.preventDefault()},autocomplete:"off"},[__this.widget(new panel_1.Panel({},[__this.widget(new panel_1.PanelBody({},[__this.widget(new grid_1.GridLayout({},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"title"},ww:{name:"title",label:"Title*",placeholder:"Example: Fintech Software Engineer Needed",value:__context.values.post.data.title,onChange:__context.values.post.onChange}},[]),{wml:{id:"title"},ww:{name:"title",label:"Title*",placeholder:"Example: Fintech Software Engineer Needed",value:__context.values.post.data.title,onChange:__context.values.post.onChange}})]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({ww:{span:6}},[__this.widget(new text_field_1.TextField({wml:{id:"location"},ww:{name:"location",label:"Location*",value:__context.values.post.data.location,onChange:__context.values.post.onChange}},[]),{wml:{id:"location"},ww:{name:"location",label:"Location*",value:__context.values.post.data.location,onChange:__context.values.post.onChange}})]),{ww:{span:6}}),__this.widget(new grid_1.Column({ww:{span:6}},[__this.node("label",{class:"ww-label"},[__document.createTextNode("Select A Job Type*")]),__this.widget(new drop_list_1.DropList({wml:{id:"type"},ww:{className:"-block",name:"type",value:__context.values.post.data.type,options:__context.values.post.type.options,onSelect:__context.values.post.onSelect}},[]),{wml:{id:"type"},ww:{className:"-block",name:"type",value:__context.values.post.data.type,options:__context.values.post.type.options,onSelect:__context.values.post.onSelect}})]),{ww:{span:6}})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"apply_url"},ww:{name:"apply_url",label:"Apply Link",placeholder:"Specify a url or email address applicants can use to apply",value:__context.values.post.data.apply_url,onChange:__context.values.post.onChange}},[]),{wml:{id:"apply_url"},ww:{name:"apply_url",label:"Apply Link",placeholder:"Specify a url or email address applicants can use to apply",value:__context.values.post.data.apply_url,onChange:__context.values.post.onChange}})]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({ww:{span:6}},[__this.node("b",{},[__document.createTextNode("\n              Is this a remote position? \n              "),__this.widget(new checkbox_1.Checkbox({ww:{name:"remote",value:__context.values.post.data.remote,onChange:__context.values.post.onSelect}},[]),{ww:{name:"remote",value:__context.values.post.data.remote,onChange:__context.values.post.onSelect}})])]),{ww:{span:6}}),__this.widget(new grid_1.Column({ww:{span:6}},[__this.node("b",{},[__document.createTextNode("Salary Range (USD/Monthly)")]),__this.widget(new drop_list_1.DropList({wml:{id:"salary_range"},ww:{name:"salary_range",options:__context.values.post.salary_range.options,value:__context.values.post.data.salary_range,onSelect:__context.values.post.onChange}},[]),{wml:{id:"salary_range"},ww:{name:"salary_range",options:__context.values.post.salary_range.options,value:__context.values.post.data.salary_range,onSelect:__context.values.post.onChange}})]),{ww:{span:6}})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new text_field_1.TextField({wml:{id:"description"},ww:{name:"description",placeholder:"Provide full details of the job. Markdown is supported",rows:12,value:__context.values.post.data.description,onChange:__context.values.post.onChange}},[]),{wml:{id:"description"},ww:{name:"description",placeholder:"Provide full details of the job. Markdown is supported",rows:12,value:__context.values.post.data.description,onChange:__context.values.post.onChange}})]),{})]),{})]),{})]),{})]),{})])}}PostFormView.prototype.registerView=function(v){this.views.push(v);return v};PostFormView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PostFormView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PostFormView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PostFormView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PostFormView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PostFormView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PostFormView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PostFormView}();exports.PostFormView=PostFormView},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml-widgets/lib/control/checkbox":54,"@quenk/wml-widgets/lib/control/drop-list":58,"@quenk/wml-widgets/lib/control/text-field":72,"@quenk/wml-widgets/lib/layout/grid":79,"@quenk/wml-widgets/lib/layout/panel":82,"@quenk/wml/lib/dom":90}],171:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PreviewView=void 0;var __document=require("@quenk/wml/lib/dom");var maybe_1=require("@quenk/noni/lib/data/maybe");var wml_widgets_1=require("@quenk/wml-widgets");var button_1=require("@quenk/wml-widgets/lib/control/button");var link_1=require("@quenk/wml-widgets/lib/content/link");var grid_1=require("@quenk/wml-widgets/lib/layout/grid");var embed_1=require("@quenk/wml-widgets/lib/content/embed");var __if=function(__expr,__conseq,__alt){return __expr?__conseq():__alt?__alt():[]};var __forIn=function(list,f,alt){var ret=[];for(var i=0;i<list.length;i++)ret=ret.concat(f(list[i],i,list));return ret.length===0?alt():ret};var __forOf=function(o,f,alt){var ret=[];for(var key in o)if(o.hasOwnProperty(key))ret=ret.concat(f(o[key],key,o));return ret.length===0?alt():ret};var PreviewView=function(){function PreviewView(__context){this.ids={};this.groups={};this.views=[];this.widgets=[];this.tree=__document.createElement("div");this.template=function(__this){return __this.widget(new grid_1.GridLayout({},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({ww:{span:8,offset:2}},[__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("h1",{class:"post-title"},[wml_widgets_1.text(__context.values.post.data.title)])]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("dl",{class:"ww-description-list ww-property-list -horizontal"},[])]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.widget(new embed_1.Embed({ww:{className:"-aspect-ratio-16x9"}},[__this.node("iframe",{id:"preview-iframe",csp:__context.values.preview.csp,sandbox:__context.values.preview.sandbox,srcdoc:__context.values.preview.srcdoc},[])]),{ww:{className:"-aspect-ratio-16x9"}})]),{})]),{}),__this.widget(new grid_1.Row({},[__this.widget(new grid_1.Column({},[__this.node("div",{class:"action-container"},[__this.widget(new link_1.Link({ww:{text:"Back",onClick:__context.values.buttons.post.click}},[]),{ww:{text:"Back",onClick:__context.values.buttons.post.click}}),__this.widget(new button_1.Button({wml:{id:__context.values.buttons.send.id},ww:{className:"send-button -primary -large",text:"Post",onClick:__context.values.buttons.send.click}},[]),{wml:{id:__context.values.buttons.send.id},ww:{className:"send-button -primary -large",text:"Post",onClick:__context.values.buttons.send.click}})])]),{})]),{})]),{ww:{span:8,offset:2}})]),{})]),{})}}PreviewView.prototype.registerView=function(v){this.views.push(v);return v};PreviewView.prototype.register=function(e,attrs){var attrsMap=attrs;if(attrsMap.wml){var _a=attrsMap.wml,id=_a.id,group=_a.group;if(id!=null){if(this.ids.hasOwnProperty(id))throw new Error("Duplicate id '"+id+"' detected!");this.ids[id]=e}if(group!=null){this.groups[group]=this.groups[group]||[];this.groups[group].push(e)}}return e};PreviewView.prototype.node=function(tag,attrs,children){var e=__document.createElement(tag);Object.keys(attrs).forEach(function(key){var value=attrs[key];if(typeof value==="function"){e[key]=value}else if(typeof value==="string"){if(value!=="")e.setAttribute(key,value)}else if(typeof value==="boolean"){e.setAttribute(key,"")}});children.forEach(function(c){switch(typeof c){case"string":case"number":case"boolean":var tn=__document.createTextNode(""+c);e.appendChild(tn);case"object":e.appendChild(c);break;default:throw new TypeError("Can not adopt child "+c+" of type "+typeof c)}});this.register(e,attrs);return e};PreviewView.prototype.widget=function(w,attrs){this.register(w,attrs);this.widgets.push(w);return w.render()};PreviewView.prototype.findById=function(id){var mW=maybe_1.fromNullable(this.ids[id]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findById(id)},mW)};PreviewView.prototype.findByGroup=function(name){var mGroup=maybe_1.fromArray(this.groups.hasOwnProperty(name)?this.groups[name]:[]);return this.views.reduce(function(p,c){return p.isJust()?p:c.findByGroup(name)},mGroup)};PreviewView.prototype.invalidate=function(){var tree=this.tree;var parent=tree.parentNode;if(tree==null)return console.warn("invalidate(): "+"Missing DOM tree!");if(tree.parentNode==null)throw new Error("invalidate(): cannot invalidate this view, it has no parent node!");parent.replaceChild(this.render(),tree)};PreviewView.prototype.render=function(){this.ids={};this.widgets.forEach(function(w){return w.removed()});this.widgets=[];this.views=[];this.tree=this.template(this);this.ids["root"]=this.ids["root"]?this.ids["root"]:this.tree;this.widgets.forEach(function(w){return w.rendered()});return this.tree};return PreviewView}();exports.PreviewView=PreviewView},{"@quenk/noni/lib/data/maybe":24,"@quenk/wml-widgets":78,"@quenk/wml-widgets/lib/content/embed":42,"@quenk/wml-widgets/lib/content/link":44,"@quenk/wml-widgets/lib/control/button":52,"@quenk/wml-widgets/lib/layout/grid":79,"@quenk/wml/lib/dom":90}],172:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parse=void 0;var marked=require("marked");var sanitize=require("sanitize-html");var parse=function(src){var raw=marked(String(src),{breaks:true,gfm:true});return sanitize(raw,{allowedTags:["b","i","em","strong","p","h1","h2","h3","h4","h5","h6","div","span","ul","ol","li","blockquote","hr"],allowedAttributes:{}})};exports.parse=parse},{marked:124,"sanitize-html":154}],173:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ranges=void 0;exports.ranges=["100-500","500-1000","1000-2000","2000-3000","3000-4000","4000-5000","5000-6000","6000-7500","7500-8500","8500-9500","9500-10000","10K-20K","20K-30K","30K-40K","50K-60K","60K-70K","70K-80K","90K-100K","100K+"]},{}],174:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validatePartial=exports.validate=exports.partialValidators=exports.validators=void 0;var preconditions_1=require("@quenk/preconditions");var record_1=require("@quenk/preconditions/lib/record");var boolean_1=require("@quenk/preconditions/lib/boolean");var string_1=require("@quenk/preconditions/lib/string");var validators_1=require("./validators");var _string=preconditions_1.and(string_1.isString,string_1.trim);exports.validators={approved:preconditions_1.optional(boolean_1.isBoolean),title:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall,validators_1.minLength(3)))),type:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall))),location:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall))),remote:preconditions_1.optional(boolean_1.isBoolean),description:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textlarge,validators_1.minLength(3),validators_1.maxLength(6e3)))),company:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.name))),company_email:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.email))),company_logo:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.url))),apply_url:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.url))),salary_range:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.salaryRange)))};exports.partialValidators={approved:preconditions_1.optional(boolean_1.isBoolean),title:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall,validators_1.minLength(3)))),type:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall))),location:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textsmall))),remote:preconditions_1.optional(boolean_1.isBoolean),description:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.textlarge,validators_1.minLength(3),validators_1.maxLength(6e3)))),company:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.name))),company_email:preconditions_1.and(preconditions_1.notNull,preconditions_1.and(_string,preconditions_1.every(validators_1.email))),company_logo:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.url))),apply_url:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.url))),salary_range:preconditions_1.optional(preconditions_1.and(_string,preconditions_1.every(validators_1.salaryRange)))};exports.validate=preconditions_1.and(record_1.isRecord,record_1.restrict(exports.validators));exports.validatePartial=preconditions_1.and(record_1.isRecord,record_1.intersect(exports.partialValidators))},{"./validators":175,"@quenk/preconditions":33,"@quenk/preconditions/lib/boolean":32,"@quenk/preconditions/lib/record":34,"@quenk/preconditions/lib/string":39}],175:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.salaryRange=exports.maxLength=exports.minLength=exports.textlarge=exports.textmedium=exports.textsmall=exports.url=exports.password=exports.email=exports.name=void 0;var string=require("@quenk/preconditions/lib/string");var array=require("@quenk/preconditions/lib/array");var preconditions_1=require("@quenk/preconditions");var array_1=require("@quenk/noni/lib/data/array");var result_1=require("@quenk/preconditions/lib/result");var salary_range_1=require("@board/common/lib/data/post/salary-range");exports.name=preconditions_1.and(string.isString,preconditions_1.and(string.minLength(1),string.maxLength(64)));exports.email=preconditions_1.and(string.isString,preconditions_1.and(preconditions_1.and(string.minLength(3),string.maxLength(64)),string.matches(/@/)));exports.password=preconditions_1.and(string.isString,preconditions_1.and(string.minLength(8),string.maxLength(140)));exports.url=preconditions_1.and(string.isString,preconditions_1.and(preconditions_1.and(string.minLength(7),string.maxLength(5e3)),string.matches(/^(http|https):\/\//)));exports.textsmall=preconditions_1.and(string.isString,preconditions_1.and(string.minLength(0),string.maxLength(256)));exports.textmedium=preconditions_1.and(string.isString,preconditions_1.and(string.minLength(0),string.maxLength(5e3)));exports.textlarge=preconditions_1.and(string.isString,preconditions_1.and(string.minLength(0),string.maxLength(25*1e3)));var minLength=function(n){return function(value){return Array.isArray(value)?array.min(n)(value):string.minLength(n)(value)}};exports.minLength=minLength;var maxLength=function(n){return function(value){return Array.isArray(value)?array.max(n)(value):string.maxLength(n)(value)}};exports.maxLength=maxLength;var salaryRange=function(value){return array_1.contains(salary_range_1.ranges,value)?result_1.succeed(value):result_1.fail("invalid",{value:value})};exports.salaryRange=salaryRange},{"@board/common/lib/data/post/salary-range":173,"@quenk/noni/lib/data/array":21,"@quenk/preconditions":33,"@quenk/preconditions/lib/array":31,"@quenk/preconditions/lib/result":38,"@quenk/preconditions/lib/string":39}]},{},[166]);
